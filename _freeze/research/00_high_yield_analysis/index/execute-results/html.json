{
  "hash": "d6fc90f65135463c8ab157b427b4a074",
  "result": {
    "markdown": "---\ntitle: \"High Yield Debt vs. Equities\"\nauthor: \"Max Sands\"\ndate: \"2022-12-09\"\ndescription: \"Read Time: 15-25 mins\"\ncategories: [High Yield Debt]\nimage: preview_image.jpeg\neditor_options: \n  chunk_output_type: console\nmessage: false\nwarning: false\n---\n\n\n# Intro\n\nIn this article we will investigate:\n\n1.  The time periods where High Yield Debt outperformed Equities\n\n2.  Why these time periods occurred\n\n3.  Where both of these asset classes may be heading over the next few years\n\nLet's load the data:\n\n\n\n\n\n::: panel-tabset\n### Plot\n\n\n::: {.cell .column-page fig.dpi='300'}\n\n```{.r .cell-code}\nhigh_yield_data %>% \n    filter(date >= min_date) %>% \n    plot_time_series(10) +\n    theme(text = element_text(size = 16))\n```\n\n::: {.cell-output-display}\n![Shaded regions indicate a time period when High Yield spreads exceeded 10%](index_files/figure-html/unnamed-chunk-2-1.png){width=1056}\n:::\n:::\n\n\n### Data\n\n\n::: {.cell}\n\n```{.r .cell-code}\nhigh_yield_data_filled %>% \n    pivot_wider(names_from = name, values_from = value) %>% \n    mutate(across(.cols = c(2,3,7,5), .fns = ~scales::percent(.x, accuracy = .01, scale = 1))) %>% \n    mutate(across(.cols = c(4,6), .fns = ~scales::number(.x, accuracy = 1))) %>% \n    head() %>% \n    rename(Date = date) %>% \n    gt()\n```\n\n::: {.cell-output-display}\n```{=html}\n<div id=\"eaxwndzqjs\" style=\"overflow-x:auto;overflow-y:auto;width:auto;height:auto;\">\n<style>html {\n  font-family: -apple-system, BlinkMacSystemFont, 'Segoe UI', Roboto, Oxygen, Ubuntu, Cantarell, 'Helvetica Neue', 'Fira Sans', 'Droid Sans', Arial, sans-serif;\n}\n\n#eaxwndzqjs .gt_table {\n  display: table;\n  border-collapse: collapse;\n  margin-left: auto;\n  margin-right: auto;\n  color: #333333;\n  font-size: 16px;\n  font-weight: normal;\n  font-style: normal;\n  background-color: #FFFFFF;\n  width: auto;\n  border-top-style: solid;\n  border-top-width: 2px;\n  border-top-color: #A8A8A8;\n  border-right-style: none;\n  border-right-width: 2px;\n  border-right-color: #D3D3D3;\n  border-bottom-style: solid;\n  border-bottom-width: 2px;\n  border-bottom-color: #A8A8A8;\n  border-left-style: none;\n  border-left-width: 2px;\n  border-left-color: #D3D3D3;\n}\n\n#eaxwndzqjs .gt_heading {\n  background-color: #FFFFFF;\n  text-align: center;\n  border-bottom-color: #FFFFFF;\n  border-left-style: none;\n  border-left-width: 1px;\n  border-left-color: #D3D3D3;\n  border-right-style: none;\n  border-right-width: 1px;\n  border-right-color: #D3D3D3;\n}\n\n#eaxwndzqjs .gt_title {\n  color: #333333;\n  font-size: 125%;\n  font-weight: initial;\n  padding-top: 4px;\n  padding-bottom: 4px;\n  padding-left: 5px;\n  padding-right: 5px;\n  border-bottom-color: #FFFFFF;\n  border-bottom-width: 0;\n}\n\n#eaxwndzqjs .gt_subtitle {\n  color: #333333;\n  font-size: 85%;\n  font-weight: initial;\n  padding-top: 0;\n  padding-bottom: 6px;\n  padding-left: 5px;\n  padding-right: 5px;\n  border-top-color: #FFFFFF;\n  border-top-width: 0;\n}\n\n#eaxwndzqjs .gt_bottom_border {\n  border-bottom-style: solid;\n  border-bottom-width: 2px;\n  border-bottom-color: #D3D3D3;\n}\n\n#eaxwndzqjs .gt_col_headings {\n  border-top-style: solid;\n  border-top-width: 2px;\n  border-top-color: #D3D3D3;\n  border-bottom-style: solid;\n  border-bottom-width: 2px;\n  border-bottom-color: #D3D3D3;\n  border-left-style: none;\n  border-left-width: 1px;\n  border-left-color: #D3D3D3;\n  border-right-style: none;\n  border-right-width: 1px;\n  border-right-color: #D3D3D3;\n}\n\n#eaxwndzqjs .gt_col_heading {\n  color: #333333;\n  background-color: #FFFFFF;\n  font-size: 100%;\n  font-weight: normal;\n  text-transform: inherit;\n  border-left-style: none;\n  border-left-width: 1px;\n  border-left-color: #D3D3D3;\n  border-right-style: none;\n  border-right-width: 1px;\n  border-right-color: #D3D3D3;\n  vertical-align: bottom;\n  padding-top: 5px;\n  padding-bottom: 6px;\n  padding-left: 5px;\n  padding-right: 5px;\n  overflow-x: hidden;\n}\n\n#eaxwndzqjs .gt_column_spanner_outer {\n  color: #333333;\n  background-color: #FFFFFF;\n  font-size: 100%;\n  font-weight: normal;\n  text-transform: inherit;\n  padding-top: 0;\n  padding-bottom: 0;\n  padding-left: 4px;\n  padding-right: 4px;\n}\n\n#eaxwndzqjs .gt_column_spanner_outer:first-child {\n  padding-left: 0;\n}\n\n#eaxwndzqjs .gt_column_spanner_outer:last-child {\n  padding-right: 0;\n}\n\n#eaxwndzqjs .gt_column_spanner {\n  border-bottom-style: solid;\n  border-bottom-width: 2px;\n  border-bottom-color: #D3D3D3;\n  vertical-align: bottom;\n  padding-top: 5px;\n  padding-bottom: 5px;\n  overflow-x: hidden;\n  display: inline-block;\n  width: 100%;\n}\n\n#eaxwndzqjs .gt_group_heading {\n  padding-top: 8px;\n  padding-bottom: 8px;\n  padding-left: 5px;\n  padding-right: 5px;\n  color: #333333;\n  background-color: #FFFFFF;\n  font-size: 100%;\n  font-weight: initial;\n  text-transform: inherit;\n  border-top-style: solid;\n  border-top-width: 2px;\n  border-top-color: #D3D3D3;\n  border-bottom-style: solid;\n  border-bottom-width: 2px;\n  border-bottom-color: #D3D3D3;\n  border-left-style: none;\n  border-left-width: 1px;\n  border-left-color: #D3D3D3;\n  border-right-style: none;\n  border-right-width: 1px;\n  border-right-color: #D3D3D3;\n  vertical-align: middle;\n}\n\n#eaxwndzqjs .gt_empty_group_heading {\n  padding: 0.5px;\n  color: #333333;\n  background-color: #FFFFFF;\n  font-size: 100%;\n  font-weight: initial;\n  border-top-style: solid;\n  border-top-width: 2px;\n  border-top-color: #D3D3D3;\n  border-bottom-style: solid;\n  border-bottom-width: 2px;\n  border-bottom-color: #D3D3D3;\n  vertical-align: middle;\n}\n\n#eaxwndzqjs .gt_from_md > :first-child {\n  margin-top: 0;\n}\n\n#eaxwndzqjs .gt_from_md > :last-child {\n  margin-bottom: 0;\n}\n\n#eaxwndzqjs .gt_row {\n  padding-top: 8px;\n  padding-bottom: 8px;\n  padding-left: 5px;\n  padding-right: 5px;\n  margin: 10px;\n  border-top-style: solid;\n  border-top-width: 1px;\n  border-top-color: #D3D3D3;\n  border-left-style: none;\n  border-left-width: 1px;\n  border-left-color: #D3D3D3;\n  border-right-style: none;\n  border-right-width: 1px;\n  border-right-color: #D3D3D3;\n  vertical-align: middle;\n  overflow-x: hidden;\n}\n\n#eaxwndzqjs .gt_stub {\n  color: #333333;\n  background-color: #FFFFFF;\n  font-size: 100%;\n  font-weight: initial;\n  text-transform: inherit;\n  border-right-style: solid;\n  border-right-width: 2px;\n  border-right-color: #D3D3D3;\n  padding-left: 5px;\n  padding-right: 5px;\n}\n\n#eaxwndzqjs .gt_stub_row_group {\n  color: #333333;\n  background-color: #FFFFFF;\n  font-size: 100%;\n  font-weight: initial;\n  text-transform: inherit;\n  border-right-style: solid;\n  border-right-width: 2px;\n  border-right-color: #D3D3D3;\n  padding-left: 5px;\n  padding-right: 5px;\n  vertical-align: top;\n}\n\n#eaxwndzqjs .gt_row_group_first td {\n  border-top-width: 2px;\n}\n\n#eaxwndzqjs .gt_summary_row {\n  color: #333333;\n  background-color: #FFFFFF;\n  text-transform: inherit;\n  padding-top: 8px;\n  padding-bottom: 8px;\n  padding-left: 5px;\n  padding-right: 5px;\n}\n\n#eaxwndzqjs .gt_first_summary_row {\n  border-top-style: solid;\n  border-top-color: #D3D3D3;\n}\n\n#eaxwndzqjs .gt_first_summary_row.thick {\n  border-top-width: 2px;\n}\n\n#eaxwndzqjs .gt_last_summary_row {\n  padding-top: 8px;\n  padding-bottom: 8px;\n  padding-left: 5px;\n  padding-right: 5px;\n  border-bottom-style: solid;\n  border-bottom-width: 2px;\n  border-bottom-color: #D3D3D3;\n}\n\n#eaxwndzqjs .gt_grand_summary_row {\n  color: #333333;\n  background-color: #FFFFFF;\n  text-transform: inherit;\n  padding-top: 8px;\n  padding-bottom: 8px;\n  padding-left: 5px;\n  padding-right: 5px;\n}\n\n#eaxwndzqjs .gt_first_grand_summary_row {\n  padding-top: 8px;\n  padding-bottom: 8px;\n  padding-left: 5px;\n  padding-right: 5px;\n  border-top-style: double;\n  border-top-width: 6px;\n  border-top-color: #D3D3D3;\n}\n\n#eaxwndzqjs .gt_striped {\n  background-color: rgba(128, 128, 128, 0.05);\n}\n\n#eaxwndzqjs .gt_table_body {\n  border-top-style: solid;\n  border-top-width: 2px;\n  border-top-color: #D3D3D3;\n  border-bottom-style: solid;\n  border-bottom-width: 2px;\n  border-bottom-color: #D3D3D3;\n}\n\n#eaxwndzqjs .gt_footnotes {\n  color: #333333;\n  background-color: #FFFFFF;\n  border-bottom-style: none;\n  border-bottom-width: 2px;\n  border-bottom-color: #D3D3D3;\n  border-left-style: none;\n  border-left-width: 2px;\n  border-left-color: #D3D3D3;\n  border-right-style: none;\n  border-right-width: 2px;\n  border-right-color: #D3D3D3;\n}\n\n#eaxwndzqjs .gt_footnote {\n  margin: 0px;\n  font-size: 90%;\n  padding-left: 4px;\n  padding-right: 4px;\n  padding-left: 5px;\n  padding-right: 5px;\n}\n\n#eaxwndzqjs .gt_sourcenotes {\n  color: #333333;\n  background-color: #FFFFFF;\n  border-bottom-style: none;\n  border-bottom-width: 2px;\n  border-bottom-color: #D3D3D3;\n  border-left-style: none;\n  border-left-width: 2px;\n  border-left-color: #D3D3D3;\n  border-right-style: none;\n  border-right-width: 2px;\n  border-right-color: #D3D3D3;\n}\n\n#eaxwndzqjs .gt_sourcenote {\n  font-size: 90%;\n  padding-top: 4px;\n  padding-bottom: 4px;\n  padding-left: 5px;\n  padding-right: 5px;\n}\n\n#eaxwndzqjs .gt_left {\n  text-align: left;\n}\n\n#eaxwndzqjs .gt_center {\n  text-align: center;\n}\n\n#eaxwndzqjs .gt_right {\n  text-align: right;\n  font-variant-numeric: tabular-nums;\n}\n\n#eaxwndzqjs .gt_font_normal {\n  font-weight: normal;\n}\n\n#eaxwndzqjs .gt_font_bold {\n  font-weight: bold;\n}\n\n#eaxwndzqjs .gt_font_italic {\n  font-style: italic;\n}\n\n#eaxwndzqjs .gt_super {\n  font-size: 65%;\n}\n\n#eaxwndzqjs .gt_two_val_uncert {\n  display: inline-block;\n  line-height: 1em;\n  text-align: right;\n  font-size: 60%;\n  vertical-align: -0.25em;\n  margin-left: 0.1em;\n}\n\n#eaxwndzqjs .gt_footnote_marks {\n  font-style: italic;\n  font-weight: normal;\n  font-size: 75%;\n  vertical-align: 0.4em;\n}\n\n#eaxwndzqjs .gt_asterisk {\n  font-size: 100%;\n  vertical-align: 0;\n}\n\n#eaxwndzqjs .gt_slash_mark {\n  font-size: 0.7em;\n  line-height: 0.7em;\n  vertical-align: 0.15em;\n}\n\n#eaxwndzqjs .gt_fraction_numerator {\n  font-size: 0.6em;\n  line-height: 0.6em;\n  vertical-align: 0.45em;\n}\n\n#eaxwndzqjs .gt_fraction_denominator {\n  font-size: 0.6em;\n  line-height: 0.6em;\n  vertical-align: -0.05em;\n}\n</style>\n<table class=\"gt_table\">\n  \n  <thead class=\"gt_col_headings\">\n    <tr>\n      <th class=\"gt_col_heading gt_columns_bottom_border gt_left\" rowspan=\"1\" colspan=\"1\">Date</th>\n      <th class=\"gt_col_heading gt_columns_bottom_border gt_left\" rowspan=\"1\" colspan=\"1\">Inflation</th>\n      <th class=\"gt_col_heading gt_columns_bottom_border gt_left\" rowspan=\"1\" colspan=\"1\">Coupon Rate</th>\n      <th class=\"gt_col_heading gt_columns_bottom_border gt_left\" rowspan=\"1\" colspan=\"1\">Federal Funds Rate</th>\n      <th class=\"gt_col_heading gt_columns_bottom_border gt_left\" rowspan=\"1\" colspan=\"1\">High Yield Index</th>\n      <th class=\"gt_col_heading gt_columns_bottom_border gt_left\" rowspan=\"1\" colspan=\"1\">High Yield Spread</th>\n      <th class=\"gt_col_heading gt_columns_bottom_border gt_left\" rowspan=\"1\" colspan=\"1\">SP500 Index</th>\n      <th class=\"gt_col_heading gt_columns_bottom_border gt_right\" rowspan=\"1\" colspan=\"1\">Yield to Worst</th>\n    </tr>\n  </thead>\n  <tbody class=\"gt_table_body\">\n    <tr><td class=\"gt_row gt_left\">1997-12-31</td>\n<td class=\"gt_row gt_left\">1.70%</td>\n<td class=\"gt_row gt_left\">8.29%</td>\n<td class=\"gt_row gt_left\">6</td>\n<td class=\"gt_row gt_left\">526.64%</td>\n<td class=\"gt_row gt_left\">3</td>\n<td class=\"gt_row gt_left\">970.43%</td>\n<td class=\"gt_row gt_right\">8.875600</td></tr>\n    <tr><td class=\"gt_row gt_left\">1998-01-01</td>\n<td class=\"gt_row gt_left\">1.70%</td>\n<td class=\"gt_row gt_left\">8.28%</td>\n<td class=\"gt_row gt_left\">6</td>\n<td class=\"gt_row gt_left\">526.96%</td>\n<td class=\"gt_row gt_left\">3</td>\n<td class=\"gt_row gt_left\">972.73%</td>\n<td class=\"gt_row gt_right\">8.872242</td></tr>\n    <tr><td class=\"gt_row gt_left\">1998-01-02</td>\n<td class=\"gt_row gt_left\">1.70%</td>\n<td class=\"gt_row gt_left\">8.28%</td>\n<td class=\"gt_row gt_left\">6</td>\n<td class=\"gt_row gt_left\">527.27%</td>\n<td class=\"gt_row gt_left\">3</td>\n<td class=\"gt_row gt_left\">975.04%</td>\n<td class=\"gt_row gt_right\">8.868884</td></tr>\n    <tr><td class=\"gt_row gt_left\">1998-01-03</td>\n<td class=\"gt_row gt_left\">1.70%</td>\n<td class=\"gt_row gt_left\">8.28%</td>\n<td class=\"gt_row gt_left\">6</td>\n<td class=\"gt_row gt_left\">527.59%</td>\n<td class=\"gt_row gt_left\">3</td>\n<td class=\"gt_row gt_left\">975.72%</td>\n<td class=\"gt_row gt_right\">8.865527</td></tr>\n    <tr><td class=\"gt_row gt_left\">1998-01-04</td>\n<td class=\"gt_row gt_left\">1.70%</td>\n<td class=\"gt_row gt_left\">8.27%</td>\n<td class=\"gt_row gt_left\">6</td>\n<td class=\"gt_row gt_left\">527.90%</td>\n<td class=\"gt_row gt_left\">3</td>\n<td class=\"gt_row gt_left\">976.39%</td>\n<td class=\"gt_row gt_right\">8.862169</td></tr>\n    <tr><td class=\"gt_row gt_left\">1998-01-05</td>\n<td class=\"gt_row gt_left\">1.70%</td>\n<td class=\"gt_row gt_left\">8.27%</td>\n<td class=\"gt_row gt_left\">6</td>\n<td class=\"gt_row gt_left\">528.22%</td>\n<td class=\"gt_row gt_left\">3</td>\n<td class=\"gt_row gt_left\">977.07%</td>\n<td class=\"gt_row gt_right\">8.858811</td></tr>\n  </tbody>\n  \n  \n</table>\n</div>\n```\n:::\n:::\n\n\n### Variable Definitions\n\n|                    |                                                                                                                                                                                                                                     |\n|-------------------------|-----------------------------------------------|\n| SP500 Index        | A stock market index composed of 500 large companies traded on U.S. stock exchanges. Each constituent's weight in the index is proportional to its market capitalization.                                                           |\n| High Yield Index   | A bond index composed of high yield debt - corporate bonds with an investment grade of BB and below.                                                                                                                                |\n| High Yield Spread  | The yield difference between High Yield Debt and U.S. Treasuries (U.S. Government Debt). For specific information on this series and how it is calculated please visit the [FRED](https://fred.stlouisfed.org/series/BAMLH0A0HYM2). |\n| Federal Funds Rate | The rate at which major U.S. banks lend their 'federal funds'/reserve balances to each other overnight. This is generally the rate referred to when people mention 'the interest rate'.                                             |\n| Coupon Rate        | The annual rate of income received by an investor for holding a bond. A bond with a 5% coupon rate and face value of \\$100 will result in annual income receipts of \\$5.                                                            |\n| Yield to Worst     | The lowest possible yield that can be earned by a bond that fully adheres to its contracted terms (perhaps a bond has a callable provision etc.). *This measure does not include default risk*.                                     |\n| Inflation          | The yearly rate of increase in prices.                                                                                                                                                                                              |\n:::\n\n# Performance Comparison\n\nLet's visualize how Equities have performed relative to High Yield Debt:\n\n::: panel-tabset\n### Aggregate\n\n\n::: {.cell .column-page}\n\n```{.r .cell-code}\nhigh_yield_data %>% \n    filter(date >= ymd(\"1984-01-01\")) %>% \n    filter(symbol %in% c(\"hyi\", \"spy\")) %>% \n    group_by(symbol) %>% \n    arrange(date) %>% \n    mutate(value = value / first(value)) %>% \n    ungroup() %>% \n    ggplot(aes(date, value, color = name)) +\n    geom_line() +\n    theme_bw() +\n    labs(\n        color = \"\",\n        y = \"Wealth Index ($1)\",\n        x = \"\"\n    ) +\n    theme(legend.position = \"top\", text = element_text(size = 16))\n```\n\n::: {.cell-output-display}\n![](index_files/figure-html/unnamed-chunk-4-1.png){width=1152}\n:::\n:::\n\n\nWe can see that, since 1984, the performance of Equities relative to High Yield Debt has been roughly comparable, with Equities slightly outperforming. Equities returned approximately 24x and High Yield Debt returned 20x. However, let's see if we can identify the time periods where High Yield Debt outperformed Equities, and why.\n\n### Yearly\n\n\n::: {.cell .column-page layout-align=\"center\" fig.dpi='300'}\n\n```{.r .cell-code}\nyearly_performance_tbl <- high_yield_data %>% \n    filter(symbol %in% c(\"hyi\", \"spy\")) %>% \n    filter(date >= ymd(\"1984-01-01\")) %>% \n    mutate(year = year(date)) %>% \n    group_by(name) %>% \n    arrange(date) %>% \n    ungroup() %>% \n    group_by(name, year) %>% \n    summarize(pct_ret = (last(value) / first(value)) - 1) %>% \n    ungroup()\n\ndates_vec <- yearly_performance_tbl %>% \n    pivot_wider(names_from = name, values_from = pct_ret) %>% \n    mutate(difference = `High Yield Index` - `SP500 Index`) %>% \n    filter(difference > 0) %>% \n    pull(year)\n\nyearly_performance_tbl %>% \n    ggplot() +\n    geom_col(data = yearly_performance_tbl,\n             mapping = aes(year, pct_ret, fill = name),\n             position = \"dodge\", color = \"black\") +\n    geom_rect(\n        data = tibble(start_date = c(dates_vec - .5),\n                      end_date = c(dates_vec + .5)),\n        mapping = aes(xmin = start_date, xmax = end_date, ymin = -Inf, ymax = Inf),\n        alpha = .3, fill = \"grey\") +\n    theme_bw() +\n    scale_fill_brewer(direction = 1) +\n    labs(x = \"\",\n         y = \"Return (%)\",\n         fill = \"\") +\n    scale_y_continuous(labels = scales::percent_format()) +\n    scale_x_continuous(guide = guide_axis(angle = 45), n.breaks = 12) +\n    theme(legend.position = \"top\", text = element_text(face = \"bold\", size = 16))\n```\n\n::: {.cell-output-display}\n![Shaded regions indicate years where High Yield Debt ourperformed Equities](index_files/figure-html/unnamed-chunk-5-1.png){fig-align='center' width=1056}\n:::\n:::\n\n\nFrom the above, we can see there seems to be cyclicality in the performance of High Yield Debt relative to Equities, with alternating 2-4 year periods of outperformance followed by 1-3 year periods of underperformance.\n:::\n\n# Key Takeaways\n\nIn order to better understand the logical cause-and-effect relationships at play between our variables, let's re-visualize our yearly performance comparison, but this time we will add our other relevant variables into the mix and attempt to find helpful trends:\n\n::: panel-tabset\n### Smooth\n\n\n::: {.cell .column-page}\n\n```{.r .cell-code}\ndates_positive_vec <- yearly_performance_tbl %>% \n    pivot_wider(names_from = name, values_from = pct_ret) %>% \n    mutate(difference = `High Yield Index` - `SP500 Index`) %>% \n    filter(`High Yield Index` > 0 & difference > 0) %>% \n    pull(year)\n\nhigh_yield_data %>% \n    ggplot() +\n    geom_rect(\n        data = tibble(start_date = dates_vec, end_date = dates_vec) %>%\n            mutate(start_date = as.Date(paste(start_date, 1, 1, sep = \"-\"))) %>%\n            mutate(end_date = as.Date(paste(start_date, 1, 1, sep = \"-\"))) %>%\n            mutate(end_date = end_date %>% ceiling_date(unit = \"years\") - days(1)),\n        mapping = aes(xmin = start_date, xmax = end_date, ymin = -Inf, ymax = Inf),\n        alpha = .6, fill = \"grey\"\n    ) +\n    geom_rect(\n        data = tibble(start_date = dates_positive_vec, end_date = dates_positive_vec) %>% \n            mutate(start_date = as.Date(paste(start_date, 1, 1, sep = \"-\"))) %>% \n            mutate(end_date = as.Date(paste(start_date, 1, 1, sep = \"-\"))) %>% \n            mutate(end_date = end_date %>% ceiling_date(unit = \"years\") - days(1)),\n        mapping = aes(xmin = start_date, xmax = end_date, ymin = -Inf, ymax = Inf),\n        alpha = .1, fill = \"purple\"\n    ) +\n    geom_smooth(\n        data = high_yield_data %>%\n            filter(date >= ymd(\"1984-01-01\")) %>%\n            filter(!(symbol %in% c(\"hyi\", \"spy\"))) %>%\n            filter(value != 0) %>% \n            mutate(value = value/100),\n        mapping = aes(date, value, color = name), se = F\n        ) +\n    theme_bw() +\n    labs(\n        x = \"\",\n        y = \"\",\n        color = \"\"\n    ) +\n    scale_y_continuous(labels = scales::percent_format()) +\n    scale_x_date(date_breaks = \"3 years\", guide = guide_axis(angle = 45), labels = year) +\n    theme(legend.position = \"top\", text = element_text(face = \"bold\", size = 16))\n```\n\n::: {.cell-output-display}\n![Regions shaded in purple indicate *positive* outperformance](index_files/figure-html/unnamed-chunk-6-1.png){width=1152}\n:::\n:::\n\n\n### Actual\n\n\n::: {.cell .column-page}\n\n```{.r .cell-code}\ng3 <- high_yield_data %>% \n    ggplot() +\n    geom_rect(\n        data = tibble(start_date = dates_vec, end_date = dates_vec) %>% \n            mutate(start_date = as.Date(paste(start_date, 1, 1, sep = \"-\"))) %>% \n            mutate(end_date = as.Date(paste(start_date, 1, 1, sep = \"-\"))) %>% \n            mutate(end_date = end_date %>% ceiling_date(unit = \"years\") - days(1)),\n        mapping = aes(xmin = start_date, xmax = end_date, ymin = -Inf, ymax = Inf),\n        alpha = .6, fill = \"grey\"\n    ) +\n    geom_rect(\n        data = tibble(start_date = dates_positive_vec, end_date = dates_positive_vec) %>% \n            mutate(start_date = as.Date(paste(start_date, 1, 1, sep = \"-\"))) %>% \n            mutate(end_date = as.Date(paste(start_date, 1, 1, sep = \"-\"))) %>% \n            mutate(end_date = end_date %>% ceiling_date(unit = \"years\") - days(1)),\n        mapping = aes(xmin = start_date, xmax = end_date, ymin = -Inf, ymax = Inf),\n        alpha = .1, fill = \"purple\"\n    ) +\n    geom_line(\n        data = high_yield_data %>%\n            filter(date >= ymd(\"1984-01-01\")) %>%\n            filter(!(symbol %in% c(\"hyi\", \"spy\"))) %>%\n            filter(value != 0) %>% \n            mutate(value = value/100),\n        mapping = aes(date, value, color = name),\n        size = .75,\n        ) +\n    theme_bw() +\n    labs(\n        x = \"\",\n        y = \"\",\n        color = \"\"\n    ) +\n    scale_y_continuous(labels = scales::percent_format()) +\n    scale_x_date(date_breaks = \"3 years\", guide = guide_axis(angle = 45), labels = year) +\n    theme(legend.position = \"top\", text = element_text(face = \"bold\", size = 16))\n\ng3\n```\n\n::: {.cell-output-display}\n![Regions shaded in purple indicate *positive* outperformance](index_files/figure-html/unnamed-chunk-7-1.png){width=1152}\n:::\n:::\n\n:::\n\nHere are some primary takeaways from the visuals:\n\n-   Outperformance *generally* occurs when:\n\n    -   'Interest Rates' are falling\n\n    -   Yield Spreads and the YTW are elevated\n\n        -   Especially in relation to the 2-5 years prior\n\n    -   Preceeding periods are associated with economic bubbles\n\n        -   1990 Oil Shock / Recession\n\n        -   2001 Dot Com Bubble\n\n        -   2008 Great Financial Crisis\n\n        -   2022 Covid/Tech Bubble\n\n-   *Positive* outperformance occurs later in the period\n\n# Building a Simple Narrative\n\nObviously, these broad points are interrelated; let's try to build an *extremely simple* narrative that captures these relationships:\n\n::: column-margin\nThis narrative is by no means detailed, nor complete. In, fact it can be superbly incorrect, but that is for the reader to judge.\n:::\n\n*During prolonged periods of strong stock market upswings, especially those wherein current growth exceeds productive growth, market participants bet on good times continuing - typically levering up in the process. This makes complete sense; why finance growth with equity if it is performing so well? Better to issue debt instead... Investors and banks are happy to accept the debt; these companies are performing well (too well). But, just like it's not a good idea to push yourself past physical capacity for extended periods of time, it is not good for a company to grow faster than its economic potential for extended periods of time; eventually something breaks. During this initial period of hurt, both equity holders and debt holders get whacked, valuations drop and the first bankruptcies occur. However, since debt holders get paid first, they get hurt slightly less than equity holders. Now, we are at a critical point in time... investors start to panic and make some back of the napkin calculations... and conclude that at current rates, debt is no longer a profitable investment, so they demand higher yields. Notice that YTW and High Yield Spreads briefly shoot up during these periods (1990, 2001, 2008...). However, the market seems to systematically underestimate two important things: 1) the Federal Reserve's willingness to supply the proverbial medicine by lowering interest rates and 2) the associated aid from lower interest rates. We can notice from our graph that, after the tough first year where both asset classes perform badly, the Fed steps in and stimulates the economy by lowering the cost of borrowing (... we also notice that yields will quickly follow suit). Naturally, companies are now able to negotiate better deals on borrowing money, so they take on more debt at a lower rate and use it to service their older, more expensive debt. Obviously, these companies are kicking the can down the road, and we can see that problems will occur when the Fed can no longer lower interest rates, but for now, this narrative sort of makes sense. Notice the prolonged periods of High Yield's outperformance occur approximately a year after the initial crash (1990, 2001, 2008) for 2-4 years because investors were able to invest when yields were at their peak, and the Fed stimulated the economy shortly thereafter. Now, we flip back to the origin of the story... High Yield Debt is starting to see a prolonged period of strong performance... things seem less risky and therefore yields decline and the pendulum starts to swing in favor of equities again...*\n\n### A Note from OpenAI\n\nWhen tasked with the following - *\"Identify time periods where High Yield Debt outperformed Equities. Give a hypothesis for why it outperforms during periods of high inflation and economic downturns.\"* - OpenAI's model gave the following answer:\n\n> \"High Yield Debt has historically outperformed Equities during periods of economic downturns, such as the 2008 Financial Crisis and the 2020 Coronavirus pandemic. Additionally, High Yield Debt has outperformed Equities during periods of rising inflation, such as the 1970s and 1980s.\n>\n> The reason why High Yield Debt outperforms Equities during periods of high inflation and economic downturns is because it offers a higher yield than Equities, which can help to offset the effects of inflation and provide a more stable return in a volatile market. Additionally, High Yield Debt is generally less volatile than Equities, making it a more attractive investment during periods of economic uncertainty. Finally, High Yield Debt is typically less sensitive to changes in interest rates, which can be beneficial during periods of rising inflation.\"\n>\n> *- OpenAI*\n\n# Going Back Even Further\n\nWhile we don't have data on a High Yield Bond Index, its Yield Spread, YTW, and Coupon Rate, before 1984, Aswath Damadoran, a professor at NYU known for gathering and sharing financial data, published the following helpful dataset:\n\n\n::: {.cell}\n\n```{.r .cell-code}\nread_excel(here(\"raw_data\", \"High Yield Analysis\", \"damadoran_return_data.xlsx\")) %>% \n    select(-Inflation) %>% \n    head() %>% \n    gt() %>% \n    gt::tab_header(title = \"Yearly Real Returns\") %>% \n    gt::fmt_percent(-year) %>% \n    gt::tab_footnote(footnote = \"All returns are stated in real terms (i.e. adjusted for inflation)\")\n```\n\n::: {.cell-output-display}\n```{=html}\n<div id=\"xrsbrqbnnh\" style=\"overflow-x:auto;overflow-y:auto;width:auto;height:auto;\">\n<style>html {\n  font-family: -apple-system, BlinkMacSystemFont, 'Segoe UI', Roboto, Oxygen, Ubuntu, Cantarell, 'Helvetica Neue', 'Fira Sans', 'Droid Sans', Arial, sans-serif;\n}\n\n#xrsbrqbnnh .gt_table {\n  display: table;\n  border-collapse: collapse;\n  margin-left: auto;\n  margin-right: auto;\n  color: #333333;\n  font-size: 16px;\n  font-weight: normal;\n  font-style: normal;\n  background-color: #FFFFFF;\n  width: auto;\n  border-top-style: solid;\n  border-top-width: 2px;\n  border-top-color: #A8A8A8;\n  border-right-style: none;\n  border-right-width: 2px;\n  border-right-color: #D3D3D3;\n  border-bottom-style: solid;\n  border-bottom-width: 2px;\n  border-bottom-color: #A8A8A8;\n  border-left-style: none;\n  border-left-width: 2px;\n  border-left-color: #D3D3D3;\n}\n\n#xrsbrqbnnh .gt_heading {\n  background-color: #FFFFFF;\n  text-align: center;\n  border-bottom-color: #FFFFFF;\n  border-left-style: none;\n  border-left-width: 1px;\n  border-left-color: #D3D3D3;\n  border-right-style: none;\n  border-right-width: 1px;\n  border-right-color: #D3D3D3;\n}\n\n#xrsbrqbnnh .gt_title {\n  color: #333333;\n  font-size: 125%;\n  font-weight: initial;\n  padding-top: 4px;\n  padding-bottom: 4px;\n  padding-left: 5px;\n  padding-right: 5px;\n  border-bottom-color: #FFFFFF;\n  border-bottom-width: 0;\n}\n\n#xrsbrqbnnh .gt_subtitle {\n  color: #333333;\n  font-size: 85%;\n  font-weight: initial;\n  padding-top: 0;\n  padding-bottom: 6px;\n  padding-left: 5px;\n  padding-right: 5px;\n  border-top-color: #FFFFFF;\n  border-top-width: 0;\n}\n\n#xrsbrqbnnh .gt_bottom_border {\n  border-bottom-style: solid;\n  border-bottom-width: 2px;\n  border-bottom-color: #D3D3D3;\n}\n\n#xrsbrqbnnh .gt_col_headings {\n  border-top-style: solid;\n  border-top-width: 2px;\n  border-top-color: #D3D3D3;\n  border-bottom-style: solid;\n  border-bottom-width: 2px;\n  border-bottom-color: #D3D3D3;\n  border-left-style: none;\n  border-left-width: 1px;\n  border-left-color: #D3D3D3;\n  border-right-style: none;\n  border-right-width: 1px;\n  border-right-color: #D3D3D3;\n}\n\n#xrsbrqbnnh .gt_col_heading {\n  color: #333333;\n  background-color: #FFFFFF;\n  font-size: 100%;\n  font-weight: normal;\n  text-transform: inherit;\n  border-left-style: none;\n  border-left-width: 1px;\n  border-left-color: #D3D3D3;\n  border-right-style: none;\n  border-right-width: 1px;\n  border-right-color: #D3D3D3;\n  vertical-align: bottom;\n  padding-top: 5px;\n  padding-bottom: 6px;\n  padding-left: 5px;\n  padding-right: 5px;\n  overflow-x: hidden;\n}\n\n#xrsbrqbnnh .gt_column_spanner_outer {\n  color: #333333;\n  background-color: #FFFFFF;\n  font-size: 100%;\n  font-weight: normal;\n  text-transform: inherit;\n  padding-top: 0;\n  padding-bottom: 0;\n  padding-left: 4px;\n  padding-right: 4px;\n}\n\n#xrsbrqbnnh .gt_column_spanner_outer:first-child {\n  padding-left: 0;\n}\n\n#xrsbrqbnnh .gt_column_spanner_outer:last-child {\n  padding-right: 0;\n}\n\n#xrsbrqbnnh .gt_column_spanner {\n  border-bottom-style: solid;\n  border-bottom-width: 2px;\n  border-bottom-color: #D3D3D3;\n  vertical-align: bottom;\n  padding-top: 5px;\n  padding-bottom: 5px;\n  overflow-x: hidden;\n  display: inline-block;\n  width: 100%;\n}\n\n#xrsbrqbnnh .gt_group_heading {\n  padding-top: 8px;\n  padding-bottom: 8px;\n  padding-left: 5px;\n  padding-right: 5px;\n  color: #333333;\n  background-color: #FFFFFF;\n  font-size: 100%;\n  font-weight: initial;\n  text-transform: inherit;\n  border-top-style: solid;\n  border-top-width: 2px;\n  border-top-color: #D3D3D3;\n  border-bottom-style: solid;\n  border-bottom-width: 2px;\n  border-bottom-color: #D3D3D3;\n  border-left-style: none;\n  border-left-width: 1px;\n  border-left-color: #D3D3D3;\n  border-right-style: none;\n  border-right-width: 1px;\n  border-right-color: #D3D3D3;\n  vertical-align: middle;\n}\n\n#xrsbrqbnnh .gt_empty_group_heading {\n  padding: 0.5px;\n  color: #333333;\n  background-color: #FFFFFF;\n  font-size: 100%;\n  font-weight: initial;\n  border-top-style: solid;\n  border-top-width: 2px;\n  border-top-color: #D3D3D3;\n  border-bottom-style: solid;\n  border-bottom-width: 2px;\n  border-bottom-color: #D3D3D3;\n  vertical-align: middle;\n}\n\n#xrsbrqbnnh .gt_from_md > :first-child {\n  margin-top: 0;\n}\n\n#xrsbrqbnnh .gt_from_md > :last-child {\n  margin-bottom: 0;\n}\n\n#xrsbrqbnnh .gt_row {\n  padding-top: 8px;\n  padding-bottom: 8px;\n  padding-left: 5px;\n  padding-right: 5px;\n  margin: 10px;\n  border-top-style: solid;\n  border-top-width: 1px;\n  border-top-color: #D3D3D3;\n  border-left-style: none;\n  border-left-width: 1px;\n  border-left-color: #D3D3D3;\n  border-right-style: none;\n  border-right-width: 1px;\n  border-right-color: #D3D3D3;\n  vertical-align: middle;\n  overflow-x: hidden;\n}\n\n#xrsbrqbnnh .gt_stub {\n  color: #333333;\n  background-color: #FFFFFF;\n  font-size: 100%;\n  font-weight: initial;\n  text-transform: inherit;\n  border-right-style: solid;\n  border-right-width: 2px;\n  border-right-color: #D3D3D3;\n  padding-left: 5px;\n  padding-right: 5px;\n}\n\n#xrsbrqbnnh .gt_stub_row_group {\n  color: #333333;\n  background-color: #FFFFFF;\n  font-size: 100%;\n  font-weight: initial;\n  text-transform: inherit;\n  border-right-style: solid;\n  border-right-width: 2px;\n  border-right-color: #D3D3D3;\n  padding-left: 5px;\n  padding-right: 5px;\n  vertical-align: top;\n}\n\n#xrsbrqbnnh .gt_row_group_first td {\n  border-top-width: 2px;\n}\n\n#xrsbrqbnnh .gt_summary_row {\n  color: #333333;\n  background-color: #FFFFFF;\n  text-transform: inherit;\n  padding-top: 8px;\n  padding-bottom: 8px;\n  padding-left: 5px;\n  padding-right: 5px;\n}\n\n#xrsbrqbnnh .gt_first_summary_row {\n  border-top-style: solid;\n  border-top-color: #D3D3D3;\n}\n\n#xrsbrqbnnh .gt_first_summary_row.thick {\n  border-top-width: 2px;\n}\n\n#xrsbrqbnnh .gt_last_summary_row {\n  padding-top: 8px;\n  padding-bottom: 8px;\n  padding-left: 5px;\n  padding-right: 5px;\n  border-bottom-style: solid;\n  border-bottom-width: 2px;\n  border-bottom-color: #D3D3D3;\n}\n\n#xrsbrqbnnh .gt_grand_summary_row {\n  color: #333333;\n  background-color: #FFFFFF;\n  text-transform: inherit;\n  padding-top: 8px;\n  padding-bottom: 8px;\n  padding-left: 5px;\n  padding-right: 5px;\n}\n\n#xrsbrqbnnh .gt_first_grand_summary_row {\n  padding-top: 8px;\n  padding-bottom: 8px;\n  padding-left: 5px;\n  padding-right: 5px;\n  border-top-style: double;\n  border-top-width: 6px;\n  border-top-color: #D3D3D3;\n}\n\n#xrsbrqbnnh .gt_striped {\n  background-color: rgba(128, 128, 128, 0.05);\n}\n\n#xrsbrqbnnh .gt_table_body {\n  border-top-style: solid;\n  border-top-width: 2px;\n  border-top-color: #D3D3D3;\n  border-bottom-style: solid;\n  border-bottom-width: 2px;\n  border-bottom-color: #D3D3D3;\n}\n\n#xrsbrqbnnh .gt_footnotes {\n  color: #333333;\n  background-color: #FFFFFF;\n  border-bottom-style: none;\n  border-bottom-width: 2px;\n  border-bottom-color: #D3D3D3;\n  border-left-style: none;\n  border-left-width: 2px;\n  border-left-color: #D3D3D3;\n  border-right-style: none;\n  border-right-width: 2px;\n  border-right-color: #D3D3D3;\n}\n\n#xrsbrqbnnh .gt_footnote {\n  margin: 0px;\n  font-size: 90%;\n  padding-left: 4px;\n  padding-right: 4px;\n  padding-left: 5px;\n  padding-right: 5px;\n}\n\n#xrsbrqbnnh .gt_sourcenotes {\n  color: #333333;\n  background-color: #FFFFFF;\n  border-bottom-style: none;\n  border-bottom-width: 2px;\n  border-bottom-color: #D3D3D3;\n  border-left-style: none;\n  border-left-width: 2px;\n  border-left-color: #D3D3D3;\n  border-right-style: none;\n  border-right-width: 2px;\n  border-right-color: #D3D3D3;\n}\n\n#xrsbrqbnnh .gt_sourcenote {\n  font-size: 90%;\n  padding-top: 4px;\n  padding-bottom: 4px;\n  padding-left: 5px;\n  padding-right: 5px;\n}\n\n#xrsbrqbnnh .gt_left {\n  text-align: left;\n}\n\n#xrsbrqbnnh .gt_center {\n  text-align: center;\n}\n\n#xrsbrqbnnh .gt_right {\n  text-align: right;\n  font-variant-numeric: tabular-nums;\n}\n\n#xrsbrqbnnh .gt_font_normal {\n  font-weight: normal;\n}\n\n#xrsbrqbnnh .gt_font_bold {\n  font-weight: bold;\n}\n\n#xrsbrqbnnh .gt_font_italic {\n  font-style: italic;\n}\n\n#xrsbrqbnnh .gt_super {\n  font-size: 65%;\n}\n\n#xrsbrqbnnh .gt_two_val_uncert {\n  display: inline-block;\n  line-height: 1em;\n  text-align: right;\n  font-size: 60%;\n  vertical-align: -0.25em;\n  margin-left: 0.1em;\n}\n\n#xrsbrqbnnh .gt_footnote_marks {\n  font-style: italic;\n  font-weight: normal;\n  font-size: 75%;\n  vertical-align: 0.4em;\n}\n\n#xrsbrqbnnh .gt_asterisk {\n  font-size: 100%;\n  vertical-align: 0;\n}\n\n#xrsbrqbnnh .gt_slash_mark {\n  font-size: 0.7em;\n  line-height: 0.7em;\n  vertical-align: 0.15em;\n}\n\n#xrsbrqbnnh .gt_fraction_numerator {\n  font-size: 0.6em;\n  line-height: 0.6em;\n  vertical-align: 0.45em;\n}\n\n#xrsbrqbnnh .gt_fraction_denominator {\n  font-size: 0.6em;\n  line-height: 0.6em;\n  vertical-align: -0.05em;\n}\n</style>\n<table class=\"gt_table\">\n  <thead class=\"gt_header\">\n    <tr>\n      <th colspan=\"6\" class=\"gt_heading gt_title gt_font_normal gt_bottom_border\" style>Yearly Real Returns</th>\n    </tr>\n    \n  </thead>\n  <thead class=\"gt_col_headings\">\n    <tr>\n      <th class=\"gt_col_heading gt_columns_bottom_border gt_right\" rowspan=\"1\" colspan=\"1\">year</th>\n      <th class=\"gt_col_heading gt_columns_bottom_border gt_right\" rowspan=\"1\" colspan=\"1\">SP500</th>\n      <th class=\"gt_col_heading gt_columns_bottom_border gt_right\" rowspan=\"1\" colspan=\"1\">3 Month Treasury Bill</th>\n      <th class=\"gt_col_heading gt_columns_bottom_border gt_right\" rowspan=\"1\" colspan=\"1\">10 Year Treasury Bond</th>\n      <th class=\"gt_col_heading gt_columns_bottom_border gt_right\" rowspan=\"1\" colspan=\"1\">Baa Corporate Bonds</th>\n      <th class=\"gt_col_heading gt_columns_bottom_border gt_right\" rowspan=\"1\" colspan=\"1\">Real Estate</th>\n    </tr>\n  </thead>\n  <tbody class=\"gt_table_body\">\n    <tr><td class=\"gt_row gt_right\">1928</td>\n<td class=\"gt_row gt_right\">45.49%</td>\n<td class=\"gt_row gt_right\">4.29%</td>\n<td class=\"gt_row gt_right\">2.01%</td>\n<td class=\"gt_row gt_right\">4.43%</td>\n<td class=\"gt_row gt_right\">2.68%</td></tr>\n    <tr><td class=\"gt_row gt_right\">1929</td>\n<td class=\"gt_row gt_right\">&minus;8.83%</td>\n<td class=\"gt_row gt_right\">2.56%</td>\n<td class=\"gt_row gt_right\">3.60%</td>\n<td class=\"gt_row gt_right\">2.42%</td>\n<td class=\"gt_row gt_right\">&minus;2.63%</td></tr>\n    <tr><td class=\"gt_row gt_right\">1930</td>\n<td class=\"gt_row gt_right\">&minus;20.01%</td>\n<td class=\"gt_row gt_right\">11.69%</td>\n<td class=\"gt_row gt_right\">11.68%</td>\n<td class=\"gt_row gt_right\">7.41%</td>\n<td class=\"gt_row gt_right\">2.24%</td></tr>\n    <tr><td class=\"gt_row gt_right\">1931</td>\n<td class=\"gt_row gt_right\">&minus;38.07%</td>\n<td class=\"gt_row gt_right\">12.82%</td>\n<td class=\"gt_row gt_right\">7.45%</td>\n<td class=\"gt_row gt_right\">&minus;7.02%</td>\n<td class=\"gt_row gt_right\">1.29%</td></tr>\n    <tr><td class=\"gt_row gt_right\">1932</td>\n<td class=\"gt_row gt_right\">1.82%</td>\n<td class=\"gt_row gt_right\">12.64%</td>\n<td class=\"gt_row gt_right\">21.25%</td>\n<td class=\"gt_row gt_right\">37.74%</td>\n<td class=\"gt_row gt_right\">&minus;0.21%</td></tr>\n    <tr><td class=\"gt_row gt_right\">1933</td>\n<td class=\"gt_row gt_right\">48.85%</td>\n<td class=\"gt_row gt_right\">0.20%</td>\n<td class=\"gt_row gt_right\">1.08%</td>\n<td class=\"gt_row gt_right\">12.11%</td>\n<td class=\"gt_row gt_right\">&minus;4.54%</td></tr>\n  </tbody>\n  \n  <tfoot class=\"gt_footnotes\">\n    <tr>\n      <td class=\"gt_footnote\" colspan=\"6\"> All returns are stated in real terms (i.e. adjusted for inflation)</td>\n    </tr>\n  </tfoot>\n</table>\n</div>\n```\n:::\n:::\n\n\nLet's treat Baa Corporate Bonds as a proxy for 'High Yield' Debt and visualize its performance relative to the SP500 since 1928.\n\n\n::: {.cell .column-page}\n\n```{.r .cell-code}\ndates_vec <- damadoran_data %>% \n    filter(name %in% c(\"Baa Corporate Bonds\", \"SP500\")) %>% \n    filter(date %>% between(ymd(\"1928-01-01\"), ymd(\"1984-01-01\"))) %>% \n    pivot_wider(names_from = name, values_from = value) %>% \n    mutate(difference = `Baa Corporate Bonds` - SP500) %>% \n    filter(difference >= 0) %>% \n    pull(date)\n\ndates_positive_vec <- damadoran_data %>% \n    filter(name %in% c(\"Baa Corporate Bonds\", \"SP500\")) %>% \n    filter(date %>% between(ymd(\"1928-01-01\"), ymd(\"1984-01-01\"))) %>% \n    pivot_wider(names_from = name, values_from = value) %>% \n    mutate(difference = `Baa Corporate Bonds` - SP500) %>% \n    filter(difference >= 0) %>% \n    filter(`Baa Corporate Bonds` > 0) %>% \n    pull(date)\n\ndamadoran_data %>% \n    filter(name %in% c(\"Baa Corporate Bonds\", \"SP500\")) %>% \n    filter(date %>% between(ymd(\"1928-01-01\"), ymd(\"1984-01-01\"))) %>% \n    ggplot() +\n    geom_rect(\n        data = tibble(start_date = dates_vec, end_date = dates_vec) %>% \n            mutate(end_date = end_date + years(1)),\n        mapping = aes(xmin = start_date, xmax = end_date, ymin = -Inf, ymax = Inf),\n        fill = \"grey\", alpha = .6\n    ) +\n    geom_rect(\n        data = tibble(start_date = dates_positive_vec, end_date = dates_positive_vec) %>% \n            mutate(end_date = end_date + years(1)),\n        mapping = aes(xmin = start_date, xmax = end_date, ymin = -Inf, ymax = Inf),\n        fill = \"purple\", alpha = .15\n    ) +\n    geom_col(aes(date, value, fill = name), position = \"dodge\") +\n    theme_bw() +\n    theme(legend.position = \"top\", text = element_text(size = 16)) +\n    labs(y=\"\",x=\"\",fill=\"\") +\n    scale_y_continuous(labels = scales::percent_format(), n.breaks = 12) +\n    scale_x_date(date_breaks = \"3 years\", guide = guide_axis(angle = 45), labels = year)\n```\n\n::: {.cell-output-display}\n![](index_files/figure-html/unnamed-chunk-9-1.png){width=1152}\n:::\n:::\n\n\nThe above chart, while limited in its usefulness, provides us with some possible amendments to our key takeaways:\n\n1.  Our observation that *positive* outperformance occurs later in the outperformance period does not seem to hold well during the 1929-1934 & 1940-1943 time-frames.\n\n2.  There appears to be marginally less cyclicality in outperformance.\n\n3.  Most importantly, the above solidifies our claim that High Yield Outperforms during periods associated with financial bubbles (1929, 1940, etc.).\n\n# Applying the Key Takeaways and Narrative\n\nLet's attempt to codify our narrative and key takeaways, so that we can isolate periods of strong High Yield Debt returns (and hopefully identify future ones as well). I will tell the computer to go through the data and highlight a region *if*:\n\n-   the current YTW is 30% greater than its 3 Year Moving Average w/ a 2-year lag\n\n-   the current Yield Spread is 75% greater than its 3 Year Moving Average w/ a 2-year lag\n\n-   the current Federal Funds Rate is 33% lower than its 3 Year Moving Average w/ a 2-year lag\n\nHere is the resulting plot:\n\n\n::: {.cell .column-page}\n\n```{.r .cell-code}\nytw_signal_dates_vec <- high_yield_data %>%\n    filter(symbol == \"ytw\") %>%\n    arrange(date) %>%\n    filter(value != 0) %>%\n    mutate(roll_mean_3yr_lag2 = slidify_vec(\n        .x = lag(value, n = 8),\n        .f = mean,\n        na.rm = T,\n        .period = 12,\n        .align = c(\"right\")\n    )) %>% \n    drop_na() %>% \n    filter(value > 1.3 * roll_mean_3yr_lag2) %>% \n    pull(date)\n\nhys_signal_dates_vec <- high_yield_data %>%\n    filter(symbol == \"hys\") %>%\n    arrange(date) %>%\n    filter(value != 0) %>%\n    mutate(roll_mean_3yr_lag2 = slidify_vec(\n        .x = lag(value, n = 365 * 2),\n        .f = mean,\n        na.rm = T,\n        .period = 365 * 3,\n        .align = c(\"right\")\n    )) %>% \n    drop_na() %>% \n    filter(value > 1.75 * roll_mean_3yr_lag2) %>% \n    pull(date)\n\nffr_signal_dates_vec <- high_yield_data %>%\n    filter(symbol == \"ffr\") %>%\n    arrange(date) %>%\n    filter(value != 0) %>%\n    filter(date >= ymd(\"1984-01-01\")) %>% \n    mutate(roll_mean_3yr_lag2 = slidify_vec(\n        .x = lag(value, n = 12*2),\n        .f = mean,\n        na.rm = T,\n        .period = 12*3,\n        .align = c(\"right\")\n    )) %>% \n    drop_na() %>% \n    filter(value < .67 * roll_mean_3yr_lag2) %>% \n    pull(date)\n\ng1 <- tibble(\n    start_date = ytw_signal_dates_vec,\n    end_date = ceiling_date(ytw_signal_dates_vec, unit = \"months\") + months(3) - days(1),\n    type = \"Yield to Worst\"\n) %>% \n    bind_rows(\n        tibble(\n            start_date = hys_signal_dates_vec,\n            end_date = hys_signal_dates_vec + days(1),\n            type = \"High Yield Spread\"\n        )\n    ) %>% \n    bind_rows(\n        tibble(\n            start_date = ffr_signal_dates_vec,\n            end_date = ffr_signal_dates_vec + months(1),\n            type = \"Fed Funds Rate\"\n        )\n    ) %>% \n    ggplot(aes(xmin = start_date, xmax = end_date, ymin = -1, ymax = 1, fill = type)) +\n    geom_rect(alpha = .9) +\n    theme_bw() +\n    theme(legend.position = \"top\", text = element_text(face = \"bold\", size = 16)) +\n    labs(\n        fill = \"\"\n    ) +\n    scale_y_continuous(breaks = NULL) +\n    scale_x_date(date_breaks = \"3 years\", labels = year, guide = guide_axis(angle = 45)) +\n    scale_fill_brewer() +\n    coord_cartesian(xlim = c(ymd(\"1988-01-01\", ymd(\"2023-01-01\"))))\n\ng2 <- tibble(\n    start_date = ytw_signal_dates_vec,\n    end_date = ceiling_date(ytw_signal_dates_vec, unit = \"months\") + months(3) - days(1),\n    type = \"Yield to Worst\"\n) %>% \n    bind_rows(\n        tibble(\n            start_date = hys_signal_dates_vec,\n            end_date = hys_signal_dates_vec + days(1),\n            type = \"High Yield Spread\"\n        )\n    ) %>% \n    ggplot(aes(xmin = start_date, xmax = end_date, ymin = -1, ymax = 1, fill = type)) +\n    geom_rect(alpha = .9) +\n    theme_bw() +\n    theme(legend.position = \"top\", text = element_text(face = \"bold\", size = 16)) +\n    labs(\n        fill = \"\"\n    ) +\n    scale_y_continuous(breaks = NULL) +\n    scale_x_date(date_breaks = \"3 years\", labels = year, guide = guide_axis(angle = 45)) +\n    coord_cartesian(xlim = c(ymd(\"1988-01-01\", ymd(\"2023-01-01\"))))\n\ng3 <- g3 +\n    coord_cartesian(xlim = c(ymd(\"1988-01-01\", ymd(\"2023-01-01\"))))\n\ncowplot::plot_grid(g1, g2, g3, ncol = 1, align = \"hv\")\n```\n\n::: {.cell-output-display}\n![Plot 2 is the same as Plot 1, but Fed Funds Rate is removed. Plot 3 is being re-provided for ease of comparison.](index_files/figure-html/unnamed-chunk-10-1.png){width=1152}\n:::\n:::\n\n\nAs we can see, these 3 simple metrics, especially the YTW metric, provide a decent signal for periods of strong High Yield Debt returns. And while these metrics have been created with a knowledge of the past, they certainly corroborate the simple narrative we created above. Possible next steps include applying these signals to other developed markets while being mindful of their current position in their interest rate cycle, improving these signals, and assessing hypothetical performance, etc... I leave these as exercises to the reader...\n\n# The Future: Where are we heading?\n\nIn our above research, one of our key takeaways involved the Federal Funds Rate (i.e. the 'interest' rate). This should be self-evident as interest rates measure the cost of borrowing money and are therefore the primary drivers of the economy and financial markets. We noted that during periods of economic hurt (typically after some sort of 'bubble') the Fed would lower rates and kick the can down the road. However, we have now reached that special point in time wherein interest rates can no longer be lowered. Instead, the Fed has been forced to aggressively raise rates, subsequently popping the Tech bubble. This makes for an interesting investment environment going forward. We have noted that High Yield Debt performs better during these reactionary declining interest rate environments, and equities during the post-recovery 'rising' rate environment. However, in spite of all this, my outlook for equities is still slightly more pessimistic. Instead, I think that High Yield Debt is likely to outperform over the next 2 years, followed by Equities picking back up...\n\n# Final Remarks\n\n*The above is intended as an exploration of historical data, and all statements and opinions are expressly my own; neither should be construed as investment advice. Feel free to reach out at maxsands700\\@gmail.com with questions and comments... Cheers :)*\n",
    "supporting": [
      "index_files"
    ],
    "filters": [
      "rmarkdown/pagebreak.lua"
    ],
    "includes": {},
    "engineDependencies": {},
    "preserve": {},
    "postProcess": true
  }
}