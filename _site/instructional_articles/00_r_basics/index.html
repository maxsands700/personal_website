<!DOCTYPE html>
<html xmlns="http://www.w3.org/1999/xhtml" lang="en" xml:lang="en"><head>

<meta charset="utf-8">
<meta name="generator" content="quarto-1.2.269">

<meta name="viewport" content="width=device-width, initial-scale=1.0, user-scalable=yes">

<meta name="author" content="Max Sands">
<meta name="dcterms.date" content="2022-11-23">
<meta name="description" content="Application-based Learning">

<title>R in 5 Minutes</title>
<style>
code{white-space: pre-wrap;}
span.smallcaps{font-variant: small-caps;}
div.columns{display: flex; gap: min(4vw, 1.5em);}
div.column{flex: auto; overflow-x: auto;}
div.hanging-indent{margin-left: 1.5em; text-indent: -1.5em;}
ul.task-list{list-style: none;}
ul.task-list li input[type="checkbox"] {
  width: 0.8em;
  margin: 0 0.8em 0.2em -1.6em;
  vertical-align: middle;
}
pre > code.sourceCode { white-space: pre; position: relative; }
pre > code.sourceCode > span { display: inline-block; line-height: 1.25; }
pre > code.sourceCode > span:empty { height: 1.2em; }
.sourceCode { overflow: visible; }
code.sourceCode > span { color: inherit; text-decoration: inherit; }
div.sourceCode { margin: 1em 0; }
pre.sourceCode { margin: 0; }
@media screen {
div.sourceCode { overflow: auto; }
}
@media print {
pre > code.sourceCode { white-space: pre-wrap; }
pre > code.sourceCode > span { text-indent: -5em; padding-left: 5em; }
}
pre.numberSource code
  { counter-reset: source-line 0; }
pre.numberSource code > span
  { position: relative; left: -4em; counter-increment: source-line; }
pre.numberSource code > span > a:first-child::before
  { content: counter(source-line);
    position: relative; left: -1em; text-align: right; vertical-align: baseline;
    border: none; display: inline-block;
    -webkit-touch-callout: none; -webkit-user-select: none;
    -khtml-user-select: none; -moz-user-select: none;
    -ms-user-select: none; user-select: none;
    padding: 0 4px; width: 4em;
    color: #aaaaaa;
  }
pre.numberSource { margin-left: 3em; border-left: 1px solid #aaaaaa;  padding-left: 4px; }
div.sourceCode
  {   }
@media screen {
pre > code.sourceCode > span > a:first-child::before { text-decoration: underline; }
}
code span.al { color: #ff0000; font-weight: bold; } /* Alert */
code span.an { color: #60a0b0; font-weight: bold; font-style: italic; } /* Annotation */
code span.at { color: #7d9029; } /* Attribute */
code span.bn { color: #40a070; } /* BaseN */
code span.bu { color: #008000; } /* BuiltIn */
code span.cf { color: #007020; font-weight: bold; } /* ControlFlow */
code span.ch { color: #4070a0; } /* Char */
code span.cn { color: #880000; } /* Constant */
code span.co { color: #60a0b0; font-style: italic; } /* Comment */
code span.cv { color: #60a0b0; font-weight: bold; font-style: italic; } /* CommentVar */
code span.do { color: #ba2121; font-style: italic; } /* Documentation */
code span.dt { color: #902000; } /* DataType */
code span.dv { color: #40a070; } /* DecVal */
code span.er { color: #ff0000; font-weight: bold; } /* Error */
code span.ex { } /* Extension */
code span.fl { color: #40a070; } /* Float */
code span.fu { color: #06287e; } /* Function */
code span.im { color: #008000; font-weight: bold; } /* Import */
code span.in { color: #60a0b0; font-weight: bold; font-style: italic; } /* Information */
code span.kw { color: #007020; font-weight: bold; } /* Keyword */
code span.op { color: #666666; } /* Operator */
code span.ot { color: #007020; } /* Other */
code span.pp { color: #bc7a00; } /* Preprocessor */
code span.sc { color: #4070a0; } /* SpecialChar */
code span.ss { color: #bb6688; } /* SpecialString */
code span.st { color: #4070a0; } /* String */
code span.va { color: #19177c; } /* Variable */
code span.vs { color: #4070a0; } /* VerbatimString */
code span.wa { color: #60a0b0; font-weight: bold; font-style: italic; } /* Warning */
</style>


<script src="../../site_libs/quarto-nav/quarto-nav.js"></script>
<script src="../../site_libs/quarto-nav/headroom.min.js"></script>
<script src="../../site_libs/clipboard/clipboard.min.js"></script>
<script src="../../site_libs/quarto-search/autocomplete.umd.js"></script>
<script src="../../site_libs/quarto-search/fuse.min.js"></script>
<script src="../../site_libs/quarto-search/quarto-search.js"></script>
<meta name="quarto:offset" content="../../">
<script src="../../site_libs/cookie-consent/cookie-consent.js"></script>
<link href="../../site_libs/cookie-consent/cookie-consent.css" rel="stylesheet">
<script src="../../site_libs/quarto-html/quarto.js"></script>
<script src="../../site_libs/quarto-html/popper.min.js"></script>
<script src="../../site_libs/quarto-html/tippy.umd.min.js"></script>
<script src="../../site_libs/quarto-html/anchor.min.js"></script>
<link href="../../site_libs/quarto-html/tippy.css" rel="stylesheet">
<link href="../../site_libs/quarto-html/quarto-syntax-highlighting.css" rel="stylesheet" id="quarto-text-highlighting-styles">
<script src="../../site_libs/bootstrap/bootstrap.min.js"></script>
<link href="../../site_libs/bootstrap/bootstrap-icons.css" rel="stylesheet">
<link href="../../site_libs/bootstrap/bootstrap.min.css" rel="stylesheet" id="quarto-bootstrap" data-mode="light">
<script id="quarto-search-options" type="application/json">{
  "location": "navbar",
  "copy-button": false,
  "collapse-after": 3,
  "panel-placement": "end",
  "type": "overlay",
  "limit": 20,
  "language": {
    "search-no-results-text": "No results",
    "search-matching-documents-text": "matching documents",
    "search-copy-link-title": "Copy link to search",
    "search-hide-matches-text": "Hide additional matches",
    "search-more-match-text": "more match in this document",
    "search-more-matches-text": "more matches in this document",
    "search-clear-button-title": "Clear",
    "search-detached-cancel-button-title": "Cancel",
    "search-submit-button-title": "Submit"
  }
}</script>
<script async="" src="https://www.googletagmanager.com/gtag/js?id=G-XPQZQZDK95"></script>

<script type="text/plain" cookie-consent="tracking">

window.dataLayer = window.dataLayer || [];
function gtag(){dataLayer.push(arguments);}
gtag('js', new Date());
gtag('config', 'G-XPQZQZDK95', { 'anonymize_ip': true});
</script>

<script type="text/javascript" charset="UTF-8">
document.addEventListener('DOMContentLoaded', function () {
cookieconsent.run({
  "notice_banner_type":"simple",
  "consent_type":"implied",
  "palette":"light",
  "language":"en",
  "page_load_consent_levels":["strictly-necessary","functionality","tracking","targeting"],
  "notice_banner_reject_button_hide":false,
  "preferences_center_close_button_hide":false,
  "website_name":""
  });
});
</script> 
  
<script src="../../site_libs/htmlwidgets-1.5.4/htmlwidgets.js"></script>
<script src="../../site_libs/plotly-binding-4.10.0/plotly.js"></script>
<script src="../../site_libs/typedarray-0.1/typedarray.min.js"></script>
<script src="../../site_libs/jquery-3.5.1/jquery.min.js"></script>
<link href="../../site_libs/crosstalk-1.2.0/css/crosstalk.min.css" rel="stylesheet">
<script src="../../site_libs/crosstalk-1.2.0/js/crosstalk.min.js"></script>
<link href="../../site_libs/plotly-htmlwidgets-css-2.5.1/plotly-htmlwidgets.css" rel="stylesheet">
<script src="../../site_libs/plotly-main-2.5.1/plotly-latest.min.js"></script>


<link rel="stylesheet" href="../../styles.css">
</head>

<body class="nav-fixed">

<div id="quarto-search-results"></div>
  <header id="quarto-header" class="headroom fixed-top">
    <nav class="navbar navbar-expand-lg navbar-dark ">
      <div class="navbar-container container-fluid">
          <button class="navbar-toggler" type="button" data-bs-toggle="collapse" data-bs-target="#navbarCollapse" aria-controls="navbarCollapse" aria-expanded="false" aria-label="Toggle navigation" onclick="if (window.quartoToggleHeadroom) { window.quartoToggleHeadroom(); }">
  <span class="navbar-toggler-icon"></span>
</button>
          <div class="collapse navbar-collapse" id="navbarCollapse">
            <ul class="navbar-nav navbar-nav-scroll me-auto">
  <li class="nav-item">
    <a class="nav-link" href="../../index.html">
 <span class="menu-text">Home</span></a>
  </li>  
  <li class="nav-item">
    <a class="nav-link" href="../../research.html">
 <span class="menu-text">Research</span></a>
  </li>  
  <li class="nav-item">
    <a class="nav-link" href="../../instructional_articles.html">
 <span class="menu-text">Instructional Articles</span></a>
  </li>  
  <li class="nav-item">
    <a class="nav-link" href="../../resume.html">
 <span class="menu-text">Resume</span></a>
  </li>  
</ul>
            <ul class="navbar-nav navbar-nav-scroll ms-auto">
  <li class="nav-item compact">
    <a class="nav-link" href="https://www.instagram.com/max_sands_7/"><i class="bi bi-instagram" role="img">
</i> 
 <span class="menu-text"></span></a>
  </li>  
  <li class="nav-item compact">
    <a class="nav-link" href="https://www.linkedin.com/in/max-sands-1798b41a4/"><i class="bi bi-linkedin" role="img">
</i> 
 <span class="menu-text"></span></a>
  </li>  
</ul>
              <div id="quarto-search" class="" title="Search"></div>
          </div> <!-- /navcollapse -->
      </div> <!-- /container-fluid -->
    </nav>
</header>
<!-- content -->
<header id="title-block-header" class="quarto-title-block default page-columns page-full">
  <div class="quarto-title-banner page-columns page-full">
    <div class="quarto-title column-body">
      <h1 class="title">R in 5 Minutes</h1>
                  <div>
        <div class="description">
          Application-based Learning
        </div>
      </div>
                          <div class="quarto-categories">
                <div class="quarto-category">R</div>
              </div>
                  </div>
  </div>
    
  
  <div class="quarto-title-meta">

      <div>
      <div class="quarto-title-meta-heading">Author</div>
      <div class="quarto-title-meta-contents">
               <p>Max Sands </p>
            </div>
    </div>
      
      <div>
      <div class="quarto-title-meta-heading">Published</div>
      <div class="quarto-title-meta-contents">
        <p class="date">November 23, 2022</p>
      </div>
    </div>
    
      
    </div>
    
  
  </header><div id="quarto-content" class="quarto-container page-columns page-rows-contents page-layout-article page-navbar">
<!-- sidebar -->
<!-- margin-sidebar -->
    <div id="quarto-margin-sidebar" class="sidebar margin-sidebar">
        <nav id="TOC" role="doc-toc" class="toc-active">
    <h2 id="toc-title">On this page</h2>
   
  <ul>
  <li><a href="#intro" id="toc-intro" class="nav-link active" data-scroll-target="#intro">Intro</a></li>
  <li><a href="#learning-r" id="toc-learning-r" class="nav-link" data-scroll-target="#learning-r">Learning R</a>
  <ul class="collapse">
  <li><a href="#the-basics-of-data" id="toc-the-basics-of-data" class="nav-link" data-scroll-target="#the-basics-of-data">The Basics of Data</a>
  <ul class="collapse">
  <li><a href="#tidy-data" id="toc-tidy-data" class="nav-link" data-scroll-target="#tidy-data">Tidy Data</a></li>
  </ul></li>
  <li><a href="#gathering-data" id="toc-gathering-data" class="nav-link" data-scroll-target="#gathering-data">Gathering Data</a></li>
  <li><a href="#manipulating-data" id="toc-manipulating-data" class="nav-link" data-scroll-target="#manipulating-data">Manipulating Data</a>
  <ul class="collapse">
  <li><a href="#filtering" id="toc-filtering" class="nav-link" data-scroll-target="#filtering">Filtering</a></li>
  <li><a href="#summarizing" id="toc-summarizing" class="nav-link" data-scroll-target="#summarizing">Summarizing</a></li>
  <li><a href="#grouping" id="toc-grouping" class="nav-link" data-scroll-target="#grouping">Grouping</a></li>
  <li><a href="#pivoting" id="toc-pivoting" class="nav-link" data-scroll-target="#pivoting">Pivoting</a></li>
  <li><a href="#selecting" id="toc-selecting" class="nav-link" data-scroll-target="#selecting">Selecting</a></li>
  <li><a href="#mutating" id="toc-mutating" class="nav-link" data-scroll-target="#mutating">Mutating</a></li>
  </ul></li>
  <li><a href="#basic-modeling" id="toc-basic-modeling" class="nav-link" data-scroll-target="#basic-modeling">Basic Modeling</a></li>
  <li><a href="#visualizing-data" id="toc-visualizing-data" class="nav-link" data-scroll-target="#visualizing-data">Visualizing Data</a>
  <ul class="collapse">
  <li><a href="#creating-a-canvas" id="toc-creating-a-canvas" class="nav-link" data-scroll-target="#creating-a-canvas">Creating a Canvas</a></li>
  <li><a href="#adding-geoms" id="toc-adding-geoms" class="nav-link" data-scroll-target="#adding-geoms">Adding Geoms</a></li>
  <li><a href="#modifying-geoms" id="toc-modifying-geoms" class="nav-link" data-scroll-target="#modifying-geoms">Modifying Geoms</a></li>
  <li><a href="#adding-aesthetics" id="toc-adding-aesthetics" class="nav-link" data-scroll-target="#adding-aesthetics">Adding Aesthetics</a></li>
  <li><a href="#faceting" id="toc-faceting" class="nav-link" data-scroll-target="#faceting">Faceting</a></li>
  <li><a href="#adding-labels" id="toc-adding-labels" class="nav-link" data-scroll-target="#adding-labels">Adding Labels</a></li>
  <li><a href="#changing-theme" id="toc-changing-theme" class="nav-link" data-scroll-target="#changing-theme">Changing Theme</a></li>
  <li><a href="#modifying-scales" id="toc-modifying-scales" class="nav-link" data-scroll-target="#modifying-scales">Modifying Scales</a></li>
  <li><a href="#example-of-more-plots" id="toc-example-of-more-plots" class="nav-link" data-scroll-target="#example-of-more-plots">Example of More Plots</a></li>
  <li><a href="#creating-interactive-plots" id="toc-creating-interactive-plots" class="nav-link" data-scroll-target="#creating-interactive-plots">Creating Interactive Plots</a></li>
  </ul></li>
  </ul></li>
  <li><a href="#closing-remarks" id="toc-closing-remarks" class="nav-link" data-scroll-target="#closing-remarks">Closing Remarks</a></li>
  </ul>
</nav>
    </div>
<!-- main -->
<main class="content quarto-banner-title-block" id="quarto-document-content">




<section id="intro" class="level1">
<h1>Intro</h1>
<p>The purpose of this article is 3-fold:</p>
<ol type="1">
<li><p>to demonstrate the basics of R as concisely as possible so that you can get up and running on your own projects, even if you’ve had no exposure to coding.</p></li>
<li><p>to act as a basic guide for the non-technical readers interested in following my Research Articles at a more granular level.</p></li>
<li><p>to familiarize myself with the process of writing and explaining topics before I publish my research (and to make sure that my website is working…)</p></li>
</ol>
<section id="quick-note" class="level5">
<h5 class="anchored" data-anchor-id="quick-note">Quick Note</h5>
<p>I would quickly like to explain my background and why I think it is important to have a basic knowledge of ‘coding’:</p>
<p>I am a Business &amp; Investment Analyst, and 9 months ago I had absolutely no knowledge of ‘coding’; my technical ability was comparable to that of your average dog. I can now tell you 9 months in that understanding the basics of ‘coding’ goes a <em>very</em> long way.</p>
<p>Firstly, as long as you do a task correctly the first time in code, you can then automate away that task (and its different variations). Whether its performing the same calculations in an Excel file that your boss sends you every morning, or publishing your company’s quarterly financial statements, the same principle applies.</p>
<p>Secondly, we are living in a world where data is everywhere, and the ability to code allows one to dig into the data and draw valuable insights from it. For anyone in an analytical position (whether Financial Analyst, Medical Researcher, or CEO), this is extremely important and allows you to stand on the shoulders of giants.</p>
<p>Thirdly, you can leverage tools that others have built. There is so much free code on the web and someone else may have already built a tool or completed a task that you are trying to do. This is extremely helpful.</p>
<p>Lastly, a word of caution: <em>coding is not everything</em>. You can be the world’s greatest coder, but if you lack the ability to build a logical, easily-explainable narrative from data, then your value is limited to the tools that you can build for others. In other words, true value comes from the ability to not only work with data, but also derive meaning from it and think originally.</p>
<p>Ok, that’s all; let’s get into it!</p>
</section>
</section>
<section id="learning-r" class="level1">
<h1>Learning R</h1>
<p>Before you can use R, you need to install it along with RStudio on your computer. Next, run <code>install.packages("tidyverse")</code>. The tidyverse is an R package that someone created which makes working with data easy.</p>
<p>Next, we need to load this package by running <code>library(tidyverse)</code>.</p>
<div class="cell">
<details>
<summary>Code</summary>
<div class="sourceCode cell-code" id="cb1"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb1-1"><a href="#cb1-1" aria-hidden="true" tabindex="-1"></a><span class="fu">library</span>(tidyverse)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</details>
</div>
<p>You are all set - now we can begin.</p>
<section id="the-basics-of-data" class="level2">
<h2 class="anchored" data-anchor-id="the-basics-of-data">The Basics of Data</h2>
<p>Data is simply a spreadsheet of values, and we would like our data to be in a ‘tidy’ format.</p>
<section id="tidy-data" class="level3">
<h3 class="anchored" data-anchor-id="tidy-data">Tidy Data</h3>
<p>Data is considered tidy when each column represents a variable and each row consists of an observation. Consider the following dataset (and feel free to inspect the code and guess what each line means):</p>
<div class="cell">
<details>
<summary>Code</summary>
<div class="sourceCode cell-code" id="cb2"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb2-1"><a href="#cb2-1" aria-hidden="true" tabindex="-1"></a>diamonds <span class="sc">%&gt;%</span> </span>
<span id="cb2-2"><a href="#cb2-2" aria-hidden="true" tabindex="-1"></a>    <span class="fu">head</span>()</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</details>
<div class="cell-output-display">
<div class="kable-table">
<table class="table table-sm table-striped">
<colgroup>
<col style="width: 9%">
<col style="width: 15%">
<col style="width: 9%">
<col style="width: 12%">
<col style="width: 9%">
<col style="width: 9%">
<col style="width: 9%">
<col style="width: 7%">
<col style="width: 7%">
<col style="width: 7%">
</colgroup>
<thead>
<tr class="header">
<th style="text-align: right;">carat</th>
<th style="text-align: left;">cut</th>
<th style="text-align: left;">color</th>
<th style="text-align: left;">clarity</th>
<th style="text-align: right;">depth</th>
<th style="text-align: right;">table</th>
<th style="text-align: right;">price</th>
<th style="text-align: right;">x</th>
<th style="text-align: right;">y</th>
<th style="text-align: right;">z</th>
</tr>
</thead>
<tbody>
<tr class="odd">
<td style="text-align: right;">0.23</td>
<td style="text-align: left;">Ideal</td>
<td style="text-align: left;">E</td>
<td style="text-align: left;">SI2</td>
<td style="text-align: right;">61.5</td>
<td style="text-align: right;">55</td>
<td style="text-align: right;">326</td>
<td style="text-align: right;">3.95</td>
<td style="text-align: right;">3.98</td>
<td style="text-align: right;">2.43</td>
</tr>
<tr class="even">
<td style="text-align: right;">0.21</td>
<td style="text-align: left;">Premium</td>
<td style="text-align: left;">E</td>
<td style="text-align: left;">SI1</td>
<td style="text-align: right;">59.8</td>
<td style="text-align: right;">61</td>
<td style="text-align: right;">326</td>
<td style="text-align: right;">3.89</td>
<td style="text-align: right;">3.84</td>
<td style="text-align: right;">2.31</td>
</tr>
<tr class="odd">
<td style="text-align: right;">0.23</td>
<td style="text-align: left;">Good</td>
<td style="text-align: left;">E</td>
<td style="text-align: left;">VS1</td>
<td style="text-align: right;">56.9</td>
<td style="text-align: right;">65</td>
<td style="text-align: right;">327</td>
<td style="text-align: right;">4.05</td>
<td style="text-align: right;">4.07</td>
<td style="text-align: right;">2.31</td>
</tr>
<tr class="even">
<td style="text-align: right;">0.29</td>
<td style="text-align: left;">Premium</td>
<td style="text-align: left;">I</td>
<td style="text-align: left;">VS2</td>
<td style="text-align: right;">62.4</td>
<td style="text-align: right;">58</td>
<td style="text-align: right;">334</td>
<td style="text-align: right;">4.20</td>
<td style="text-align: right;">4.23</td>
<td style="text-align: right;">2.63</td>
</tr>
<tr class="odd">
<td style="text-align: right;">0.31</td>
<td style="text-align: left;">Good</td>
<td style="text-align: left;">J</td>
<td style="text-align: left;">SI2</td>
<td style="text-align: right;">63.3</td>
<td style="text-align: right;">58</td>
<td style="text-align: right;">335</td>
<td style="text-align: right;">4.34</td>
<td style="text-align: right;">4.35</td>
<td style="text-align: right;">2.75</td>
</tr>
<tr class="even">
<td style="text-align: right;">0.24</td>
<td style="text-align: left;">Very Good</td>
<td style="text-align: left;">J</td>
<td style="text-align: left;">VVS2</td>
<td style="text-align: right;">62.8</td>
<td style="text-align: right;">57</td>
<td style="text-align: right;">336</td>
<td style="text-align: right;">3.94</td>
<td style="text-align: right;">3.96</td>
<td style="text-align: right;">2.48</td>
</tr>
</tbody>
</table>
</div>
</div>
</div>
<p>Notice how this data is tidy; each column represents a variable (price, color, etc.) and each row is an observed diamond. Your goal should be to have your data in this format because it is easy to manipulate.</p>
</section>
</section>
<section id="gathering-data" class="level2">
<h2 class="anchored" data-anchor-id="gathering-data">Gathering Data</h2>
<p>Data is typically gathered from an API, a database, or simply an Excel/csv spreadsheet that you may have. For now, we will use a built-in R dataset called <code>diamonds</code>.</p>
</section>
<section id="manipulating-data" class="level2">
<h2 class="anchored" data-anchor-id="manipulating-data">Manipulating Data</h2>
<p>As long as data is in a tidy format, there are only a few actions that we need to do when manipulating data:</p>
<table class="table">
<tbody>
<tr class="odd">
<td><code>filter</code></td>
<td>filter data according to certain conditions</td>
</tr>
<tr class="even">
<td><code>summarize</code></td>
<td>summarize the data (e.g.&nbsp;finding the average)</td>
</tr>
<tr class="odd">
<td><code>group</code></td>
<td>group similar observations</td>
</tr>
<tr class="even">
<td><code>pivot</code></td>
<td>‘pivoting’ the data in different ways</td>
</tr>
<tr class="odd">
<td><code>select</code></td>
<td>select relevant information</td>
</tr>
<tr class="even">
<td><code>mutate</code></td>
<td>changing the data in some fashion</td>
</tr>
</tbody>
</table>
<section id="filtering" class="level3">
<h3 class="anchored" data-anchor-id="filtering">Filtering</h3>
<p>Let’s pretend that we only want to consider diamonds with a carat greater than .7 and a depth greater than 63: (click on the “Code” section)</p>
<div class="cell">
<details>
<summary>Code</summary>
<div class="sourceCode cell-code" id="cb3"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb3-1"><a href="#cb3-1" aria-hidden="true" tabindex="-1"></a>diamonds <span class="sc">%&gt;%</span> </span>
<span id="cb3-2"><a href="#cb3-2" aria-hidden="true" tabindex="-1"></a>    <span class="fu">filter</span>(carat <span class="sc">&gt;</span> .<span class="dv">7</span> <span class="sc">&amp;</span> depth <span class="sc">&gt;</span> <span class="dv">63</span>) <span class="sc">%&gt;%</span> </span>
<span id="cb3-3"><a href="#cb3-3" aria-hidden="true" tabindex="-1"></a>    <span class="fu">head</span>()</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</details>
<div class="cell-output-display">
<div class="kable-table">
<table class="table table-sm table-striped">
<colgroup>
<col style="width: 9%">
<col style="width: 15%">
<col style="width: 9%">
<col style="width: 12%">
<col style="width: 9%">
<col style="width: 9%">
<col style="width: 9%">
<col style="width: 7%">
<col style="width: 7%">
<col style="width: 7%">
</colgroup>
<thead>
<tr class="header">
<th style="text-align: right;">carat</th>
<th style="text-align: left;">cut</th>
<th style="text-align: left;">color</th>
<th style="text-align: left;">clarity</th>
<th style="text-align: right;">depth</th>
<th style="text-align: right;">table</th>
<th style="text-align: right;">price</th>
<th style="text-align: right;">x</th>
<th style="text-align: right;">y</th>
<th style="text-align: right;">z</th>
</tr>
</thead>
<tbody>
<tr class="odd">
<td style="text-align: right;">0.78</td>
<td style="text-align: left;">Very Good</td>
<td style="text-align: left;">G</td>
<td style="text-align: left;">SI2</td>
<td style="text-align: right;">63.8</td>
<td style="text-align: right;">56</td>
<td style="text-align: right;">2759</td>
<td style="text-align: right;">5.81</td>
<td style="text-align: right;">5.85</td>
<td style="text-align: right;">3.72</td>
</tr>
<tr class="even">
<td style="text-align: right;">0.96</td>
<td style="text-align: left;">Fair</td>
<td style="text-align: left;">F</td>
<td style="text-align: left;">SI2</td>
<td style="text-align: right;">66.3</td>
<td style="text-align: right;">62</td>
<td style="text-align: right;">2759</td>
<td style="text-align: right;">6.27</td>
<td style="text-align: right;">5.95</td>
<td style="text-align: right;">4.07</td>
</tr>
<tr class="odd">
<td style="text-align: right;">0.75</td>
<td style="text-align: left;">Very Good</td>
<td style="text-align: left;">D</td>
<td style="text-align: left;">SI1</td>
<td style="text-align: right;">63.2</td>
<td style="text-align: right;">56</td>
<td style="text-align: right;">2760</td>
<td style="text-align: right;">5.80</td>
<td style="text-align: right;">5.75</td>
<td style="text-align: right;">3.65</td>
</tr>
<tr class="even">
<td style="text-align: right;">0.91</td>
<td style="text-align: left;">Fair</td>
<td style="text-align: left;">H</td>
<td style="text-align: left;">SI2</td>
<td style="text-align: right;">64.4</td>
<td style="text-align: right;">57</td>
<td style="text-align: right;">2763</td>
<td style="text-align: right;">6.11</td>
<td style="text-align: right;">6.09</td>
<td style="text-align: right;">3.93</td>
</tr>
<tr class="odd">
<td style="text-align: right;">0.91</td>
<td style="text-align: left;">Fair</td>
<td style="text-align: left;">H</td>
<td style="text-align: left;">SI2</td>
<td style="text-align: right;">65.7</td>
<td style="text-align: right;">60</td>
<td style="text-align: right;">2763</td>
<td style="text-align: right;">6.03</td>
<td style="text-align: right;">5.99</td>
<td style="text-align: right;">3.95</td>
</tr>
<tr class="even">
<td style="text-align: right;">0.71</td>
<td style="text-align: left;">Very Good</td>
<td style="text-align: left;">D</td>
<td style="text-align: left;">SI1</td>
<td style="text-align: right;">63.6</td>
<td style="text-align: right;">58</td>
<td style="text-align: right;">2764</td>
<td style="text-align: right;">5.64</td>
<td style="text-align: right;">5.68</td>
<td style="text-align: right;">3.60</td>
</tr>
</tbody>
</table>
</div>
</div>
</div>
<p>Let’s continue to filter down and consider only the subset with a cut of “Very Good”:</p>
<div class="cell">
<details>
<summary>Code</summary>
<div class="sourceCode cell-code" id="cb4"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb4-1"><a href="#cb4-1" aria-hidden="true" tabindex="-1"></a>diamonds <span class="sc">%&gt;%</span> </span>
<span id="cb4-2"><a href="#cb4-2" aria-hidden="true" tabindex="-1"></a>    <span class="fu">filter</span>(carat <span class="sc">&gt;</span> .<span class="dv">7</span> <span class="sc">&amp;</span> depth <span class="sc">&gt;</span> <span class="dv">63</span>) <span class="sc">%&gt;%</span> </span>
<span id="cb4-3"><a href="#cb4-3" aria-hidden="true" tabindex="-1"></a>    <span class="fu">filter</span>(cut <span class="sc">==</span> <span class="st">"Very Good"</span>) <span class="sc">%&gt;%</span> </span>
<span id="cb4-4"><a href="#cb4-4" aria-hidden="true" tabindex="-1"></a>    <span class="fu">head</span>()</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</details>
<div class="cell-output-display">
<div class="kable-table">
<table class="table table-sm table-striped">
<colgroup>
<col style="width: 9%">
<col style="width: 15%">
<col style="width: 9%">
<col style="width: 12%">
<col style="width: 9%">
<col style="width: 9%">
<col style="width: 9%">
<col style="width: 7%">
<col style="width: 7%">
<col style="width: 7%">
</colgroup>
<thead>
<tr class="header">
<th style="text-align: right;">carat</th>
<th style="text-align: left;">cut</th>
<th style="text-align: left;">color</th>
<th style="text-align: left;">clarity</th>
<th style="text-align: right;">depth</th>
<th style="text-align: right;">table</th>
<th style="text-align: right;">price</th>
<th style="text-align: right;">x</th>
<th style="text-align: right;">y</th>
<th style="text-align: right;">z</th>
</tr>
</thead>
<tbody>
<tr class="odd">
<td style="text-align: right;">0.78</td>
<td style="text-align: left;">Very Good</td>
<td style="text-align: left;">G</td>
<td style="text-align: left;">SI2</td>
<td style="text-align: right;">63.8</td>
<td style="text-align: right;">56.0</td>
<td style="text-align: right;">2759</td>
<td style="text-align: right;">5.81</td>
<td style="text-align: right;">5.85</td>
<td style="text-align: right;">3.72</td>
</tr>
<tr class="even">
<td style="text-align: right;">0.75</td>
<td style="text-align: left;">Very Good</td>
<td style="text-align: left;">D</td>
<td style="text-align: left;">SI1</td>
<td style="text-align: right;">63.2</td>
<td style="text-align: right;">56.0</td>
<td style="text-align: right;">2760</td>
<td style="text-align: right;">5.80</td>
<td style="text-align: right;">5.75</td>
<td style="text-align: right;">3.65</td>
</tr>
<tr class="odd">
<td style="text-align: right;">0.71</td>
<td style="text-align: left;">Very Good</td>
<td style="text-align: left;">D</td>
<td style="text-align: left;">SI1</td>
<td style="text-align: right;">63.6</td>
<td style="text-align: right;">58.0</td>
<td style="text-align: right;">2764</td>
<td style="text-align: right;">5.64</td>
<td style="text-align: right;">5.68</td>
<td style="text-align: right;">3.60</td>
</tr>
<tr class="even">
<td style="text-align: right;">0.71</td>
<td style="text-align: left;">Very Good</td>
<td style="text-align: left;">G</td>
<td style="text-align: left;">VS1</td>
<td style="text-align: right;">63.3</td>
<td style="text-align: right;">59.0</td>
<td style="text-align: right;">2768</td>
<td style="text-align: right;">5.52</td>
<td style="text-align: right;">5.61</td>
<td style="text-align: right;">3.52</td>
</tr>
<tr class="odd">
<td style="text-align: right;">0.72</td>
<td style="text-align: left;">Very Good</td>
<td style="text-align: left;">G</td>
<td style="text-align: left;">VS2</td>
<td style="text-align: right;">63.7</td>
<td style="text-align: right;">56.4</td>
<td style="text-align: right;">2776</td>
<td style="text-align: right;">5.62</td>
<td style="text-align: right;">5.69</td>
<td style="text-align: right;">3.61</td>
</tr>
<tr class="even">
<td style="text-align: right;">0.75</td>
<td style="text-align: left;">Very Good</td>
<td style="text-align: left;">D</td>
<td style="text-align: left;">SI2</td>
<td style="text-align: right;">63.1</td>
<td style="text-align: right;">58.0</td>
<td style="text-align: right;">2782</td>
<td style="text-align: right;">5.78</td>
<td style="text-align: right;">5.73</td>
<td style="text-align: right;">3.63</td>
</tr>
</tbody>
</table>
</div>
</div>
</div>
<p>You will now see that we have from our original 53,940 diamonds, we have filtered down to 1,550 that adhere to our conditions.</p>
<p>At this point you may have three questions:</p>
<ol type="1">
<li>What is the <code>%&gt;%</code>?</li>
</ol>
<p>This is called a pipe and you can translate it to “and then”. It allows us to perform several operations consecutively. So if we look at the code, we first start with the diamonds dataset by typing <code>diamonds</code>, <em>and then</em> we <code>filter</code> according to carat and depth, <em>and then</em> we <code>filter</code> according to cut. The pipe is extremely useful and it is native to R.</p>
<ol start="2" type="1">
<li>What does the <code>head()</code> function do?</li>
</ol>
<p>It prints only the first 6 observations, that way you don’t have a table with 50,000 rows on your screen.</p>
<ol start="3" type="1">
<li>What if I want to filter down to several different cuts, not just “Very Good”</li>
</ol>
<p>Great question, here’s what you would do:</p>
<div class="cell">
<details>
<summary>Code</summary>
<div class="sourceCode cell-code" id="cb5"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb5-1"><a href="#cb5-1" aria-hidden="true" tabindex="-1"></a>diamonds <span class="sc">%&gt;%</span> </span>
<span id="cb5-2"><a href="#cb5-2" aria-hidden="true" tabindex="-1"></a>    <span class="fu">filter</span>(cut <span class="sc">%in%</span> <span class="fu">c</span>(<span class="st">"Ideal"</span>, <span class="st">"Premium"</span>)) <span class="sc">%&gt;%</span> </span>
<span id="cb5-3"><a href="#cb5-3" aria-hidden="true" tabindex="-1"></a>    <span class="fu">head</span>()</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</details>
<div class="cell-output-display">
<div class="kable-table">
<table class="table table-sm table-striped">
<thead>
<tr class="header">
<th style="text-align: right;">carat</th>
<th style="text-align: left;">cut</th>
<th style="text-align: left;">color</th>
<th style="text-align: left;">clarity</th>
<th style="text-align: right;">depth</th>
<th style="text-align: right;">table</th>
<th style="text-align: right;">price</th>
<th style="text-align: right;">x</th>
<th style="text-align: right;">y</th>
<th style="text-align: right;">z</th>
</tr>
</thead>
<tbody>
<tr class="odd">
<td style="text-align: right;">0.23</td>
<td style="text-align: left;">Ideal</td>
<td style="text-align: left;">E</td>
<td style="text-align: left;">SI2</td>
<td style="text-align: right;">61.5</td>
<td style="text-align: right;">55</td>
<td style="text-align: right;">326</td>
<td style="text-align: right;">3.95</td>
<td style="text-align: right;">3.98</td>
<td style="text-align: right;">2.43</td>
</tr>
<tr class="even">
<td style="text-align: right;">0.21</td>
<td style="text-align: left;">Premium</td>
<td style="text-align: left;">E</td>
<td style="text-align: left;">SI1</td>
<td style="text-align: right;">59.8</td>
<td style="text-align: right;">61</td>
<td style="text-align: right;">326</td>
<td style="text-align: right;">3.89</td>
<td style="text-align: right;">3.84</td>
<td style="text-align: right;">2.31</td>
</tr>
<tr class="odd">
<td style="text-align: right;">0.29</td>
<td style="text-align: left;">Premium</td>
<td style="text-align: left;">I</td>
<td style="text-align: left;">VS2</td>
<td style="text-align: right;">62.4</td>
<td style="text-align: right;">58</td>
<td style="text-align: right;">334</td>
<td style="text-align: right;">4.20</td>
<td style="text-align: right;">4.23</td>
<td style="text-align: right;">2.63</td>
</tr>
<tr class="even">
<td style="text-align: right;">0.23</td>
<td style="text-align: left;">Ideal</td>
<td style="text-align: left;">J</td>
<td style="text-align: left;">VS1</td>
<td style="text-align: right;">62.8</td>
<td style="text-align: right;">56</td>
<td style="text-align: right;">340</td>
<td style="text-align: right;">3.93</td>
<td style="text-align: right;">3.90</td>
<td style="text-align: right;">2.46</td>
</tr>
<tr class="odd">
<td style="text-align: right;">0.22</td>
<td style="text-align: left;">Premium</td>
<td style="text-align: left;">F</td>
<td style="text-align: left;">SI1</td>
<td style="text-align: right;">60.4</td>
<td style="text-align: right;">61</td>
<td style="text-align: right;">342</td>
<td style="text-align: right;">3.88</td>
<td style="text-align: right;">3.84</td>
<td style="text-align: right;">2.33</td>
</tr>
<tr class="even">
<td style="text-align: right;">0.31</td>
<td style="text-align: left;">Ideal</td>
<td style="text-align: left;">J</td>
<td style="text-align: left;">SI2</td>
<td style="text-align: right;">62.2</td>
<td style="text-align: right;">54</td>
<td style="text-align: right;">344</td>
<td style="text-align: right;">4.35</td>
<td style="text-align: right;">4.37</td>
<td style="text-align: right;">2.71</td>
</tr>
</tbody>
</table>
</div>
</div>
</div>
<p>We tell R to filter down to the observations where cut matches one of the strings in the vector <code>c("Ideal", "Premium")</code>. The <code>c()</code> function creates a vector.</p>
</section>
<section id="summarizing" class="level3">
<h3 class="anchored" data-anchor-id="summarizing">Summarizing</h3>
<p>Let’s say we want to summarize the data and find the average diamond price, along with its standard deviation:</p>
<div class="cell">
<details>
<summary>Code</summary>
<div class="sourceCode cell-code" id="cb6"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb6-1"><a href="#cb6-1" aria-hidden="true" tabindex="-1"></a>diamonds <span class="sc">%&gt;%</span> </span>
<span id="cb6-2"><a href="#cb6-2" aria-hidden="true" tabindex="-1"></a>    <span class="fu">summarize</span>(<span class="at">avg_price =</span> <span class="fu">mean</span>(price),</span>
<span id="cb6-3"><a href="#cb6-3" aria-hidden="true" tabindex="-1"></a>              <span class="at">st_dev    =</span> <span class="fu">sd</span>(price))</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</details>
<div class="cell-output-display">
<div class="kable-table">
<table class="table table-sm table-striped">
<thead>
<tr class="header">
<th style="text-align: right;">avg_price</th>
<th style="text-align: right;">st_dev</th>
</tr>
</thead>
<tbody>
<tr class="odd">
<td style="text-align: right;">3932.8</td>
<td style="text-align: right;">3989.44</td>
</tr>
</tbody>
</table>
</div>
</div>
</div>
<p>Notice that we can take our 50,000+ diamonds and summarize the data down to an average price…</p>
<p>You will notice that in the <code>summarize</code> function I start by naming the column I want (avg_price) and then I tell R what to do (find the <code>mean</code> of the price variable/column. The <code>mean()</code> &amp; <code>sd()</code> functions calculate mean and standard deviation respectively). I could just as easily call the columns “thing1” &amp; “thing2”:</p>
<div class="cell">
<details>
<summary>Code</summary>
<div class="sourceCode cell-code" id="cb7"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb7-1"><a href="#cb7-1" aria-hidden="true" tabindex="-1"></a>diamonds <span class="sc">%&gt;%</span> </span>
<span id="cb7-2"><a href="#cb7-2" aria-hidden="true" tabindex="-1"></a>    <span class="fu">summarize</span>(<span class="at">thing1 =</span> <span class="fu">mean</span>(price),</span>
<span id="cb7-3"><a href="#cb7-3" aria-hidden="true" tabindex="-1"></a>              <span class="at">thing2    =</span> <span class="fu">sd</span>(price))</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</details>
<div class="cell-output-display">
<div class="kable-table">
<table class="table table-sm table-striped">
<thead>
<tr class="header">
<th style="text-align: right;">thing1</th>
<th style="text-align: right;">thing2</th>
</tr>
</thead>
<tbody>
<tr class="odd">
<td style="text-align: right;">3932.8</td>
<td style="text-align: right;">3989.44</td>
</tr>
</tbody>
</table>
</div>
</div>
</div>
</section>
<section id="grouping" class="level3">
<h3 class="anchored" data-anchor-id="grouping">Grouping</h3>
<p>Summarizing the entire data is important, but let’s say we want to find the average diamond price within each color group…</p>
<div class="cell">
<details>
<summary>Code</summary>
<div class="sourceCode cell-code" id="cb8"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb8-1"><a href="#cb8-1" aria-hidden="true" tabindex="-1"></a>diamonds <span class="sc">%&gt;%</span> </span>
<span id="cb8-2"><a href="#cb8-2" aria-hidden="true" tabindex="-1"></a>    <span class="fu">group_by</span>(color) <span class="sc">%&gt;%</span> </span>
<span id="cb8-3"><a href="#cb8-3" aria-hidden="true" tabindex="-1"></a>    <span class="fu">summarize</span>(<span class="at">avg_price =</span> <span class="fu">mean</span>(price)) <span class="sc">%&gt;%</span> </span>
<span id="cb8-4"><a href="#cb8-4" aria-hidden="true" tabindex="-1"></a>    <span class="fu">ungroup</span>()</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</details>
<div class="cell-output-display">
<div class="kable-table">
<table class="table table-sm table-striped">
<thead>
<tr class="header">
<th style="text-align: left;">color</th>
<th style="text-align: right;">avg_price</th>
</tr>
</thead>
<tbody>
<tr class="odd">
<td style="text-align: left;">D</td>
<td style="text-align: right;">3169.954</td>
</tr>
<tr class="even">
<td style="text-align: left;">E</td>
<td style="text-align: right;">3076.752</td>
</tr>
<tr class="odd">
<td style="text-align: left;">F</td>
<td style="text-align: right;">3724.886</td>
</tr>
<tr class="even">
<td style="text-align: left;">G</td>
<td style="text-align: right;">3999.136</td>
</tr>
<tr class="odd">
<td style="text-align: left;">H</td>
<td style="text-align: right;">4486.669</td>
</tr>
<tr class="even">
<td style="text-align: left;">I</td>
<td style="text-align: right;">5091.875</td>
</tr>
<tr class="odd">
<td style="text-align: left;">J</td>
<td style="text-align: right;">5323.818</td>
</tr>
</tbody>
</table>
</div>
</div>
</div>
<p>We can take things a step further and group by color <em>and</em> cut…</p>
<div class="cell">
<details>
<summary>Code</summary>
<div class="sourceCode cell-code" id="cb9"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb9-1"><a href="#cb9-1" aria-hidden="true" tabindex="-1"></a>diamonds <span class="sc">%&gt;%</span> </span>
<span id="cb9-2"><a href="#cb9-2" aria-hidden="true" tabindex="-1"></a>    <span class="fu">group_by</span>(color, cut) <span class="sc">%&gt;%</span> </span>
<span id="cb9-3"><a href="#cb9-3" aria-hidden="true" tabindex="-1"></a>    <span class="fu">summarize</span>(<span class="at">avg_price =</span> <span class="fu">mean</span>(price)) <span class="sc">%&gt;%</span> </span>
<span id="cb9-4"><a href="#cb9-4" aria-hidden="true" tabindex="-1"></a>    <span class="fu">ungroup</span>() <span class="sc">%&gt;%</span> </span>
<span id="cb9-5"><a href="#cb9-5" aria-hidden="true" tabindex="-1"></a>    <span class="fu">slice</span>(<span class="dv">1</span><span class="sc">:</span><span class="dv">10</span>)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</details>
<div class="cell-output-display">
<div class="kable-table">
<table class="table table-sm table-striped">
<thead>
<tr class="header">
<th style="text-align: left;">color</th>
<th style="text-align: left;">cut</th>
<th style="text-align: right;">avg_price</th>
</tr>
</thead>
<tbody>
<tr class="odd">
<td style="text-align: left;">D</td>
<td style="text-align: left;">Fair</td>
<td style="text-align: right;">4291.061</td>
</tr>
<tr class="even">
<td style="text-align: left;">D</td>
<td style="text-align: left;">Good</td>
<td style="text-align: right;">3405.382</td>
</tr>
<tr class="odd">
<td style="text-align: left;">D</td>
<td style="text-align: left;">Very Good</td>
<td style="text-align: right;">3470.467</td>
</tr>
<tr class="even">
<td style="text-align: left;">D</td>
<td style="text-align: left;">Premium</td>
<td style="text-align: right;">3631.293</td>
</tr>
<tr class="odd">
<td style="text-align: left;">D</td>
<td style="text-align: left;">Ideal</td>
<td style="text-align: right;">2629.095</td>
</tr>
<tr class="even">
<td style="text-align: left;">E</td>
<td style="text-align: left;">Fair</td>
<td style="text-align: right;">3682.312</td>
</tr>
<tr class="odd">
<td style="text-align: left;">E</td>
<td style="text-align: left;">Good</td>
<td style="text-align: right;">3423.644</td>
</tr>
<tr class="even">
<td style="text-align: left;">E</td>
<td style="text-align: left;">Very Good</td>
<td style="text-align: right;">3214.652</td>
</tr>
<tr class="odd">
<td style="text-align: left;">E</td>
<td style="text-align: left;">Premium</td>
<td style="text-align: right;">3538.914</td>
</tr>
<tr class="even">
<td style="text-align: left;">E</td>
<td style="text-align: left;">Ideal</td>
<td style="text-align: right;">2597.550</td>
</tr>
</tbody>
</table>
</div>
</div>
</div>
<p>You will notice that we now have average price for each color and cut. I also only showed the first 10 rows of output by using the <code>slice()</code> function.</p>
</section>
<section id="pivoting" class="level3">
<h3 class="anchored" data-anchor-id="pivoting">Pivoting</h3>
<p>Pivoting is probably the most complicated of the broad actions I am showing you, but the previous segment allows for a great transition. I decided to show only the first 10 rows of output rather than inundate you with 35 rows, but there must be a better way of showing the output, right? I mean we have letters repeating in the color column. This would make more sense:</p>
<div class="cell">
<details>
<summary>Code</summary>
<div class="sourceCode cell-code" id="cb10"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb10-1"><a href="#cb10-1" aria-hidden="true" tabindex="-1"></a>diamonds <span class="sc">%&gt;%</span> </span>
<span id="cb10-2"><a href="#cb10-2" aria-hidden="true" tabindex="-1"></a>    <span class="fu">group_by</span>(color, cut) <span class="sc">%&gt;%</span> </span>
<span id="cb10-3"><a href="#cb10-3" aria-hidden="true" tabindex="-1"></a>    <span class="fu">summarize</span>(<span class="at">avg_price =</span> <span class="fu">mean</span>(price)) <span class="sc">%&gt;%</span> </span>
<span id="cb10-4"><a href="#cb10-4" aria-hidden="true" tabindex="-1"></a>    <span class="fu">ungroup</span>() <span class="sc">%&gt;%</span> </span>
<span id="cb10-5"><a href="#cb10-5" aria-hidden="true" tabindex="-1"></a>    <span class="fu">pivot_wider</span>(</span>
<span id="cb10-6"><a href="#cb10-6" aria-hidden="true" tabindex="-1"></a>        <span class="at">names_from  =</span> cut,</span>
<span id="cb10-7"><a href="#cb10-7" aria-hidden="true" tabindex="-1"></a>        <span class="at">values_from =</span> avg_price</span>
<span id="cb10-8"><a href="#cb10-8" aria-hidden="true" tabindex="-1"></a>    )</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</details>
<div class="cell-output-display">
<div class="kable-table">
<table class="table table-sm table-striped">
<thead>
<tr class="header">
<th style="text-align: left;">color</th>
<th style="text-align: right;">Fair</th>
<th style="text-align: right;">Good</th>
<th style="text-align: right;">Very Good</th>
<th style="text-align: right;">Premium</th>
<th style="text-align: right;">Ideal</th>
</tr>
</thead>
<tbody>
<tr class="odd">
<td style="text-align: left;">D</td>
<td style="text-align: right;">4291.061</td>
<td style="text-align: right;">3405.382</td>
<td style="text-align: right;">3470.467</td>
<td style="text-align: right;">3631.293</td>
<td style="text-align: right;">2629.095</td>
</tr>
<tr class="even">
<td style="text-align: left;">E</td>
<td style="text-align: right;">3682.312</td>
<td style="text-align: right;">3423.644</td>
<td style="text-align: right;">3214.652</td>
<td style="text-align: right;">3538.914</td>
<td style="text-align: right;">2597.550</td>
</tr>
<tr class="odd">
<td style="text-align: left;">F</td>
<td style="text-align: right;">3827.003</td>
<td style="text-align: right;">3495.750</td>
<td style="text-align: right;">3778.820</td>
<td style="text-align: right;">4324.890</td>
<td style="text-align: right;">3374.939</td>
</tr>
<tr class="even">
<td style="text-align: left;">G</td>
<td style="text-align: right;">4239.255</td>
<td style="text-align: right;">4123.482</td>
<td style="text-align: right;">3872.754</td>
<td style="text-align: right;">4500.742</td>
<td style="text-align: right;">3720.706</td>
</tr>
<tr class="odd">
<td style="text-align: left;">H</td>
<td style="text-align: right;">5135.683</td>
<td style="text-align: right;">4276.255</td>
<td style="text-align: right;">4535.390</td>
<td style="text-align: right;">5216.707</td>
<td style="text-align: right;">3889.335</td>
</tr>
<tr class="even">
<td style="text-align: left;">I</td>
<td style="text-align: right;">4685.446</td>
<td style="text-align: right;">5078.533</td>
<td style="text-align: right;">5255.880</td>
<td style="text-align: right;">5946.181</td>
<td style="text-align: right;">4451.970</td>
</tr>
<tr class="odd">
<td style="text-align: left;">J</td>
<td style="text-align: right;">4975.655</td>
<td style="text-align: right;">4574.173</td>
<td style="text-align: right;">5103.513</td>
<td style="text-align: right;">6294.592</td>
<td style="text-align: right;">4918.186</td>
</tr>
</tbody>
</table>
</div>
</div>
</div>
<p>We tell R to take our 35 row table, and pivot it so that we have a color column followed by columns with the different cuts, wherein each value is the average price.</p>
<p>The <code>names_from</code> argument asks us what variable to we want to pivot on (we said ‘cut’ and therefore R took all of the cut values and made them columns). The <code>values_from</code> argument asks us which variable we would like to R to occupy the new columns with (we said ‘avg_price’ and therefore R occupied all of the ‘cells’ in our pivot table with the corresponding values from the avg_price column).</p>
<p><em>Quick Tip</em>: hitting the <em>tab</em> key when your cursor is inside of a function’s parentheses will show all of the function’s available arguments (2 of which are <code>names_from</code> and <code>values_from</code> for the <code>pivot_longer()</code> function.)</p>
<p><em>Important Note</em>: You will notice that now we have violated the premise of tidy data. The columns <code>Fair:Ideal</code> are <em>not</em> variables. They are types of “cut” (cut is the variable). For the purposes of coding, and data manipulation, we want our data to be in a tidy format. However, for the purposes of presentation, we typically want our data to be in a ‘wide’ format (hence <code>pivot_wider</code>).</p>
<p>We can do the opposite and revert our table back into a ‘long’ format with <code>pivot_longer()</code> :</p>
<div class="cell">
<details>
<summary>Code</summary>
<div class="sourceCode cell-code" id="cb11"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb11-1"><a href="#cb11-1" aria-hidden="true" tabindex="-1"></a>diamonds <span class="sc">%&gt;%</span> </span>
<span id="cb11-2"><a href="#cb11-2" aria-hidden="true" tabindex="-1"></a>    <span class="fu">group_by</span>(color, cut) <span class="sc">%&gt;%</span> </span>
<span id="cb11-3"><a href="#cb11-3" aria-hidden="true" tabindex="-1"></a>    <span class="fu">summarize</span>(<span class="at">avg_price =</span> <span class="fu">mean</span>(price)) <span class="sc">%&gt;%</span> </span>
<span id="cb11-4"><a href="#cb11-4" aria-hidden="true" tabindex="-1"></a>    <span class="fu">ungroup</span>() <span class="sc">%&gt;%</span> </span>
<span id="cb11-5"><a href="#cb11-5" aria-hidden="true" tabindex="-1"></a>    <span class="fu">pivot_wider</span>(</span>
<span id="cb11-6"><a href="#cb11-6" aria-hidden="true" tabindex="-1"></a>        <span class="at">names_from  =</span> cut,</span>
<span id="cb11-7"><a href="#cb11-7" aria-hidden="true" tabindex="-1"></a>        <span class="at">values_from =</span> avg_price</span>
<span id="cb11-8"><a href="#cb11-8" aria-hidden="true" tabindex="-1"></a>    ) <span class="sc">%&gt;%</span> </span>
<span id="cb11-9"><a href="#cb11-9" aria-hidden="true" tabindex="-1"></a>    <span class="fu">pivot_longer</span>(</span>
<span id="cb11-10"><a href="#cb11-10" aria-hidden="true" tabindex="-1"></a>        <span class="at">cols =</span> Fair<span class="sc">:</span>Ideal</span>
<span id="cb11-11"><a href="#cb11-11" aria-hidden="true" tabindex="-1"></a>    ) <span class="sc">%&gt;%</span> </span>
<span id="cb11-12"><a href="#cb11-12" aria-hidden="true" tabindex="-1"></a>    <span class="fu">slice</span>(<span class="dv">1</span><span class="sc">:</span><span class="dv">10</span>)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</details>
<div class="cell-output-display">
<div class="kable-table">
<table class="table table-sm table-striped">
<thead>
<tr class="header">
<th style="text-align: left;">color</th>
<th style="text-align: left;">name</th>
<th style="text-align: right;">value</th>
</tr>
</thead>
<tbody>
<tr class="odd">
<td style="text-align: left;">D</td>
<td style="text-align: left;">Fair</td>
<td style="text-align: right;">4291.061</td>
</tr>
<tr class="even">
<td style="text-align: left;">D</td>
<td style="text-align: left;">Good</td>
<td style="text-align: right;">3405.382</td>
</tr>
<tr class="odd">
<td style="text-align: left;">D</td>
<td style="text-align: left;">Very Good</td>
<td style="text-align: right;">3470.467</td>
</tr>
<tr class="even">
<td style="text-align: left;">D</td>
<td style="text-align: left;">Premium</td>
<td style="text-align: right;">3631.293</td>
</tr>
<tr class="odd">
<td style="text-align: left;">D</td>
<td style="text-align: left;">Ideal</td>
<td style="text-align: right;">2629.095</td>
</tr>
<tr class="even">
<td style="text-align: left;">E</td>
<td style="text-align: left;">Fair</td>
<td style="text-align: right;">3682.312</td>
</tr>
<tr class="odd">
<td style="text-align: left;">E</td>
<td style="text-align: left;">Good</td>
<td style="text-align: right;">3423.644</td>
</tr>
<tr class="even">
<td style="text-align: left;">E</td>
<td style="text-align: left;">Very Good</td>
<td style="text-align: right;">3214.652</td>
</tr>
<tr class="odd">
<td style="text-align: left;">E</td>
<td style="text-align: left;">Premium</td>
<td style="text-align: right;">3538.914</td>
</tr>
<tr class="even">
<td style="text-align: left;">E</td>
<td style="text-align: left;">Ideal</td>
<td style="text-align: right;">2597.550</td>
</tr>
</tbody>
</table>
</div>
</div>
</div>
<p>We can also rename the columns back to their original names within the <code>pivot_longer()</code> function:</p>
<div class="cell">
<details>
<summary>Code</summary>
<div class="sourceCode cell-code" id="cb12"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb12-1"><a href="#cb12-1" aria-hidden="true" tabindex="-1"></a>diamonds <span class="sc">%&gt;%</span> </span>
<span id="cb12-2"><a href="#cb12-2" aria-hidden="true" tabindex="-1"></a>    <span class="fu">group_by</span>(color, cut) <span class="sc">%&gt;%</span> </span>
<span id="cb12-3"><a href="#cb12-3" aria-hidden="true" tabindex="-1"></a>    <span class="fu">summarize</span>(<span class="at">avg_price =</span> <span class="fu">mean</span>(price)) <span class="sc">%&gt;%</span> </span>
<span id="cb12-4"><a href="#cb12-4" aria-hidden="true" tabindex="-1"></a>    <span class="fu">ungroup</span>() <span class="sc">%&gt;%</span> </span>
<span id="cb12-5"><a href="#cb12-5" aria-hidden="true" tabindex="-1"></a>    <span class="fu">pivot_wider</span>(</span>
<span id="cb12-6"><a href="#cb12-6" aria-hidden="true" tabindex="-1"></a>        <span class="at">names_from  =</span> cut,</span>
<span id="cb12-7"><a href="#cb12-7" aria-hidden="true" tabindex="-1"></a>        <span class="at">values_from =</span> avg_price</span>
<span id="cb12-8"><a href="#cb12-8" aria-hidden="true" tabindex="-1"></a>    ) <span class="sc">%&gt;%</span> </span>
<span id="cb12-9"><a href="#cb12-9" aria-hidden="true" tabindex="-1"></a>    <span class="fu">pivot_longer</span>(</span>
<span id="cb12-10"><a href="#cb12-10" aria-hidden="true" tabindex="-1"></a>        <span class="at">cols      =</span> Fair<span class="sc">:</span>Ideal,</span>
<span id="cb12-11"><a href="#cb12-11" aria-hidden="true" tabindex="-1"></a>        <span class="at">names_to  =</span> <span class="st">"cut"</span>,</span>
<span id="cb12-12"><a href="#cb12-12" aria-hidden="true" tabindex="-1"></a>        <span class="at">values_to =</span> <span class="st">"avg_price"</span></span>
<span id="cb12-13"><a href="#cb12-13" aria-hidden="true" tabindex="-1"></a>    ) <span class="sc">%&gt;%</span> </span>
<span id="cb12-14"><a href="#cb12-14" aria-hidden="true" tabindex="-1"></a>    <span class="fu">slice</span>(<span class="dv">1</span><span class="sc">:</span><span class="dv">10</span>)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</details>
<div class="cell-output-display">
<div class="kable-table">
<table class="table table-sm table-striped">
<thead>
<tr class="header">
<th style="text-align: left;">color</th>
<th style="text-align: left;">cut</th>
<th style="text-align: right;">avg_price</th>
</tr>
</thead>
<tbody>
<tr class="odd">
<td style="text-align: left;">D</td>
<td style="text-align: left;">Fair</td>
<td style="text-align: right;">4291.061</td>
</tr>
<tr class="even">
<td style="text-align: left;">D</td>
<td style="text-align: left;">Good</td>
<td style="text-align: right;">3405.382</td>
</tr>
<tr class="odd">
<td style="text-align: left;">D</td>
<td style="text-align: left;">Very Good</td>
<td style="text-align: right;">3470.467</td>
</tr>
<tr class="even">
<td style="text-align: left;">D</td>
<td style="text-align: left;">Premium</td>
<td style="text-align: right;">3631.293</td>
</tr>
<tr class="odd">
<td style="text-align: left;">D</td>
<td style="text-align: left;">Ideal</td>
<td style="text-align: right;">2629.095</td>
</tr>
<tr class="even">
<td style="text-align: left;">E</td>
<td style="text-align: left;">Fair</td>
<td style="text-align: right;">3682.312</td>
</tr>
<tr class="odd">
<td style="text-align: left;">E</td>
<td style="text-align: left;">Good</td>
<td style="text-align: right;">3423.644</td>
</tr>
<tr class="even">
<td style="text-align: left;">E</td>
<td style="text-align: left;">Very Good</td>
<td style="text-align: right;">3214.652</td>
</tr>
<tr class="odd">
<td style="text-align: left;">E</td>
<td style="text-align: left;">Premium</td>
<td style="text-align: right;">3538.914</td>
</tr>
<tr class="even">
<td style="text-align: left;">E</td>
<td style="text-align: left;">Ideal</td>
<td style="text-align: right;">2597.550</td>
</tr>
</tbody>
</table>
</div>
</div>
</div>
<p>That’s on pivoting…</p>
</section>
<section id="selecting" class="level3">
<h3 class="anchored" data-anchor-id="selecting">Selecting</h3>
<p>Selecting is straightforward. Here are the first 6 rows of our original dataset:</p>
<div class="cell">
<details>
<summary>Code</summary>
<div class="sourceCode cell-code" id="cb13"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb13-1"><a href="#cb13-1" aria-hidden="true" tabindex="-1"></a>diamonds <span class="sc">%&gt;%</span> </span>
<span id="cb13-2"><a href="#cb13-2" aria-hidden="true" tabindex="-1"></a>    <span class="fu">head</span>()</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</details>
<div class="cell-output-display">
<div class="kable-table">
<table class="table table-sm table-striped">
<colgroup>
<col style="width: 9%">
<col style="width: 15%">
<col style="width: 9%">
<col style="width: 12%">
<col style="width: 9%">
<col style="width: 9%">
<col style="width: 9%">
<col style="width: 7%">
<col style="width: 7%">
<col style="width: 7%">
</colgroup>
<thead>
<tr class="header">
<th style="text-align: right;">carat</th>
<th style="text-align: left;">cut</th>
<th style="text-align: left;">color</th>
<th style="text-align: left;">clarity</th>
<th style="text-align: right;">depth</th>
<th style="text-align: right;">table</th>
<th style="text-align: right;">price</th>
<th style="text-align: right;">x</th>
<th style="text-align: right;">y</th>
<th style="text-align: right;">z</th>
</tr>
</thead>
<tbody>
<tr class="odd">
<td style="text-align: right;">0.23</td>
<td style="text-align: left;">Ideal</td>
<td style="text-align: left;">E</td>
<td style="text-align: left;">SI2</td>
<td style="text-align: right;">61.5</td>
<td style="text-align: right;">55</td>
<td style="text-align: right;">326</td>
<td style="text-align: right;">3.95</td>
<td style="text-align: right;">3.98</td>
<td style="text-align: right;">2.43</td>
</tr>
<tr class="even">
<td style="text-align: right;">0.21</td>
<td style="text-align: left;">Premium</td>
<td style="text-align: left;">E</td>
<td style="text-align: left;">SI1</td>
<td style="text-align: right;">59.8</td>
<td style="text-align: right;">61</td>
<td style="text-align: right;">326</td>
<td style="text-align: right;">3.89</td>
<td style="text-align: right;">3.84</td>
<td style="text-align: right;">2.31</td>
</tr>
<tr class="odd">
<td style="text-align: right;">0.23</td>
<td style="text-align: left;">Good</td>
<td style="text-align: left;">E</td>
<td style="text-align: left;">VS1</td>
<td style="text-align: right;">56.9</td>
<td style="text-align: right;">65</td>
<td style="text-align: right;">327</td>
<td style="text-align: right;">4.05</td>
<td style="text-align: right;">4.07</td>
<td style="text-align: right;">2.31</td>
</tr>
<tr class="even">
<td style="text-align: right;">0.29</td>
<td style="text-align: left;">Premium</td>
<td style="text-align: left;">I</td>
<td style="text-align: left;">VS2</td>
<td style="text-align: right;">62.4</td>
<td style="text-align: right;">58</td>
<td style="text-align: right;">334</td>
<td style="text-align: right;">4.20</td>
<td style="text-align: right;">4.23</td>
<td style="text-align: right;">2.63</td>
</tr>
<tr class="odd">
<td style="text-align: right;">0.31</td>
<td style="text-align: left;">Good</td>
<td style="text-align: left;">J</td>
<td style="text-align: left;">SI2</td>
<td style="text-align: right;">63.3</td>
<td style="text-align: right;">58</td>
<td style="text-align: right;">335</td>
<td style="text-align: right;">4.34</td>
<td style="text-align: right;">4.35</td>
<td style="text-align: right;">2.75</td>
</tr>
<tr class="even">
<td style="text-align: right;">0.24</td>
<td style="text-align: left;">Very Good</td>
<td style="text-align: left;">J</td>
<td style="text-align: left;">VVS2</td>
<td style="text-align: right;">62.8</td>
<td style="text-align: right;">57</td>
<td style="text-align: right;">336</td>
<td style="text-align: right;">3.94</td>
<td style="text-align: right;">3.96</td>
<td style="text-align: right;">2.48</td>
</tr>
</tbody>
</table>
</div>
</div>
</div>
<p>Let’s say we are about to investigate something but we only need price, carat, and cut… then it is best practice to select those variables/columns first (imagine we have thousands of variables/columns…):</p>
<div class="cell">
<details>
<summary>Code</summary>
<div class="sourceCode cell-code" id="cb14"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb14-1"><a href="#cb14-1" aria-hidden="true" tabindex="-1"></a>diamonds <span class="sc">%&gt;%</span> </span>
<span id="cb14-2"><a href="#cb14-2" aria-hidden="true" tabindex="-1"></a>    <span class="fu">select</span>(price, carat, cut) <span class="sc">%&gt;%</span> </span>
<span id="cb14-3"><a href="#cb14-3" aria-hidden="true" tabindex="-1"></a>    <span class="fu">head</span>()</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</details>
<div class="cell-output-display">
<div class="kable-table">
<table class="table table-sm table-striped">
<thead>
<tr class="header">
<th style="text-align: right;">price</th>
<th style="text-align: right;">carat</th>
<th style="text-align: left;">cut</th>
</tr>
</thead>
<tbody>
<tr class="odd">
<td style="text-align: right;">326</td>
<td style="text-align: right;">0.23</td>
<td style="text-align: left;">Ideal</td>
</tr>
<tr class="even">
<td style="text-align: right;">326</td>
<td style="text-align: right;">0.21</td>
<td style="text-align: left;">Premium</td>
</tr>
<tr class="odd">
<td style="text-align: right;">327</td>
<td style="text-align: right;">0.23</td>
<td style="text-align: left;">Good</td>
</tr>
<tr class="even">
<td style="text-align: right;">334</td>
<td style="text-align: right;">0.29</td>
<td style="text-align: left;">Premium</td>
</tr>
<tr class="odd">
<td style="text-align: right;">335</td>
<td style="text-align: right;">0.31</td>
<td style="text-align: left;">Good</td>
</tr>
<tr class="even">
<td style="text-align: right;">336</td>
<td style="text-align: right;">0.24</td>
<td style="text-align: left;">Very Good</td>
</tr>
</tbody>
</table>
</div>
</div>
</div>
<p>We can also select by omission:</p>
<div class="cell">
<details>
<summary>Code</summary>
<div class="sourceCode cell-code" id="cb15"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb15-1"><a href="#cb15-1" aria-hidden="true" tabindex="-1"></a>diamonds <span class="sc">%&gt;%</span> </span>
<span id="cb15-2"><a href="#cb15-2" aria-hidden="true" tabindex="-1"></a>    <span class="fu">select</span>(<span class="sc">-</span>x, <span class="sc">-</span>y, <span class="sc">-</span>z) <span class="sc">%&gt;%</span> </span>
<span id="cb15-3"><a href="#cb15-3" aria-hidden="true" tabindex="-1"></a>    <span class="fu">head</span>()</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</details>
<div class="cell-output-display">
<div class="kable-table">
<table class="table table-sm table-striped">
<thead>
<tr class="header">
<th style="text-align: right;">carat</th>
<th style="text-align: left;">cut</th>
<th style="text-align: left;">color</th>
<th style="text-align: left;">clarity</th>
<th style="text-align: right;">depth</th>
<th style="text-align: right;">table</th>
<th style="text-align: right;">price</th>
</tr>
</thead>
<tbody>
<tr class="odd">
<td style="text-align: right;">0.23</td>
<td style="text-align: left;">Ideal</td>
<td style="text-align: left;">E</td>
<td style="text-align: left;">SI2</td>
<td style="text-align: right;">61.5</td>
<td style="text-align: right;">55</td>
<td style="text-align: right;">326</td>
</tr>
<tr class="even">
<td style="text-align: right;">0.21</td>
<td style="text-align: left;">Premium</td>
<td style="text-align: left;">E</td>
<td style="text-align: left;">SI1</td>
<td style="text-align: right;">59.8</td>
<td style="text-align: right;">61</td>
<td style="text-align: right;">326</td>
</tr>
<tr class="odd">
<td style="text-align: right;">0.23</td>
<td style="text-align: left;">Good</td>
<td style="text-align: left;">E</td>
<td style="text-align: left;">VS1</td>
<td style="text-align: right;">56.9</td>
<td style="text-align: right;">65</td>
<td style="text-align: right;">327</td>
</tr>
<tr class="even">
<td style="text-align: right;">0.29</td>
<td style="text-align: left;">Premium</td>
<td style="text-align: left;">I</td>
<td style="text-align: left;">VS2</td>
<td style="text-align: right;">62.4</td>
<td style="text-align: right;">58</td>
<td style="text-align: right;">334</td>
</tr>
<tr class="odd">
<td style="text-align: right;">0.31</td>
<td style="text-align: left;">Good</td>
<td style="text-align: left;">J</td>
<td style="text-align: left;">SI2</td>
<td style="text-align: right;">63.3</td>
<td style="text-align: right;">58</td>
<td style="text-align: right;">335</td>
</tr>
<tr class="even">
<td style="text-align: right;">0.24</td>
<td style="text-align: left;">Very Good</td>
<td style="text-align: left;">J</td>
<td style="text-align: left;">VVS2</td>
<td style="text-align: right;">62.8</td>
<td style="text-align: right;">57</td>
<td style="text-align: right;">336</td>
</tr>
</tbody>
</table>
</div>
</div>
</div>
<p>We can select variables carat <em>through</em> clarity:</p>
<div class="cell">
<details>
<summary>Code</summary>
<div class="sourceCode cell-code" id="cb16"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb16-1"><a href="#cb16-1" aria-hidden="true" tabindex="-1"></a>diamonds <span class="sc">%&gt;%</span> </span>
<span id="cb16-2"><a href="#cb16-2" aria-hidden="true" tabindex="-1"></a>    <span class="fu">select</span>(carat<span class="sc">:</span>clarity) <span class="sc">%&gt;%</span> </span>
<span id="cb16-3"><a href="#cb16-3" aria-hidden="true" tabindex="-1"></a>    <span class="fu">head</span>()</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</details>
<div class="cell-output-display">
<div class="kable-table">
<table class="table table-sm table-striped">
<thead>
<tr class="header">
<th style="text-align: right;">carat</th>
<th style="text-align: left;">cut</th>
<th style="text-align: left;">color</th>
<th style="text-align: left;">clarity</th>
</tr>
</thead>
<tbody>
<tr class="odd">
<td style="text-align: right;">0.23</td>
<td style="text-align: left;">Ideal</td>
<td style="text-align: left;">E</td>
<td style="text-align: left;">SI2</td>
</tr>
<tr class="even">
<td style="text-align: right;">0.21</td>
<td style="text-align: left;">Premium</td>
<td style="text-align: left;">E</td>
<td style="text-align: left;">SI1</td>
</tr>
<tr class="odd">
<td style="text-align: right;">0.23</td>
<td style="text-align: left;">Good</td>
<td style="text-align: left;">E</td>
<td style="text-align: left;">VS1</td>
</tr>
<tr class="even">
<td style="text-align: right;">0.29</td>
<td style="text-align: left;">Premium</td>
<td style="text-align: left;">I</td>
<td style="text-align: left;">VS2</td>
</tr>
<tr class="odd">
<td style="text-align: right;">0.31</td>
<td style="text-align: left;">Good</td>
<td style="text-align: left;">J</td>
<td style="text-align: left;">SI2</td>
</tr>
<tr class="even">
<td style="text-align: right;">0.24</td>
<td style="text-align: left;">Very Good</td>
<td style="text-align: left;">J</td>
<td style="text-align: left;">VVS2</td>
</tr>
</tbody>
</table>
</div>
</div>
</div>
<p>And again by omission:</p>
<div class="cell">
<details>
<summary>Code</summary>
<div class="sourceCode cell-code" id="cb17"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb17-1"><a href="#cb17-1" aria-hidden="true" tabindex="-1"></a>diamonds <span class="sc">%&gt;%</span> </span>
<span id="cb17-2"><a href="#cb17-2" aria-hidden="true" tabindex="-1"></a>    <span class="fu">select</span>(<span class="sc">-</span>carat<span class="sc">:-</span>clarity) <span class="sc">%&gt;%</span> </span>
<span id="cb17-3"><a href="#cb17-3" aria-hidden="true" tabindex="-1"></a>    <span class="fu">head</span>()</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</details>
<div class="cell-output-display">
<div class="kable-table">
<table class="table table-sm table-striped">
<thead>
<tr class="header">
<th style="text-align: right;">depth</th>
<th style="text-align: right;">table</th>
<th style="text-align: right;">price</th>
<th style="text-align: right;">x</th>
<th style="text-align: right;">y</th>
<th style="text-align: right;">z</th>
</tr>
</thead>
<tbody>
<tr class="odd">
<td style="text-align: right;">61.5</td>
<td style="text-align: right;">55</td>
<td style="text-align: right;">326</td>
<td style="text-align: right;">3.95</td>
<td style="text-align: right;">3.98</td>
<td style="text-align: right;">2.43</td>
</tr>
<tr class="even">
<td style="text-align: right;">59.8</td>
<td style="text-align: right;">61</td>
<td style="text-align: right;">326</td>
<td style="text-align: right;">3.89</td>
<td style="text-align: right;">3.84</td>
<td style="text-align: right;">2.31</td>
</tr>
<tr class="odd">
<td style="text-align: right;">56.9</td>
<td style="text-align: right;">65</td>
<td style="text-align: right;">327</td>
<td style="text-align: right;">4.05</td>
<td style="text-align: right;">4.07</td>
<td style="text-align: right;">2.31</td>
</tr>
<tr class="even">
<td style="text-align: right;">62.4</td>
<td style="text-align: right;">58</td>
<td style="text-align: right;">334</td>
<td style="text-align: right;">4.20</td>
<td style="text-align: right;">4.23</td>
<td style="text-align: right;">2.63</td>
</tr>
<tr class="odd">
<td style="text-align: right;">63.3</td>
<td style="text-align: right;">58</td>
<td style="text-align: right;">335</td>
<td style="text-align: right;">4.34</td>
<td style="text-align: right;">4.35</td>
<td style="text-align: right;">2.75</td>
</tr>
<tr class="even">
<td style="text-align: right;">62.8</td>
<td style="text-align: right;">57</td>
<td style="text-align: right;">336</td>
<td style="text-align: right;">3.94</td>
<td style="text-align: right;">3.96</td>
<td style="text-align: right;">2.48</td>
</tr>
</tbody>
</table>
</div>
</div>
</div>
<p>Very simple.</p>
</section>
<section id="mutating" class="level3">
<h3 class="anchored" data-anchor-id="mutating">Mutating</h3>
<p>What if we want to perform some sort of calculation or change the data in some way? This is the purpose of mutating…</p>
<p>In our dataset, we have the variables <code>x, y, z</code> which represent the length, width, and height of the diamond. If we pretend all the diamonds are cubes, we can calculate the cubic volume of each diamond by multiplying the dimensions of each diamond. Let’s do this:</p>
<div class="cell">
<details>
<summary>Code</summary>
<div class="sourceCode cell-code" id="cb18"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb18-1"><a href="#cb18-1" aria-hidden="true" tabindex="-1"></a>diamonds <span class="sc">%&gt;%</span> </span>
<span id="cb18-2"><a href="#cb18-2" aria-hidden="true" tabindex="-1"></a>    <span class="fu">select</span>(x<span class="sc">:</span>z) <span class="sc">%&gt;%</span> </span>
<span id="cb18-3"><a href="#cb18-3" aria-hidden="true" tabindex="-1"></a>    <span class="fu">mutate</span>(<span class="at">volume =</span> x <span class="sc">*</span> y <span class="sc">*</span> z) <span class="sc">%&gt;%</span> </span>
<span id="cb18-4"><a href="#cb18-4" aria-hidden="true" tabindex="-1"></a>    <span class="fu">head</span>()</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</details>
<div class="cell-output-display">
<div class="kable-table">
<table class="table table-sm table-striped">
<thead>
<tr class="header">
<th style="text-align: right;">x</th>
<th style="text-align: right;">y</th>
<th style="text-align: right;">z</th>
<th style="text-align: right;">volume</th>
</tr>
</thead>
<tbody>
<tr class="odd">
<td style="text-align: right;">3.95</td>
<td style="text-align: right;">3.98</td>
<td style="text-align: right;">2.43</td>
<td style="text-align: right;">38.20203</td>
</tr>
<tr class="even">
<td style="text-align: right;">3.89</td>
<td style="text-align: right;">3.84</td>
<td style="text-align: right;">2.31</td>
<td style="text-align: right;">34.50586</td>
</tr>
<tr class="odd">
<td style="text-align: right;">4.05</td>
<td style="text-align: right;">4.07</td>
<td style="text-align: right;">2.31</td>
<td style="text-align: right;">38.07688</td>
</tr>
<tr class="even">
<td style="text-align: right;">4.20</td>
<td style="text-align: right;">4.23</td>
<td style="text-align: right;">2.63</td>
<td style="text-align: right;">46.72458</td>
</tr>
<tr class="odd">
<td style="text-align: right;">4.34</td>
<td style="text-align: right;">4.35</td>
<td style="text-align: right;">2.75</td>
<td style="text-align: right;">51.91725</td>
</tr>
<tr class="even">
<td style="text-align: right;">3.94</td>
<td style="text-align: right;">3.96</td>
<td style="text-align: right;">2.48</td>
<td style="text-align: right;">38.69395</td>
</tr>
</tbody>
</table>
</div>
</div>
</div>
<p>Notice how <code>mutate()</code> is similar in structure to <code>summarize()</code>; first we tell R what we would like name our new variable/column (“volume”), and then we tell R how to calculate it.</p>
<p>Mutate can also change a current column:</p>
<div class="cell">
<details>
<summary>Code</summary>
<div class="sourceCode cell-code" id="cb19"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb19-1"><a href="#cb19-1" aria-hidden="true" tabindex="-1"></a>diamonds <span class="sc">%&gt;%</span> </span>
<span id="cb19-2"><a href="#cb19-2" aria-hidden="true" tabindex="-1"></a>    <span class="fu">mutate</span>(<span class="at">carat =</span> <span class="st">"Hello World"</span>) <span class="sc">%&gt;%</span> </span>
<span id="cb19-3"><a href="#cb19-3" aria-hidden="true" tabindex="-1"></a>    <span class="fu">head</span>()</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</details>
<div class="cell-output-display">
<div class="kable-table">
<table class="table table-sm table-striped">
<colgroup>
<col style="width: 17%">
<col style="width: 14%">
<col style="width: 8%">
<col style="width: 11%">
<col style="width: 8%">
<col style="width: 8%">
<col style="width: 8%">
<col style="width: 7%">
<col style="width: 7%">
<col style="width: 7%">
</colgroup>
<thead>
<tr class="header">
<th style="text-align: left;">carat</th>
<th style="text-align: left;">cut</th>
<th style="text-align: left;">color</th>
<th style="text-align: left;">clarity</th>
<th style="text-align: right;">depth</th>
<th style="text-align: right;">table</th>
<th style="text-align: right;">price</th>
<th style="text-align: right;">x</th>
<th style="text-align: right;">y</th>
<th style="text-align: right;">z</th>
</tr>
</thead>
<tbody>
<tr class="odd">
<td style="text-align: left;">Hello World</td>
<td style="text-align: left;">Ideal</td>
<td style="text-align: left;">E</td>
<td style="text-align: left;">SI2</td>
<td style="text-align: right;">61.5</td>
<td style="text-align: right;">55</td>
<td style="text-align: right;">326</td>
<td style="text-align: right;">3.95</td>
<td style="text-align: right;">3.98</td>
<td style="text-align: right;">2.43</td>
</tr>
<tr class="even">
<td style="text-align: left;">Hello World</td>
<td style="text-align: left;">Premium</td>
<td style="text-align: left;">E</td>
<td style="text-align: left;">SI1</td>
<td style="text-align: right;">59.8</td>
<td style="text-align: right;">61</td>
<td style="text-align: right;">326</td>
<td style="text-align: right;">3.89</td>
<td style="text-align: right;">3.84</td>
<td style="text-align: right;">2.31</td>
</tr>
<tr class="odd">
<td style="text-align: left;">Hello World</td>
<td style="text-align: left;">Good</td>
<td style="text-align: left;">E</td>
<td style="text-align: left;">VS1</td>
<td style="text-align: right;">56.9</td>
<td style="text-align: right;">65</td>
<td style="text-align: right;">327</td>
<td style="text-align: right;">4.05</td>
<td style="text-align: right;">4.07</td>
<td style="text-align: right;">2.31</td>
</tr>
<tr class="even">
<td style="text-align: left;">Hello World</td>
<td style="text-align: left;">Premium</td>
<td style="text-align: left;">I</td>
<td style="text-align: left;">VS2</td>
<td style="text-align: right;">62.4</td>
<td style="text-align: right;">58</td>
<td style="text-align: right;">334</td>
<td style="text-align: right;">4.20</td>
<td style="text-align: right;">4.23</td>
<td style="text-align: right;">2.63</td>
</tr>
<tr class="odd">
<td style="text-align: left;">Hello World</td>
<td style="text-align: left;">Good</td>
<td style="text-align: left;">J</td>
<td style="text-align: left;">SI2</td>
<td style="text-align: right;">63.3</td>
<td style="text-align: right;">58</td>
<td style="text-align: right;">335</td>
<td style="text-align: right;">4.34</td>
<td style="text-align: right;">4.35</td>
<td style="text-align: right;">2.75</td>
</tr>
<tr class="even">
<td style="text-align: left;">Hello World</td>
<td style="text-align: left;">Very Good</td>
<td style="text-align: left;">J</td>
<td style="text-align: left;">VVS2</td>
<td style="text-align: right;">62.8</td>
<td style="text-align: right;">57</td>
<td style="text-align: right;">336</td>
<td style="text-align: right;">3.94</td>
<td style="text-align: right;">3.96</td>
<td style="text-align: right;">2.48</td>
</tr>
</tbody>
</table>
</div>
</div>
</div>
<p>Now, all observations of carat are “Hello World”.</p>
</section>
</section>
<section id="basic-modeling" class="level2">
<h2 class="anchored" data-anchor-id="basic-modeling">Basic Modeling</h2>
<p>We will build a linear model to explain diamond prices. In R, the function to create a linear model is <code>lm()</code>:</p>
<div class="cell">
<details>
<summary>Code</summary>
<div class="sourceCode cell-code" id="cb20"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb20-1"><a href="#cb20-1" aria-hidden="true" tabindex="-1"></a>diamonds <span class="sc">%&gt;%</span> </span>
<span id="cb20-2"><a href="#cb20-2" aria-hidden="true" tabindex="-1"></a>    <span class="fu">lm</span>(<span class="at">formula =</span> price <span class="sc">~</span> carat) <span class="sc">%&gt;%</span> </span>
<span id="cb20-3"><a href="#cb20-3" aria-hidden="true" tabindex="-1"></a>    <span class="fu">summary</span>()</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</details>
<div class="cell-output cell-output-stdout">
<pre><code>
Call:
lm(formula = price ~ carat, data = .)

Residuals:
     Min       1Q   Median       3Q      Max 
-18585.3   -804.8    -18.9    537.4  12731.7 

Coefficients:
            Estimate Std. Error t value Pr(&gt;|t|)    
(Intercept) -2256.36      13.06  -172.8   &lt;2e-16 ***
carat        7756.43      14.07   551.4   &lt;2e-16 ***
---
Signif. codes:  0 '***' 0.001 '**' 0.01 '*' 0.05 '.' 0.1 ' ' 1

Residual standard error: 1549 on 53938 degrees of freedom
Multiple R-squared:  0.8493,    Adjusted R-squared:  0.8493 
F-statistic: 3.041e+05 on 1 and 53938 DF,  p-value: &lt; 2.2e-16</code></pre>
</div>
</div>
<p>We just built a linear model that regressed carat on diamond price. As you can see, we can use a diamond’s caratage to explain 85% of price variation. Our model also tells us that for every 1 unit increase in caratage, diamond prices increases by $7,756 on average.</p>
<p>However, I’m sure you will agree that the output is not visually pleasing. Moreover, it is not easy to manipulate since it is not in a tabular format.</p>
<p>Let’s, once again, stand on the shoulders of giants and utilize a tool that someone else has built to clean up the output. Just like you installed <code>tidyverse</code>, install the <code>broom</code> package by running <code>install.packages("broom")</code>. Then, load the package by running <code>library(broom)</code>.</p>
<div class="cell">
<details>
<summary>Code</summary>
<div class="sourceCode cell-code" id="cb22"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb22-1"><a href="#cb22-1" aria-hidden="true" tabindex="-1"></a><span class="fu">library</span>(broom)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</details>
</div>
<p>This time let’s regress price on all other variables and use the <code>tidy()</code> function from the broom package to tidy the output:</p>
<div class="cell">
<details>
<summary>Code</summary>
<div class="sourceCode cell-code" id="cb23"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb23-1"><a href="#cb23-1" aria-hidden="true" tabindex="-1"></a>diamonds <span class="sc">%&gt;%</span> </span>
<span id="cb23-2"><a href="#cb23-2" aria-hidden="true" tabindex="-1"></a>    <span class="fu">lm</span>(<span class="at">formula =</span> price <span class="sc">~</span> .) <span class="sc">%&gt;%</span> </span>
<span id="cb23-3"><a href="#cb23-3" aria-hidden="true" tabindex="-1"></a>    <span class="fu">summary</span>() <span class="sc">%&gt;%</span> </span>
<span id="cb23-4"><a href="#cb23-4" aria-hidden="true" tabindex="-1"></a>    <span class="fu">tidy</span>()</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</details>
<div class="cell-output-display">
<div class="kable-table">
<table class="table table-sm table-striped">
<thead>
<tr class="header">
<th style="text-align: left;">term</th>
<th style="text-align: right;">estimate</th>
<th style="text-align: right;">std.error</th>
<th style="text-align: right;">statistic</th>
<th style="text-align: right;">p.value</th>
</tr>
</thead>
<tbody>
<tr class="odd">
<td style="text-align: left;">(Intercept)</td>
<td style="text-align: right;">5753.761857</td>
<td style="text-align: right;">396.629824</td>
<td style="text-align: right;">14.5066294</td>
<td style="text-align: right;">0.0000000</td>
</tr>
<tr class="even">
<td style="text-align: left;">carat</td>
<td style="text-align: right;">11256.978307</td>
<td style="text-align: right;">48.627509</td>
<td style="text-align: right;">231.4940348</td>
<td style="text-align: right;">0.0000000</td>
</tr>
<tr class="odd">
<td style="text-align: left;">cut.L</td>
<td style="text-align: right;">584.457278</td>
<td style="text-align: right;">22.478150</td>
<td style="text-align: right;">26.0011290</td>
<td style="text-align: right;">0.0000000</td>
</tr>
<tr class="even">
<td style="text-align: left;">cut.Q</td>
<td style="text-align: right;">-301.908158</td>
<td style="text-align: right;">17.993919</td>
<td style="text-align: right;">-16.7783441</td>
<td style="text-align: right;">0.0000000</td>
</tr>
<tr class="odd">
<td style="text-align: left;">cut.C</td>
<td style="text-align: right;">148.034703</td>
<td style="text-align: right;">15.483328</td>
<td style="text-align: right;">9.5609097</td>
<td style="text-align: right;">0.0000000</td>
</tr>
<tr class="even">
<td style="text-align: left;">cut^4</td>
<td style="text-align: right;">-20.793893</td>
<td style="text-align: right;">12.376508</td>
<td style="text-align: right;">-1.6801098</td>
<td style="text-align: right;">0.0929418</td>
</tr>
<tr class="odd">
<td style="text-align: left;">color.L</td>
<td style="text-align: right;">-1952.160010</td>
<td style="text-align: right;">17.341767</td>
<td style="text-align: right;">-112.5698421</td>
<td style="text-align: right;">0.0000000</td>
</tr>
<tr class="even">
<td style="text-align: left;">color.Q</td>
<td style="text-align: right;">-672.053621</td>
<td style="text-align: right;">15.776995</td>
<td style="text-align: right;">-42.5970601</td>
<td style="text-align: right;">0.0000000</td>
</tr>
<tr class="odd">
<td style="text-align: left;">color.C</td>
<td style="text-align: right;">-165.282926</td>
<td style="text-align: right;">14.724927</td>
<td style="text-align: right;">-11.2247022</td>
<td style="text-align: right;">0.0000000</td>
</tr>
<tr class="even">
<td style="text-align: left;">color^4</td>
<td style="text-align: right;">38.195186</td>
<td style="text-align: right;">13.526539</td>
<td style="text-align: right;">2.8237221</td>
<td style="text-align: right;">0.0047487</td>
</tr>
<tr class="odd">
<td style="text-align: left;">color^5</td>
<td style="text-align: right;">-95.792932</td>
<td style="text-align: right;">12.776114</td>
<td style="text-align: right;">-7.4978145</td>
<td style="text-align: right;">0.0000000</td>
</tr>
<tr class="even">
<td style="text-align: left;">color^6</td>
<td style="text-align: right;">-48.466440</td>
<td style="text-align: right;">11.613917</td>
<td style="text-align: right;">-4.1731348</td>
<td style="text-align: right;">0.0000301</td>
</tr>
<tr class="odd">
<td style="text-align: left;">clarity.L</td>
<td style="text-align: right;">4097.431318</td>
<td style="text-align: right;">30.258596</td>
<td style="text-align: right;">135.4137965</td>
<td style="text-align: right;">0.0000000</td>
</tr>
<tr class="even">
<td style="text-align: left;">clarity.Q</td>
<td style="text-align: right;">-1925.004097</td>
<td style="text-align: right;">28.227228</td>
<td style="text-align: right;">-68.1967102</td>
<td style="text-align: right;">0.0000000</td>
</tr>
<tr class="odd">
<td style="text-align: left;">clarity.C</td>
<td style="text-align: right;">982.204550</td>
<td style="text-align: right;">24.151516</td>
<td style="text-align: right;">40.6684433</td>
<td style="text-align: right;">0.0000000</td>
</tr>
<tr class="even">
<td style="text-align: left;">clarity^4</td>
<td style="text-align: right;">-364.918493</td>
<td style="text-align: right;">19.285011</td>
<td style="text-align: right;">-18.9223900</td>
<td style="text-align: right;">0.0000000</td>
</tr>
<tr class="odd">
<td style="text-align: left;">clarity^5</td>
<td style="text-align: right;">233.563110</td>
<td style="text-align: right;">15.751700</td>
<td style="text-align: right;">14.8278029</td>
<td style="text-align: right;">0.0000000</td>
</tr>
<tr class="even">
<td style="text-align: left;">clarity^6</td>
<td style="text-align: right;">6.883492</td>
<td style="text-align: right;">13.715100</td>
<td style="text-align: right;">0.5018915</td>
<td style="text-align: right;">0.6157459</td>
</tr>
<tr class="odd">
<td style="text-align: left;">clarity^7</td>
<td style="text-align: right;">90.639737</td>
<td style="text-align: right;">12.103482</td>
<td style="text-align: right;">7.4887321</td>
<td style="text-align: right;">0.0000000</td>
</tr>
<tr class="even">
<td style="text-align: left;">depth</td>
<td style="text-align: right;">-63.806100</td>
<td style="text-align: right;">4.534554</td>
<td style="text-align: right;">-14.0710870</td>
<td style="text-align: right;">0.0000000</td>
</tr>
<tr class="odd">
<td style="text-align: left;">table</td>
<td style="text-align: right;">-26.474085</td>
<td style="text-align: right;">2.911655</td>
<td style="text-align: right;">-9.0924516</td>
<td style="text-align: right;">0.0000000</td>
</tr>
<tr class="even">
<td style="text-align: left;">x</td>
<td style="text-align: right;">-1008.261098</td>
<td style="text-align: right;">32.897748</td>
<td style="text-align: right;">-30.6483316</td>
<td style="text-align: right;">0.0000000</td>
</tr>
<tr class="odd">
<td style="text-align: left;">y</td>
<td style="text-align: right;">9.608887</td>
<td style="text-align: right;">19.332896</td>
<td style="text-align: right;">0.4970226</td>
<td style="text-align: right;">0.6191751</td>
</tr>
<tr class="even">
<td style="text-align: left;">z</td>
<td style="text-align: right;">-50.118891</td>
<td style="text-align: right;">33.486301</td>
<td style="text-align: right;">-1.4966983</td>
<td style="text-align: right;">0.1344776</td>
</tr>
</tbody>
</table>
</div>
</div>
</div>
<p>You will notice that I used ‘.’ to tell R ‘all other variables’ rather than type each of them out. More importantly, the output is much cleaner and easier to manipulate.</p>
<p>However, we cannot see the model’s accuracy. For this, we need to use the <code>glance()</code> function from broom:</p>
<div class="cell">
<details>
<summary>Code</summary>
<div class="sourceCode cell-code" id="cb24"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb24-1"><a href="#cb24-1" aria-hidden="true" tabindex="-1"></a>diamonds <span class="sc">%&gt;%</span> </span>
<span id="cb24-2"><a href="#cb24-2" aria-hidden="true" tabindex="-1"></a>    <span class="fu">lm</span>(<span class="at">formula =</span> price <span class="sc">~</span> .) <span class="sc">%&gt;%</span> </span>
<span id="cb24-3"><a href="#cb24-3" aria-hidden="true" tabindex="-1"></a>    <span class="fu">summary</span>() <span class="sc">%&gt;%</span> </span>
<span id="cb24-4"><a href="#cb24-4" aria-hidden="true" tabindex="-1"></a>    <span class="fu">glance</span>()</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</details>
<div class="cell-output-display">
<div class="kable-table">
<table class="table table-sm table-striped">
<colgroup>
<col style="width: 13%">
<col style="width: 19%">
<col style="width: 12%">
<col style="width: 13%">
<col style="width: 11%">
<col style="width: 4%">
<col style="width: 16%">
<col style="width: 8%">
</colgroup>
<thead>
<tr class="header">
<th style="text-align: right;">r.squared</th>
<th style="text-align: right;">adj.r.squared</th>
<th style="text-align: right;">sigma</th>
<th style="text-align: right;">statistic</th>
<th style="text-align: right;">p.value</th>
<th style="text-align: right;">df</th>
<th style="text-align: right;">df.residual</th>
<th style="text-align: right;">nobs</th>
</tr>
</thead>
<tbody>
<tr class="odd">
<td style="text-align: right;">0.9197915</td>
<td style="text-align: right;">0.9197573</td>
<td style="text-align: right;">1130.094</td>
<td style="text-align: right;">26881.83</td>
<td style="text-align: right;">0</td>
<td style="text-align: right;">23</td>
<td style="text-align: right;">53916</td>
<td style="text-align: right;">53940</td>
</tr>
</tbody>
</table>
</div>
</div>
</div>
<p>Now we have accuracy metrics in a nice format.</p>
<p>Lastly, if we would like to see the model’s fit for each observation, we can use the <code>augment()</code> function from broom (scroll to the right):</p>
<div class="cell">
<details>
<summary>Code</summary>
<div class="sourceCode cell-code" id="cb25"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb25-1"><a href="#cb25-1" aria-hidden="true" tabindex="-1"></a>diamonds <span class="sc">%&gt;%</span> </span>
<span id="cb25-2"><a href="#cb25-2" aria-hidden="true" tabindex="-1"></a>    <span class="fu">lm</span>(<span class="at">formula =</span> price <span class="sc">~</span> .) <span class="sc">%&gt;%</span> </span>
<span id="cb25-3"><a href="#cb25-3" aria-hidden="true" tabindex="-1"></a>    <span class="fu">augment</span>() <span class="sc">%&gt;%</span> </span>
<span id="cb25-4"><a href="#cb25-4" aria-hidden="true" tabindex="-1"></a>    <span class="fu">head</span>()</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</details>
<div class="cell-output-display">
<div class="kable-table">
<table class="table table-sm table-striped">
<colgroup>
<col style="width: 4%">
<col style="width: 4%">
<col style="width: 8%">
<col style="width: 4%">
<col style="width: 6%">
<col style="width: 4%">
<col style="width: 4%">
<col style="width: 4%">
<col style="width: 4%">
<col style="width: 4%">
<col style="width: 8%">
<col style="width: 8%">
<col style="width: 8%">
<col style="width: 7%">
<col style="width: 8%">
<col style="width: 8%">
</colgroup>
<thead>
<tr class="header">
<th style="text-align: right;">price</th>
<th style="text-align: right;">carat</th>
<th style="text-align: left;">cut</th>
<th style="text-align: left;">color</th>
<th style="text-align: left;">clarity</th>
<th style="text-align: right;">depth</th>
<th style="text-align: right;">table</th>
<th style="text-align: right;">x</th>
<th style="text-align: right;">y</th>
<th style="text-align: right;">z</th>
<th style="text-align: right;">.fitted</th>
<th style="text-align: right;">.resid</th>
<th style="text-align: right;">.hat</th>
<th style="text-align: right;">.sigma</th>
<th style="text-align: right;">.cooksd</th>
<th style="text-align: right;">.std.resid</th>
</tr>
</thead>
<tbody>
<tr class="odd">
<td style="text-align: right;">326</td>
<td style="text-align: right;">0.23</td>
<td style="text-align: left;">Ideal</td>
<td style="text-align: left;">E</td>
<td style="text-align: left;">SI2</td>
<td style="text-align: right;">61.5</td>
<td style="text-align: right;">55</td>
<td style="text-align: right;">3.95</td>
<td style="text-align: right;">3.98</td>
<td style="text-align: right;">2.43</td>
<td style="text-align: right;">-1346.3643</td>
<td style="text-align: right;">1672.3643</td>
<td style="text-align: right;">0.0003742</td>
<td style="text-align: right;">1130.082</td>
<td style="text-align: right;">0.0000342</td>
<td style="text-align: right;">1.4801217</td>
</tr>
<tr class="even">
<td style="text-align: right;">326</td>
<td style="text-align: right;">0.21</td>
<td style="text-align: left;">Premium</td>
<td style="text-align: left;">E</td>
<td style="text-align: left;">SI1</td>
<td style="text-align: right;">59.8</td>
<td style="text-align: right;">61</td>
<td style="text-align: right;">3.89</td>
<td style="text-align: right;">3.84</td>
<td style="text-align: right;">2.31</td>
<td style="text-align: right;">-664.5954</td>
<td style="text-align: right;">990.5954</td>
<td style="text-align: right;">0.0004133</td>
<td style="text-align: right;">1130.097</td>
<td style="text-align: right;">0.0000132</td>
<td style="text-align: right;">0.8767411</td>
</tr>
<tr class="odd">
<td style="text-align: right;">327</td>
<td style="text-align: right;">0.23</td>
<td style="text-align: left;">Good</td>
<td style="text-align: left;">E</td>
<td style="text-align: left;">VS1</td>
<td style="text-align: right;">56.9</td>
<td style="text-align: right;">65</td>
<td style="text-align: right;">4.05</td>
<td style="text-align: right;">4.07</td>
<td style="text-align: right;">2.31</td>
<td style="text-align: right;">211.1071</td>
<td style="text-align: right;">115.8929</td>
<td style="text-align: right;">0.0009098</td>
<td style="text-align: right;">1130.105</td>
<td style="text-align: right;">0.0000004</td>
<td style="text-align: right;">0.1025982</td>
</tr>
<tr class="even">
<td style="text-align: right;">334</td>
<td style="text-align: right;">0.29</td>
<td style="text-align: left;">Premium</td>
<td style="text-align: left;">I</td>
<td style="text-align: left;">VS2</td>
<td style="text-align: right;">62.4</td>
<td style="text-align: right;">58</td>
<td style="text-align: right;">4.20</td>
<td style="text-align: right;">4.23</td>
<td style="text-align: right;">2.63</td>
<td style="text-align: right;">-830.7372</td>
<td style="text-align: right;">1164.7372</td>
<td style="text-align: right;">0.0004062</td>
<td style="text-align: right;">1130.094</td>
<td style="text-align: right;">0.0000180</td>
<td style="text-align: right;">1.0308641</td>
</tr>
<tr class="odd">
<td style="text-align: right;">335</td>
<td style="text-align: right;">0.31</td>
<td style="text-align: left;">Good</td>
<td style="text-align: left;">J</td>
<td style="text-align: left;">SI2</td>
<td style="text-align: right;">63.3</td>
<td style="text-align: right;">58</td>
<td style="text-align: right;">4.34</td>
<td style="text-align: right;">4.35</td>
<td style="text-align: right;">2.75</td>
<td style="text-align: right;">-3459.2242</td>
<td style="text-align: right;">3794.2242</td>
<td style="text-align: right;">0.0007715</td>
<td style="text-align: right;">1129.987</td>
<td style="text-align: right;">0.0003629</td>
<td style="text-align: right;">3.3587358</td>
</tr>
<tr class="even">
<td style="text-align: right;">336</td>
<td style="text-align: right;">0.24</td>
<td style="text-align: left;">Very Good</td>
<td style="text-align: left;">J</td>
<td style="text-align: left;">VVS2</td>
<td style="text-align: right;">62.8</td>
<td style="text-align: right;">57</td>
<td style="text-align: right;">3.94</td>
<td style="text-align: right;">3.96</td>
<td style="text-align: right;">2.48</td>
<td style="text-align: right;">-1380.4876</td>
<td style="text-align: right;">1716.4876</td>
<td style="text-align: right;">0.0007230</td>
<td style="text-align: right;">1130.081</td>
<td style="text-align: right;">0.0000696</td>
<td style="text-align: right;">1.5194380</td>
</tr>
</tbody>
</table>
</div>
</div>
</div>
<p><em>The broom package is so useful because it cleans up model output, but more importantly, it can be used with many other (more complex) models.</em></p>
</section>
<section id="visualizing-data" class="level2">
<h2 class="anchored" data-anchor-id="visualizing-data">Visualizing Data</h2>
<p>Being able to visualize data is <em>essential</em> for understanding it; the famous saying “a picture is worth a thousands words” is doubly true in today’s age.</p>
<p>Let’s start out by plotting diamond price against caratage.</p>
<section id="creating-a-canvas" class="level3">
<h3 class="anchored" data-anchor-id="creating-a-canvas">Creating a Canvas</h3>
<p>First we need to create a canvas with the <code>ggplot()</code> function:</p>
<div class="cell">
<details>
<summary>Code</summary>
<div class="sourceCode cell-code" id="cb26"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb26-1"><a href="#cb26-1" aria-hidden="true" tabindex="-1"></a>diamonds <span class="sc">%&gt;%</span> </span>
<span id="cb26-2"><a href="#cb26-2" aria-hidden="true" tabindex="-1"></a>    <span class="fu">ggplot</span>(<span class="fu">aes</span>(<span class="at">x =</span> carat, <span class="at">y =</span> price))</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</details>
<div class="cell-output-display">
<p><img src="index_files/figure-html/unnamed-chunk-25-1.png" class="img-fluid" width="672"></p>
</div>
</div>
<p>Notice that we start with the <code>diamonds</code> dataset <em>and then</em> we create a canvas with the <code>ggplot()</code> function. The <code>aes()</code> function stands for aesthetic and allows us to pick which variables/columns we want to use in our plot. In this case we tell R that we want to plot <code>carat</code> on the x-axis and <code>price</code> on the y-axis.</p>
</section>
<section id="adding-geoms" class="level3">
<h3 class="anchored" data-anchor-id="adding-geoms">Adding Geoms</h3>
<p>In our plot we would like to add dots that represent each data point. In R adding these elements are called <em>geometries</em> (i.e.&nbsp;geoms):</p>
<div class="cell">
<details>
<summary>Code</summary>
<div class="sourceCode cell-code" id="cb27"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb27-1"><a href="#cb27-1" aria-hidden="true" tabindex="-1"></a>diamonds <span class="sc">%&gt;%</span> </span>
<span id="cb27-2"><a href="#cb27-2" aria-hidden="true" tabindex="-1"></a>    <span class="fu">ggplot</span>(<span class="fu">aes</span>(<span class="at">x =</span> carat, <span class="at">y =</span> price)) <span class="sc">+</span></span>
<span id="cb27-3"><a href="#cb27-3" aria-hidden="true" tabindex="-1"></a>    <span class="fu">geom_point</span>()</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</details>
<div class="cell-output-display">
<p><img src="index_files/figure-html/unnamed-chunk-26-1.png" class="img-fluid" width="672"></p>
</div>
</div>
<p>Notice how when creating plots with ggplot, we can no longer use the pipe (<code>%&gt;%</code>). Instead, we use a <code>+</code> sign to add layers to the plot.</p>
<p>From our plot we can tell that there is a clear positive relationship between price and caratage.</p>
</section>
<section id="modifying-geoms" class="level3">
<h3 class="anchored" data-anchor-id="modifying-geoms">Modifying Geoms</h3>
<p>Our plot contains so many points and it is overwhelming; let’s modify the plot so that the points are more transparent with the <code>alpha</code> argument of <code>geom_point()</code>.</p>
<div class="cell">
<details>
<summary>Code</summary>
<div class="sourceCode cell-code" id="cb28"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb28-1"><a href="#cb28-1" aria-hidden="true" tabindex="-1"></a>diamonds <span class="sc">%&gt;%</span> </span>
<span id="cb28-2"><a href="#cb28-2" aria-hidden="true" tabindex="-1"></a>    <span class="fu">ggplot</span>(<span class="fu">aes</span>(<span class="at">x =</span> carat, <span class="at">y =</span> price)) <span class="sc">+</span></span>
<span id="cb28-3"><a href="#cb28-3" aria-hidden="true" tabindex="-1"></a>    <span class="fu">geom_point</span>(<span class="at">alpha =</span> .<span class="dv">15</span>, <span class="at">color =</span> <span class="st">"midnightblue"</span>) <span class="sc">+</span></span>
<span id="cb28-4"><a href="#cb28-4" aria-hidden="true" tabindex="-1"></a>    <span class="fu">geom_smooth</span>()</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</details>
<div class="cell-output-display">
<p><img src="index_files/figure-html/unnamed-chunk-27-1.png" class="img-fluid" width="672"></p>
</div>
</div>
<p>You will notice that the points are more transparent and that we also modified their color. We also included a smoother line with <code>geom_smooth()</code>.</p>
</section>
<section id="adding-aesthetics" class="level3">
<h3 class="anchored" data-anchor-id="adding-aesthetics">Adding Aesthetics</h3>
<p>Up to now our plot has had only 2 aesthetics (x and y). But, all of the arguments that can be passed to geoms (<code>alpha</code>, <code>color</code>, etc.) are actually aesthetics that can be passed in the main <code>aes()</code> function. This probably sounds confusing but the following code will make much more sense:</p>
<div class="cell">
<details>
<summary>Code</summary>
<div class="sourceCode cell-code" id="cb29"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb29-1"><a href="#cb29-1" aria-hidden="true" tabindex="-1"></a>diamonds <span class="sc">%&gt;%</span> </span>
<span id="cb29-2"><a href="#cb29-2" aria-hidden="true" tabindex="-1"></a>    <span class="fu">ggplot</span>(<span class="fu">aes</span>(<span class="at">x =</span> carat, <span class="at">y =</span> price, <span class="at">color =</span> cut)) <span class="sc">+</span></span>
<span id="cb29-3"><a href="#cb29-3" aria-hidden="true" tabindex="-1"></a>    <span class="fu">geom_point</span>(<span class="at">alpha =</span> .<span class="dv">15</span>) <span class="sc">+</span></span>
<span id="cb29-4"><a href="#cb29-4" aria-hidden="true" tabindex="-1"></a>    <span class="fu">geom_smooth</span>()</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</details>
<div class="cell-output-display">
<p><img src="index_files/figure-html/unnamed-chunk-28-1.png" class="img-fluid" width="672"></p>
</div>
</div>
<p>You will notice that instead of locally changing the <code>color</code> argument in the <code>geom_point()</code> function, we have put in the main <code>aes()</code> function wherein we set it equal to <code>cut</code>. By doing this, we are telling R that the color of each geometry should be defined by the cut variable/column.</p>
</section>
<section id="faceting" class="level3">
<h3 class="anchored" data-anchor-id="faceting">Faceting</h3>
<p>Our plot is overwhelming with all the different colors on one canvas so lets create a faceted canvas… Rather than explain in words, the following code should be self evident:</p>
<div class="cell">
<details>
<summary>Code</summary>
<div class="sourceCode cell-code" id="cb30"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb30-1"><a href="#cb30-1" aria-hidden="true" tabindex="-1"></a>diamonds <span class="sc">%&gt;%</span> </span>
<span id="cb30-2"><a href="#cb30-2" aria-hidden="true" tabindex="-1"></a>    <span class="fu">ggplot</span>(<span class="fu">aes</span>(<span class="at">x =</span> carat, <span class="at">y =</span> price, <span class="at">color =</span> cut)) <span class="sc">+</span></span>
<span id="cb30-3"><a href="#cb30-3" aria-hidden="true" tabindex="-1"></a>    <span class="fu">geom_point</span>(<span class="at">alpha =</span> .<span class="dv">15</span>) <span class="sc">+</span></span>
<span id="cb30-4"><a href="#cb30-4" aria-hidden="true" tabindex="-1"></a>    <span class="fu">geom_smooth</span>() <span class="sc">+</span></span>
<span id="cb30-5"><a href="#cb30-5" aria-hidden="true" tabindex="-1"></a>    <span class="fu">facet_wrap</span>(<span class="sc">~</span>cut)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</details>
<div class="cell-output-display">
<p><img src="index_files/figure-html/unnamed-chunk-29-1.png" class="img-fluid" width="672"></p>
</div>
</div>
<p>This is called a faceted plot because we have created facets according to the cut variable/column. You will note that we need to put a <code>~</code> before the specified variable; this is just how the facet_wrap function works.</p>
<p>We can also decide to facet according to some other variables, like so:</p>
<div class="cell">
<details>
<summary>Code</summary>
<div class="sourceCode cell-code" id="cb31"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb31-1"><a href="#cb31-1" aria-hidden="true" tabindex="-1"></a>diamonds <span class="sc">%&gt;%</span> </span>
<span id="cb31-2"><a href="#cb31-2" aria-hidden="true" tabindex="-1"></a>    <span class="fu">ggplot</span>(<span class="fu">aes</span>(<span class="at">x =</span> carat, <span class="at">y =</span> price, <span class="at">color =</span> cut)) <span class="sc">+</span></span>
<span id="cb31-3"><a href="#cb31-3" aria-hidden="true" tabindex="-1"></a>    <span class="fu">geom_point</span>(<span class="at">alpha =</span> .<span class="dv">15</span>) <span class="sc">+</span></span>
<span id="cb31-4"><a href="#cb31-4" aria-hidden="true" tabindex="-1"></a>    <span class="fu">geom_smooth</span>() <span class="sc">+</span></span>
<span id="cb31-5"><a href="#cb31-5" aria-hidden="true" tabindex="-1"></a>    <span class="fu">facet_wrap</span>(<span class="sc">~</span>clarity, <span class="at">scales =</span> <span class="st">"free"</span>)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</details>
<div class="cell-output-display">
<p><img src="index_files/figure-html/unnamed-chunk-30-1.png" class="img-fluid" width="672"></p>
</div>
</div>
<p>You will notice that I also supplied the <code>scales</code> argument within the <code>facet_wrap()</code> function which allows each faceted plot to have different x and y scales that fit accordingly. Compare the x and y axes of the ‘VS1’ plot with those of the ‘VVS2’. They have different scales.</p>
</section>
<section id="adding-labels" class="level3">
<h3 class="anchored" data-anchor-id="adding-labels">Adding Labels</h3>
<p>Let’s add labels to our plot…</p>
<div class="cell">
<details>
<summary>Code</summary>
<div class="sourceCode cell-code" id="cb32"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb32-1"><a href="#cb32-1" aria-hidden="true" tabindex="-1"></a>diamonds <span class="sc">%&gt;%</span> </span>
<span id="cb32-2"><a href="#cb32-2" aria-hidden="true" tabindex="-1"></a>    <span class="fu">ggplot</span>(<span class="fu">aes</span>(<span class="at">x =</span> carat, <span class="at">y =</span> price, <span class="at">color =</span> cut)) <span class="sc">+</span></span>
<span id="cb32-3"><a href="#cb32-3" aria-hidden="true" tabindex="-1"></a>    <span class="fu">geom_point</span>(<span class="at">alpha =</span> .<span class="dv">15</span>) <span class="sc">+</span></span>
<span id="cb32-4"><a href="#cb32-4" aria-hidden="true" tabindex="-1"></a>    <span class="fu">geom_smooth</span>() <span class="sc">+</span></span>
<span id="cb32-5"><a href="#cb32-5" aria-hidden="true" tabindex="-1"></a>    <span class="fu">facet_wrap</span>(<span class="sc">~</span>cut) <span class="sc">+</span></span>
<span id="cb32-6"><a href="#cb32-6" aria-hidden="true" tabindex="-1"></a>    <span class="fu">labs</span>(</span>
<span id="cb32-7"><a href="#cb32-7" aria-hidden="true" tabindex="-1"></a>        <span class="at">title =</span> <span class="st">"Price vs. Carat"</span>,</span>
<span id="cb32-8"><a href="#cb32-8" aria-hidden="true" tabindex="-1"></a>        <span class="at">subtitle =</span> <span class="st">"ggplot makes plotting so easy..."</span>,</span>
<span id="cb32-9"><a href="#cb32-9" aria-hidden="true" tabindex="-1"></a>        <span class="at">y =</span> <span class="st">"Price (in $)"</span>,</span>
<span id="cb32-10"><a href="#cb32-10" aria-hidden="true" tabindex="-1"></a>        <span class="at">x =</span> <span class="st">"Carat"</span>,</span>
<span id="cb32-11"><a href="#cb32-11" aria-hidden="true" tabindex="-1"></a>        <span class="at">caption =</span> <span class="st">"This is a great-looking plot"</span></span>
<span id="cb32-12"><a href="#cb32-12" aria-hidden="true" tabindex="-1"></a>    )</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</details>
<div class="cell-output-display">
<p><img src="index_files/figure-html/unnamed-chunk-31-1.png" class="img-fluid" width="672"></p>
</div>
</div>
</section>
<section id="changing-theme" class="level3">
<h3 class="anchored" data-anchor-id="changing-theme">Changing Theme</h3>
<p>R has some preset plotting themes…</p>
<div class="cell">
<details>
<summary>Code</summary>
<div class="sourceCode cell-code" id="cb33"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb33-1"><a href="#cb33-1" aria-hidden="true" tabindex="-1"></a>diamonds <span class="sc">%&gt;%</span> </span>
<span id="cb33-2"><a href="#cb33-2" aria-hidden="true" tabindex="-1"></a>    <span class="fu">ggplot</span>(<span class="fu">aes</span>(<span class="at">x =</span> carat, <span class="at">y =</span> price, <span class="at">color =</span> cut)) <span class="sc">+</span></span>
<span id="cb33-3"><a href="#cb33-3" aria-hidden="true" tabindex="-1"></a>    <span class="fu">geom_point</span>(<span class="at">alpha =</span> .<span class="dv">15</span>) <span class="sc">+</span></span>
<span id="cb33-4"><a href="#cb33-4" aria-hidden="true" tabindex="-1"></a>    <span class="fu">geom_smooth</span>() <span class="sc">+</span></span>
<span id="cb33-5"><a href="#cb33-5" aria-hidden="true" tabindex="-1"></a>    <span class="fu">facet_wrap</span>(<span class="sc">~</span>cut) <span class="sc">+</span></span>
<span id="cb33-6"><a href="#cb33-6" aria-hidden="true" tabindex="-1"></a>    <span class="fu">labs</span>(</span>
<span id="cb33-7"><a href="#cb33-7" aria-hidden="true" tabindex="-1"></a>        <span class="at">title =</span> <span class="st">"Price vs. Carat"</span>,</span>
<span id="cb33-8"><a href="#cb33-8" aria-hidden="true" tabindex="-1"></a>        <span class="at">subtitle =</span> <span class="st">"ggplot makes plotting so easy..."</span>,</span>
<span id="cb33-9"><a href="#cb33-9" aria-hidden="true" tabindex="-1"></a>        <span class="at">y =</span> <span class="st">"Price (in $)"</span>,</span>
<span id="cb33-10"><a href="#cb33-10" aria-hidden="true" tabindex="-1"></a>        <span class="at">x =</span> <span class="st">"Carat"</span>,</span>
<span id="cb33-11"><a href="#cb33-11" aria-hidden="true" tabindex="-1"></a>        <span class="at">caption =</span> <span class="st">"This is a great-looking plot"</span></span>
<span id="cb33-12"><a href="#cb33-12" aria-hidden="true" tabindex="-1"></a>    ) <span class="sc">+</span></span>
<span id="cb33-13"><a href="#cb33-13" aria-hidden="true" tabindex="-1"></a>    <span class="fu">theme_bw</span>()</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</details>
<div class="cell-output-display">
<p><img src="index_files/figure-html/unnamed-chunk-32-1.png" class="img-fluid" width="672"></p>
</div>
</div>
<div class="cell">
<details>
<summary>Code</summary>
<div class="sourceCode cell-code" id="cb34"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb34-1"><a href="#cb34-1" aria-hidden="true" tabindex="-1"></a>diamonds <span class="sc">%&gt;%</span> </span>
<span id="cb34-2"><a href="#cb34-2" aria-hidden="true" tabindex="-1"></a>    <span class="fu">ggplot</span>(<span class="fu">aes</span>(<span class="at">x =</span> carat, <span class="at">y =</span> price, <span class="at">color =</span> cut)) <span class="sc">+</span></span>
<span id="cb34-3"><a href="#cb34-3" aria-hidden="true" tabindex="-1"></a>    <span class="fu">geom_point</span>(<span class="at">alpha =</span> .<span class="dv">15</span>) <span class="sc">+</span></span>
<span id="cb34-4"><a href="#cb34-4" aria-hidden="true" tabindex="-1"></a>    <span class="fu">geom_smooth</span>() <span class="sc">+</span></span>
<span id="cb34-5"><a href="#cb34-5" aria-hidden="true" tabindex="-1"></a>    <span class="fu">facet_wrap</span>(<span class="sc">~</span>cut) <span class="sc">+</span></span>
<span id="cb34-6"><a href="#cb34-6" aria-hidden="true" tabindex="-1"></a>    <span class="fu">labs</span>(</span>
<span id="cb34-7"><a href="#cb34-7" aria-hidden="true" tabindex="-1"></a>        <span class="at">title =</span> <span class="st">"Price vs. Carat"</span>,</span>
<span id="cb34-8"><a href="#cb34-8" aria-hidden="true" tabindex="-1"></a>        <span class="at">subtitle =</span> <span class="st">"ggplot makes plotting so easy..."</span>,</span>
<span id="cb34-9"><a href="#cb34-9" aria-hidden="true" tabindex="-1"></a>        <span class="at">y =</span> <span class="st">"Price (in $)"</span>,</span>
<span id="cb34-10"><a href="#cb34-10" aria-hidden="true" tabindex="-1"></a>        <span class="at">x =</span> <span class="st">"Carat"</span>,</span>
<span id="cb34-11"><a href="#cb34-11" aria-hidden="true" tabindex="-1"></a>        <span class="at">caption =</span> <span class="st">"This is a great-looking plot"</span></span>
<span id="cb34-12"><a href="#cb34-12" aria-hidden="true" tabindex="-1"></a>    ) <span class="sc">+</span></span>
<span id="cb34-13"><a href="#cb34-13" aria-hidden="true" tabindex="-1"></a>    <span class="fu">theme_linedraw</span>()</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</details>
<div class="cell-output-display">
<p><img src="index_files/figure-html/unnamed-chunk-33-1.png" class="img-fluid" width="672"></p>
</div>
</div>
<p>…there are several others.</p>
</section>
<section id="modifying-scales" class="level3">
<h3 class="anchored" data-anchor-id="modifying-scales">Modifying Scales</h3>
<div class="cell">
<details>
<summary>Code</summary>
<div class="sourceCode cell-code" id="cb35"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb35-1"><a href="#cb35-1" aria-hidden="true" tabindex="-1"></a>diamonds <span class="sc">%&gt;%</span> </span>
<span id="cb35-2"><a href="#cb35-2" aria-hidden="true" tabindex="-1"></a>    <span class="fu">ggplot</span>(<span class="fu">aes</span>(<span class="at">x =</span> carat, <span class="at">y =</span> price, <span class="at">color =</span> cut)) <span class="sc">+</span></span>
<span id="cb35-3"><a href="#cb35-3" aria-hidden="true" tabindex="-1"></a>    <span class="fu">geom_point</span>(<span class="at">alpha =</span> .<span class="dv">15</span>) <span class="sc">+</span></span>
<span id="cb35-4"><a href="#cb35-4" aria-hidden="true" tabindex="-1"></a>    <span class="fu">geom_smooth</span>() <span class="sc">+</span></span>
<span id="cb35-5"><a href="#cb35-5" aria-hidden="true" tabindex="-1"></a>    <span class="fu">facet_wrap</span>(<span class="sc">~</span>cut) <span class="sc">+</span></span>
<span id="cb35-6"><a href="#cb35-6" aria-hidden="true" tabindex="-1"></a>    <span class="fu">labs</span>(</span>
<span id="cb35-7"><a href="#cb35-7" aria-hidden="true" tabindex="-1"></a>        <span class="at">title =</span> <span class="st">"Price vs. Carat"</span>,</span>
<span id="cb35-8"><a href="#cb35-8" aria-hidden="true" tabindex="-1"></a>        <span class="at">subtitle =</span> <span class="st">"ggplot makes plotting so easy..."</span>,</span>
<span id="cb35-9"><a href="#cb35-9" aria-hidden="true" tabindex="-1"></a>        <span class="at">y =</span> <span class="st">"Price (in $)"</span>,</span>
<span id="cb35-10"><a href="#cb35-10" aria-hidden="true" tabindex="-1"></a>        <span class="at">x =</span> <span class="st">"Carat"</span>,</span>
<span id="cb35-11"><a href="#cb35-11" aria-hidden="true" tabindex="-1"></a>        <span class="at">caption =</span> <span class="st">"This is a great-looking plot"</span></span>
<span id="cb35-12"><a href="#cb35-12" aria-hidden="true" tabindex="-1"></a>    ) <span class="sc">+</span></span>
<span id="cb35-13"><a href="#cb35-13" aria-hidden="true" tabindex="-1"></a>    <span class="fu">theme_bw</span>() <span class="sc">+</span></span>
<span id="cb35-14"><a href="#cb35-14" aria-hidden="true" tabindex="-1"></a>    <span class="fu">scale_y_continuous</span>(<span class="at">labels =</span> scales<span class="sc">::</span><span class="fu">dollar_format</span>())</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</details>
<div class="cell-output-display">
<p><img src="index_files/figure-html/unnamed-chunk-34-1.png" class="img-fluid" width="672"></p>
</div>
</div>
<p>Notice we converted the axis/scale on the plot to a dollar format…</p>
</section>
<section id="example-of-more-plots" class="level3">
<h3 class="anchored" data-anchor-id="example-of-more-plots">Example of More Plots</h3>
<p>With these basic tools, you now have the ability to create so many different types of plots to gain insights from your data.</p>
<p>Here are a few more plots with code to give you a flavor…</p>
<div class="cell">
<details>
<summary>Code</summary>
<div class="sourceCode cell-code" id="cb36"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb36-1"><a href="#cb36-1" aria-hidden="true" tabindex="-1"></a>diamonds <span class="sc">%&gt;%</span> </span>
<span id="cb36-2"><a href="#cb36-2" aria-hidden="true" tabindex="-1"></a>    <span class="fu">ggplot</span>(<span class="fu">aes</span>(price, <span class="at">fill =</span> cut)) <span class="sc">+</span></span>
<span id="cb36-3"><a href="#cb36-3" aria-hidden="true" tabindex="-1"></a>    <span class="fu">geom_histogram</span>() <span class="sc">+</span></span>
<span id="cb36-4"><a href="#cb36-4" aria-hidden="true" tabindex="-1"></a>    <span class="fu">theme_bw</span>()</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</details>
<div class="cell-output-display">
<p><img src="index_files/figure-html/unnamed-chunk-35-1.png" class="img-fluid" width="672"></p>
</div>
</div>
<div class="cell">
<details>
<summary>Code</summary>
<div class="sourceCode cell-code" id="cb37"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb37-1"><a href="#cb37-1" aria-hidden="true" tabindex="-1"></a>diamonds <span class="sc">%&gt;%</span> </span>
<span id="cb37-2"><a href="#cb37-2" aria-hidden="true" tabindex="-1"></a>    <span class="fu">ggplot</span>(<span class="fu">aes</span>(price, <span class="at">fill =</span> cut)) <span class="sc">+</span></span>
<span id="cb37-3"><a href="#cb37-3" aria-hidden="true" tabindex="-1"></a>    <span class="fu">geom_histogram</span>(<span class="at">position =</span> <span class="st">"dodge"</span>) <span class="sc">+</span></span>
<span id="cb37-4"><a href="#cb37-4" aria-hidden="true" tabindex="-1"></a>    <span class="fu">theme_bw</span>() <span class="sc">+</span></span>
<span id="cb37-5"><a href="#cb37-5" aria-hidden="true" tabindex="-1"></a>    <span class="fu">scale_fill_brewer</span>()</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</details>
<div class="cell-output-display">
<p><img src="index_files/figure-html/unnamed-chunk-36-1.png" class="img-fluid" width="672"></p>
</div>
</div>
<div class="cell">
<details>
<summary>Code</summary>
<div class="sourceCode cell-code" id="cb38"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb38-1"><a href="#cb38-1" aria-hidden="true" tabindex="-1"></a>diamonds <span class="sc">%&gt;%</span> </span>
<span id="cb38-2"><a href="#cb38-2" aria-hidden="true" tabindex="-1"></a>    <span class="fu">ggplot</span>(<span class="fu">aes</span>(price, <span class="at">fill =</span> cut)) <span class="sc">+</span></span>
<span id="cb38-3"><a href="#cb38-3" aria-hidden="true" tabindex="-1"></a>    <span class="fu">geom_density</span>() <span class="sc">+</span></span>
<span id="cb38-4"><a href="#cb38-4" aria-hidden="true" tabindex="-1"></a>    <span class="fu">theme_bw</span>() <span class="sc">+</span></span>
<span id="cb38-5"><a href="#cb38-5" aria-hidden="true" tabindex="-1"></a>    <span class="fu">scale_fill_brewer</span>() <span class="sc">+</span></span>
<span id="cb38-6"><a href="#cb38-6" aria-hidden="true" tabindex="-1"></a>    <span class="fu">facet_wrap</span>(<span class="sc">~</span>cut)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</details>
<div class="cell-output-display">
<p><img src="index_files/figure-html/unnamed-chunk-37-1.png" class="img-fluid" width="672"></p>
</div>
</div>
<p>There are other packages that help with creating nice plots… install and load <code>ggridges</code>.</p>
<div class="cell">
<details>
<summary>Code</summary>
<div class="sourceCode cell-code" id="cb39"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb39-1"><a href="#cb39-1" aria-hidden="true" tabindex="-1"></a><span class="fu">library</span>(ggridges)</span>
<span id="cb39-2"><a href="#cb39-2" aria-hidden="true" tabindex="-1"></a>diamonds <span class="sc">%&gt;%</span> </span>
<span id="cb39-3"><a href="#cb39-3" aria-hidden="true" tabindex="-1"></a>    <span class="fu">ggplot</span>(<span class="fu">aes</span>(<span class="at">x =</span> price, <span class="at">y =</span> cut, <span class="at">fill =</span> <span class="fu">stat</span>(x))) <span class="sc">+</span></span>
<span id="cb39-4"><a href="#cb39-4" aria-hidden="true" tabindex="-1"></a>    <span class="fu">geom_density_ridges_gradient</span>(<span class="at">scale =</span> <span class="dv">2</span>) <span class="sc">+</span></span>
<span id="cb39-5"><a href="#cb39-5" aria-hidden="true" tabindex="-1"></a>    <span class="fu">scale_fill_viridis_c</span>(<span class="at">name =</span> <span class="st">"Price (in $)"</span>, <span class="at">option =</span> <span class="st">"C"</span>) <span class="sc">+</span></span>
<span id="cb39-6"><a href="#cb39-6" aria-hidden="true" tabindex="-1"></a>    <span class="fu">theme_minimal</span>() <span class="sc">+</span></span>
<span id="cb39-7"><a href="#cb39-7" aria-hidden="true" tabindex="-1"></a>    <span class="fu">scale_x_continuous</span>(<span class="at">labels =</span> scales<span class="sc">::</span><span class="fu">dollar_format</span>())</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</details>
<div class="cell-output-display">
<p><img src="index_files/figure-html/unnamed-chunk-38-1.png" class="img-fluid" width="672"></p>
</div>
</div>
<div class="cell">
<details>
<summary>Code</summary>
<div class="sourceCode cell-code" id="cb40"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb40-1"><a href="#cb40-1" aria-hidden="true" tabindex="-1"></a>diamonds <span class="sc">%&gt;%</span> </span>
<span id="cb40-2"><a href="#cb40-2" aria-hidden="true" tabindex="-1"></a>    <span class="fu">ggplot</span>(<span class="fu">aes</span>(<span class="at">x =</span> price, <span class="at">y =</span> cut, <span class="at">fill =</span> <span class="fu">factor</span>(<span class="fu">stat</span>(quantile)))) <span class="sc">+</span></span>
<span id="cb40-3"><a href="#cb40-3" aria-hidden="true" tabindex="-1"></a>    <span class="fu">stat_density_ridges</span>(</span>
<span id="cb40-4"><a href="#cb40-4" aria-hidden="true" tabindex="-1"></a>        <span class="at">geom =</span> <span class="st">"density_ridges_gradient"</span>, <span class="at">calc_ecdf =</span> <span class="cn">TRUE</span>,</span>
<span id="cb40-5"><a href="#cb40-5" aria-hidden="true" tabindex="-1"></a>        <span class="at">quantiles =</span> <span class="dv">4</span>, <span class="at">quantile_lines =</span> <span class="cn">TRUE</span></span>
<span id="cb40-6"><a href="#cb40-6" aria-hidden="true" tabindex="-1"></a>    ) <span class="sc">+</span></span>
<span id="cb40-7"><a href="#cb40-7" aria-hidden="true" tabindex="-1"></a>    <span class="fu">scale_fill_brewer</span>() <span class="sc">+</span></span>
<span id="cb40-8"><a href="#cb40-8" aria-hidden="true" tabindex="-1"></a>    <span class="fu">theme_linedraw</span>() <span class="sc">+</span></span>
<span id="cb40-9"><a href="#cb40-9" aria-hidden="true" tabindex="-1"></a>    <span class="fu">scale_x_continuous</span>(<span class="at">labels =</span> scales<span class="sc">::</span><span class="fu">dollar_format</span>())</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</details>
<div class="cell-output-display">
<p><img src="index_files/figure-html/unnamed-chunk-39-1.png" class="img-fluid" width="672"></p>
</div>
</div>
</section>
<section id="creating-interactive-plots" class="level3">
<h3 class="anchored" data-anchor-id="creating-interactive-plots">Creating Interactive Plots</h3>
<p>We also have the ability to create interactive plots with the help of a package called <code>plotly</code>. This is another example of the power of open-source coding, which gives us the ability to leverage code that others have built (that we may not have the expertise to create ourselves…). Like we did with the <code>tidyverse</code>, run <code>install.packages("plotly")</code> and then load it into your environment with <code>library(plotly)</code>. All we have to do to make a plot interactive, is to save it into our environment using the assignment operator - <code>&lt;-</code>. I am going to save my plot as <code>g</code> and then we have to run <code>ggplotly(g)</code>.</p>
<p>Look at the code below:</p>
<div class="cell">
<details>
<summary>Code</summary>
<div class="sourceCode cell-code" id="cb41"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb41-1"><a href="#cb41-1" aria-hidden="true" tabindex="-1"></a><span class="fu">library</span>(plotly)</span>
<span id="cb41-2"><a href="#cb41-2" aria-hidden="true" tabindex="-1"></a>g <span class="ot">&lt;-</span> diamonds <span class="sc">%&gt;%</span> </span>
<span id="cb41-3"><a href="#cb41-3" aria-hidden="true" tabindex="-1"></a>    <span class="fu">ggplot</span>(<span class="fu">aes</span>(price, <span class="at">fill =</span> cut)) <span class="sc">+</span></span>
<span id="cb41-4"><a href="#cb41-4" aria-hidden="true" tabindex="-1"></a>    <span class="fu">geom_histogram</span>() <span class="sc">+</span></span>
<span id="cb41-5"><a href="#cb41-5" aria-hidden="true" tabindex="-1"></a>    <span class="fu">theme_bw</span>()</span>
<span id="cb41-6"><a href="#cb41-6" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb41-7"><a href="#cb41-7" aria-hidden="true" tabindex="-1"></a><span class="fu">ggplotly</span>(g)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</details>
<div class="cell-output-display">
<div id="htmlwidget-e41ce1a513db834b9fba" style="width:100%;height:464px;" class="plotly html-widget"></div>
<script type="application/json" data-for="htmlwidget-e41ce1a513db834b9fba">{"x":{"data":[{"orientation":"v","width":[637.827586206897,637.827586206897,637.827586206896,637.827586206897,637.827586206897,637.827586206896,637.827586206897,637.827586206897,637.827586206897,637.827586206897,637.827586206895,637.827586206897,637.827586206895,637.827586206899,637.827586206899,637.827586206899,637.827586206899,637.827586206899,637.827586206899,637.827586206899,637.827586206895,637.827586206899,637.827586206899,637.827586206899,637.827586206899,637.827586206899,637.827586206899,637.827586206899,637.827586206899,637.827586206899],"base":[13538,6633,5032,3840,2640,2522,2978,2351,1708,1491,1159,996,780,807,667,606,568,510,447,415,369,347,309,301,306,272,273,240,223,2],"x":[637.827586206897,1275.65517241379,1913.48275862069,2551.31034482759,3189.13793103448,3826.96551724138,4464.79310344828,5102.62068965517,5740.44827586207,6378.27586206897,7016.10344827586,7653.93103448276,8291.75862068965,8929.58620689655,9567.41379310345,10205.2413793103,10843.0689655172,11480.8965517241,12118.724137931,12756.5517241379,13394.3793103448,14032.2068965517,14670.0344827586,15307.8620689655,15945.6896551724,16583.5172413793,17221.3448275862,17859.1724137931,18497,19134.8275862069],"y":[94,176,194,211,173,165,129,83,59,51,44,30,18,22,13,13,23,11,5,22,12,11,10,9,10,4,6,5,7,0],"text":["count:   94<br />price:   637.8276<br />cut: Fair","count:  176<br />price:  1275.6552<br />cut: Fair","count:  194<br />price:  1913.4828<br />cut: Fair","count:  211<br />price:  2551.3103<br />cut: Fair","count:  173<br />price:  3189.1379<br />cut: Fair","count:  165<br />price:  3826.9655<br />cut: Fair","count:  129<br />price:  4464.7931<br />cut: Fair","count:   83<br />price:  5102.6207<br />cut: Fair","count:   59<br />price:  5740.4483<br />cut: Fair","count:   51<br />price:  6378.2759<br />cut: Fair","count:   44<br />price:  7016.1034<br />cut: Fair","count:   30<br />price:  7653.9310<br />cut: Fair","count:   18<br />price:  8291.7586<br />cut: Fair","count:   22<br />price:  8929.5862<br />cut: Fair","count:   13<br />price:  9567.4138<br />cut: Fair","count:   13<br />price: 10205.2414<br />cut: Fair","count:   23<br />price: 10843.0690<br />cut: Fair","count:   11<br />price: 11480.8966<br />cut: Fair","count:    5<br />price: 12118.7241<br />cut: Fair","count:   22<br />price: 12756.5517<br />cut: Fair","count:   12<br />price: 13394.3793<br />cut: Fair","count:   11<br />price: 14032.2069<br />cut: Fair","count:   10<br />price: 14670.0345<br />cut: Fair","count:    9<br />price: 15307.8621<br />cut: Fair","count:   10<br />price: 15945.6897<br />cut: Fair","count:    4<br />price: 16583.5172<br />cut: Fair","count:    6<br />price: 17221.3448<br />cut: Fair","count:    5<br />price: 17859.1724<br />cut: Fair","count:    7<br />price: 18497.0000<br />cut: Fair","count:    0<br />price: 19134.8276<br />cut: Fair"],"type":"bar","textposition":"none","marker":{"autocolorscale":false,"color":"rgba(68,1,84,1)","line":{"width":1.88976377952756,"color":"transparent"}},"name":"Fair","legendgroup":"Fair","showlegend":true,"xaxis":"x","yaxis":"y","hoverinfo":"text","frame":null},{"orientation":"v","width":[637.827586206897,637.827586206897,637.827586206896,637.827586206897,637.827586206897,637.827586206896,637.827586206897,637.827586206897,637.827586206897,637.827586206897,637.827586206895,637.827586206897,637.827586206895,637.827586206899,637.827586206899,637.827586206899,637.827586206899,637.827586206899,637.827586206899,637.827586206899,637.827586206895,637.827586206899,637.827586206899,637.827586206899,637.827586206899,637.827586206899,637.827586206899,637.827586206899,637.827586206899,637.827586206899],"base":[12477,6120,4609,3454,2319,2104,2530,2120,1527,1347,1034,914,709,736,619,568,535,470,420,382,338,319,286,277,278,248,256,223,203,2],"x":[637.827586206897,1275.65517241379,1913.48275862069,2551.31034482759,3189.13793103448,3826.96551724138,4464.79310344828,5102.62068965517,5740.44827586207,6378.27586206897,7016.10344827586,7653.93103448276,8291.75862068965,8929.58620689655,9567.41379310345,10205.2413793103,10843.0689655172,11480.8965517241,12118.724137931,12756.5517241379,13394.3793103448,14032.2068965517,14670.0344827586,15307.8620689655,15945.6896551724,16583.5172413793,17221.3448275862,17859.1724137931,18497,19134.8275862069],"y":[1061,513,423,386,321,418,448,231,181,144,125,82,71,71,48,38,33,40,27,33,31,28,23,24,28,24,17,17,20,0],"text":["count: 1061<br />price:   637.8276<br />cut: Good","count:  513<br />price:  1275.6552<br />cut: Good","count:  423<br />price:  1913.4828<br />cut: Good","count:  386<br />price:  2551.3103<br />cut: Good","count:  321<br />price:  3189.1379<br />cut: Good","count:  418<br />price:  3826.9655<br />cut: Good","count:  448<br />price:  4464.7931<br />cut: Good","count:  231<br />price:  5102.6207<br />cut: Good","count:  181<br />price:  5740.4483<br />cut: Good","count:  144<br />price:  6378.2759<br />cut: Good","count:  125<br />price:  7016.1034<br />cut: Good","count:   82<br />price:  7653.9310<br />cut: Good","count:   71<br />price:  8291.7586<br />cut: Good","count:   71<br />price:  8929.5862<br />cut: Good","count:   48<br />price:  9567.4138<br />cut: Good","count:   38<br />price: 10205.2414<br />cut: Good","count:   33<br />price: 10843.0690<br />cut: Good","count:   40<br />price: 11480.8966<br />cut: Good","count:   27<br />price: 12118.7241<br />cut: Good","count:   33<br />price: 12756.5517<br />cut: Good","count:   31<br />price: 13394.3793<br />cut: Good","count:   28<br />price: 14032.2069<br />cut: Good","count:   23<br />price: 14670.0345<br />cut: Good","count:   24<br />price: 15307.8621<br />cut: Good","count:   28<br />price: 15945.6897<br />cut: Good","count:   24<br />price: 16583.5172<br />cut: Good","count:   17<br />price: 17221.3448<br />cut: Good","count:   17<br />price: 17859.1724<br />cut: Good","count:   20<br />price: 18497.0000<br />cut: Good","count:    0<br />price: 19134.8276<br />cut: Good"],"type":"bar","textposition":"none","marker":{"autocolorscale":false,"color":"rgba(59,82,139,1)","line":{"width":1.88976377952756,"color":"transparent"}},"name":"Good","legendgroup":"Good","showlegend":true,"xaxis":"x","yaxis":"y","hoverinfo":"text","frame":null},{"orientation":"v","width":[637.827586206897,637.827586206897,637.827586206896,637.827586206897,637.827586206897,637.827586206896,637.827586206897,637.827586206897,637.827586206897,637.827586206897,637.827586206895,637.827586206897,637.827586206895,637.827586206899,637.827586206899,637.827586206899,637.827586206899,637.827586206899,637.827586206899,637.827586206899,637.827586206895,637.827586206899,637.827586206899,637.827586206899,637.827586206899,637.827586206899,637.827586206899,637.827586206899,637.827586206899,637.827586206899],"base":[9330,4976,3543,2480,1632,1443,1698,1533,1103,983,736,671,543,555,465,418,422,351,313,293,263,251,220,213,200,189,200,159,158,1],"x":[637.827586206897,1275.65517241379,1913.48275862069,2551.31034482759,3189.13793103448,3826.96551724138,4464.79310344828,5102.62068965517,5740.44827586207,6378.27586206897,7016.10344827586,7653.93103448276,8291.75862068965,8929.58620689655,9567.41379310345,10205.2413793103,10843.0689655172,11480.8965517241,12118.724137931,12756.5517241379,13394.3793103448,14032.2068965517,14670.0344827586,15307.8620689655,15945.6896551724,16583.5172413793,17221.3448275862,17859.1724137931,18497,19134.8275862069],"y":[3147,1144,1066,974,687,661,832,587,424,364,298,243,166,181,154,150,113,119,107,89,75,68,66,64,78,59,56,64,45,1],"text":["count: 3147<br />price:   637.8276<br />cut: Very Good","count: 1144<br />price:  1275.6552<br />cut: Very Good","count: 1066<br />price:  1913.4828<br />cut: Very Good","count:  974<br />price:  2551.3103<br />cut: Very Good","count:  687<br />price:  3189.1379<br />cut: Very Good","count:  661<br />price:  3826.9655<br />cut: Very Good","count:  832<br />price:  4464.7931<br />cut: Very Good","count:  587<br />price:  5102.6207<br />cut: Very Good","count:  424<br />price:  5740.4483<br />cut: Very Good","count:  364<br />price:  6378.2759<br />cut: Very Good","count:  298<br />price:  7016.1034<br />cut: Very Good","count:  243<br />price:  7653.9310<br />cut: Very Good","count:  166<br />price:  8291.7586<br />cut: Very Good","count:  181<br />price:  8929.5862<br />cut: Very Good","count:  154<br />price:  9567.4138<br />cut: Very Good","count:  150<br />price: 10205.2414<br />cut: Very Good","count:  113<br />price: 10843.0690<br />cut: Very Good","count:  119<br />price: 11480.8966<br />cut: Very Good","count:  107<br />price: 12118.7241<br />cut: Very Good","count:   89<br />price: 12756.5517<br />cut: Very Good","count:   75<br />price: 13394.3793<br />cut: Very Good","count:   68<br />price: 14032.2069<br />cut: Very Good","count:   66<br />price: 14670.0345<br />cut: Very Good","count:   64<br />price: 15307.8621<br />cut: Very Good","count:   78<br />price: 15945.6897<br />cut: Very Good","count:   59<br />price: 16583.5172<br />cut: Very Good","count:   56<br />price: 17221.3448<br />cut: Very Good","count:   64<br />price: 17859.1724<br />cut: Very Good","count:   45<br />price: 18497.0000<br />cut: Very Good","count:    1<br />price: 19134.8276<br />cut: Very Good"],"type":"bar","textposition":"none","marker":{"autocolorscale":false,"color":"rgba(33,144,140,1)","line":{"width":1.88976377952756,"color":"transparent"}},"name":"Very Good","legendgroup":"Very Good","showlegend":true,"xaxis":"x","yaxis":"y","hoverinfo":"text","frame":null},{"orientation":"v","width":[637.827586206897,637.827586206897,637.827586206896,637.827586206897,637.827586206897,637.827586206896,637.827586206897,637.827586206897,637.827586206897,637.827586206897,637.827586206895,637.827586206897,637.827586206895,637.827586206899,637.827586206899,637.827586206899,637.827586206899,637.827586206899,637.827586206899,637.827586206899,637.827586206895,637.827586206899,637.827586206899,637.827586206899,637.827586206899,637.827586206899,637.827586206899,637.827586206899,637.827586206899,637.827586206899],"base":[6386,3327,2476,1497,1108,731,772,770,530,496,407,349,309,314,269,224,236,172,161,160,116,109,99,101,93,91,92,77,79,0],"x":[637.827586206897,1275.65517241379,1913.48275862069,2551.31034482759,3189.13793103448,3826.96551724138,4464.79310344828,5102.62068965517,5740.44827586207,6378.27586206897,7016.10344827586,7653.93103448276,8291.75862068965,8929.58620689655,9567.41379310345,10205.2413793103,10843.0689655172,11480.8965517241,12118.724137931,12756.5517241379,13394.3793103448,14032.2068965517,14670.0344827586,15307.8620689655,15945.6896551724,16583.5172413793,17221.3448275862,17859.1724137931,18497,19134.8275862069],"y":[2944,1649,1067,983,524,712,926,763,573,487,329,322,234,241,196,194,186,179,152,133,147,142,121,112,107,98,108,82,79,1],"text":["count: 2944<br />price:   637.8276<br />cut: Premium","count: 1649<br />price:  1275.6552<br />cut: Premium","count: 1067<br />price:  1913.4828<br />cut: Premium","count:  983<br />price:  2551.3103<br />cut: Premium","count:  524<br />price:  3189.1379<br />cut: Premium","count:  712<br />price:  3826.9655<br />cut: Premium","count:  926<br />price:  4464.7931<br />cut: Premium","count:  763<br />price:  5102.6207<br />cut: Premium","count:  573<br />price:  5740.4483<br />cut: Premium","count:  487<br />price:  6378.2759<br />cut: Premium","count:  329<br />price:  7016.1034<br />cut: Premium","count:  322<br />price:  7653.9310<br />cut: Premium","count:  234<br />price:  8291.7586<br />cut: Premium","count:  241<br />price:  8929.5862<br />cut: Premium","count:  196<br />price:  9567.4138<br />cut: Premium","count:  194<br />price: 10205.2414<br />cut: Premium","count:  186<br />price: 10843.0690<br />cut: Premium","count:  179<br />price: 11480.8966<br />cut: Premium","count:  152<br />price: 12118.7241<br />cut: Premium","count:  133<br />price: 12756.5517<br />cut: Premium","count:  147<br />price: 13394.3793<br />cut: Premium","count:  142<br />price: 14032.2069<br />cut: Premium","count:  121<br />price: 14670.0345<br />cut: Premium","count:  112<br />price: 15307.8621<br />cut: Premium","count:  107<br />price: 15945.6897<br />cut: Premium","count:   98<br />price: 16583.5172<br />cut: Premium","count:  108<br />price: 17221.3448<br />cut: Premium","count:   82<br />price: 17859.1724<br />cut: Premium","count:   79<br />price: 18497.0000<br />cut: Premium","count:    1<br />price: 19134.8276<br />cut: Premium"],"type":"bar","textposition":"none","marker":{"autocolorscale":false,"color":"rgba(93,200,99,1)","line":{"width":1.88976377952756,"color":"transparent"}},"name":"Premium","legendgroup":"Premium","showlegend":true,"xaxis":"x","yaxis":"y","hoverinfo":"text","frame":null},{"orientation":"v","width":[637.827586206897,637.827586206897,637.827586206896,637.827586206897,637.827586206897,637.827586206896,637.827586206897,637.827586206897,637.827586206897,637.827586206897,637.827586206895,637.827586206897,637.827586206895,637.827586206899,637.827586206899,637.827586206899,637.827586206899,637.827586206899,637.827586206899,637.827586206899,637.827586206895,637.827586206899,637.827586206899,637.827586206899,637.827586206899,637.827586206899,637.827586206899,637.827586206899,637.827586206899,637.827586206899],"base":[0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0],"x":[637.827586206897,1275.65517241379,1913.48275862069,2551.31034482759,3189.13793103448,3826.96551724138,4464.79310344828,5102.62068965517,5740.44827586207,6378.27586206897,7016.10344827586,7653.93103448276,8291.75862068965,8929.58620689655,9567.41379310345,10205.2413793103,10843.0689655172,11480.8965517241,12118.724137931,12756.5517241379,13394.3793103448,14032.2068965517,14670.0344827586,15307.8620689655,15945.6896551724,16583.5172413793,17221.3448275862,17859.1724137931,18497,19134.8275862069],"y":[6386,3327,2476,1497,1108,731,772,770,530,496,407,349,309,314,269,224,236,172,161,160,116,109,99,101,93,91,92,77,79,0],"text":["count: 6386<br />price:   637.8276<br />cut: Ideal","count: 3327<br />price:  1275.6552<br />cut: Ideal","count: 2476<br />price:  1913.4828<br />cut: Ideal","count: 1497<br />price:  2551.3103<br />cut: Ideal","count: 1108<br />price:  3189.1379<br />cut: Ideal","count:  731<br />price:  3826.9655<br />cut: Ideal","count:  772<br />price:  4464.7931<br />cut: Ideal","count:  770<br />price:  5102.6207<br />cut: Ideal","count:  530<br />price:  5740.4483<br />cut: Ideal","count:  496<br />price:  6378.2759<br />cut: Ideal","count:  407<br />price:  7016.1034<br />cut: Ideal","count:  349<br />price:  7653.9310<br />cut: Ideal","count:  309<br />price:  8291.7586<br />cut: Ideal","count:  314<br />price:  8929.5862<br />cut: Ideal","count:  269<br />price:  9567.4138<br />cut: Ideal","count:  224<br />price: 10205.2414<br />cut: Ideal","count:  236<br />price: 10843.0690<br />cut: Ideal","count:  172<br />price: 11480.8966<br />cut: Ideal","count:  161<br />price: 12118.7241<br />cut: Ideal","count:  160<br />price: 12756.5517<br />cut: Ideal","count:  116<br />price: 13394.3793<br />cut: Ideal","count:  109<br />price: 14032.2069<br />cut: Ideal","count:   99<br />price: 14670.0345<br />cut: Ideal","count:  101<br />price: 15307.8621<br />cut: Ideal","count:   93<br />price: 15945.6897<br />cut: Ideal","count:   91<br />price: 16583.5172<br />cut: Ideal","count:   92<br />price: 17221.3448<br />cut: Ideal","count:   77<br />price: 17859.1724<br />cut: Ideal","count:   79<br />price: 18497.0000<br />cut: Ideal","count:    0<br />price: 19134.8276<br />cut: Ideal"],"type":"bar","textposition":"none","marker":{"autocolorscale":false,"color":"rgba(253,231,37,1)","line":{"width":1.88976377952756,"color":"transparent"}},"name":"Ideal","legendgroup":"Ideal","showlegend":true,"xaxis":"x","yaxis":"y","hoverinfo":"text","frame":null}],"layout":{"margin":{"t":26.2283105022831,"r":7.30593607305936,"b":40.1826484018265,"l":54.7945205479452},"plot_bgcolor":"rgba(255,255,255,1)","paper_bgcolor":"rgba(255,255,255,1)","font":{"color":"rgba(0,0,0,1)","family":"","size":14.6118721461187},"xaxis":{"domain":[0,1],"automargin":true,"type":"linear","autorange":false,"range":[-637.827586206897,20410.4827586207],"tickmode":"array","ticktext":["0","5000","10000","15000","20000"],"tickvals":[0,5000,10000,15000,20000],"categoryorder":"array","categoryarray":["0","5000","10000","15000","20000"],"nticks":null,"ticks":"outside","tickcolor":"rgba(51,51,51,1)","ticklen":3.65296803652968,"tickwidth":0.66417600664176,"showticklabels":true,"tickfont":{"color":"rgba(77,77,77,1)","family":"","size":11.689497716895},"tickangle":-0,"showline":false,"linecolor":null,"linewidth":0,"showgrid":true,"gridcolor":"rgba(235,235,235,1)","gridwidth":0.66417600664176,"zeroline":false,"anchor":"y","title":{"text":"price","font":{"color":"rgba(0,0,0,1)","family":"","size":14.6118721461187}},"hoverformat":".2f"},"yaxis":{"domain":[0,1],"automargin":true,"type":"linear","autorange":false,"range":[-681.6,14313.6],"tickmode":"array","ticktext":["0","5000","10000"],"tickvals":[0,5000,10000],"categoryorder":"array","categoryarray":["0","5000","10000"],"nticks":null,"ticks":"outside","tickcolor":"rgba(51,51,51,1)","ticklen":3.65296803652968,"tickwidth":0.66417600664176,"showticklabels":true,"tickfont":{"color":"rgba(77,77,77,1)","family":"","size":11.689497716895},"tickangle":-0,"showline":false,"linecolor":null,"linewidth":0,"showgrid":true,"gridcolor":"rgba(235,235,235,1)","gridwidth":0.66417600664176,"zeroline":false,"anchor":"x","title":{"text":"count","font":{"color":"rgba(0,0,0,1)","family":"","size":14.6118721461187}},"hoverformat":".2f"},"shapes":[{"type":"rect","fillcolor":"transparent","line":{"color":"rgba(51,51,51,1)","width":0.66417600664176,"linetype":"solid"},"yref":"paper","xref":"paper","x0":0,"x1":1,"y0":0,"y1":1}],"showlegend":true,"legend":{"bgcolor":"rgba(255,255,255,1)","bordercolor":"transparent","borderwidth":1.88976377952756,"font":{"color":"rgba(0,0,0,1)","family":"","size":11.689497716895},"title":{"text":"cut","font":{"color":"rgba(0,0,0,1)","family":"","size":14.6118721461187}}},"hovermode":"closest","barmode":"relative"},"config":{"doubleClick":"reset","modeBarButtonsToAdd":["hoverclosest","hovercompare"],"showSendToCloud":false},"source":"A","attrs":{"85ed2670b6e8":{"x":{},"fill":{},"type":"bar"}},"cur_data":"85ed2670b6e8","visdat":{"85ed2670b6e8":["function (y) ","x"]},"highlight":{"on":"plotly_click","persistent":false,"dynamic":false,"selectize":false,"opacityDim":0.2,"selected":{"opacity":1},"debounce":0},"shinyEvents":["plotly_hover","plotly_click","plotly_selected","plotly_relayout","plotly_brushed","plotly_brushing","plotly_clickannotation","plotly_doubleclick","plotly_deselect","plotly_afterplot","plotly_sunburstclick"],"base_url":"https://plot.ly"},"evals":[],"jsHooks":[]}</script>
</div>
</div>
<p>This is just a taste of the plots that can be generated…</p>
</section>
</section>
</section>
<section id="closing-remarks" class="level1">
<h1>Closing Remarks</h1>
<p>The above is by no means a comprehensive introduction to R, but it does cover the basics and will allow you to get started on your own projects.</p>
<p>Cheers.</p>


</section>

</main> <!-- /main -->
<script id="quarto-html-after-body" type="application/javascript">
window.document.addEventListener("DOMContentLoaded", function (event) {
  const toggleBodyColorMode = (bsSheetEl) => {
    const mode = bsSheetEl.getAttribute("data-mode");
    const bodyEl = window.document.querySelector("body");
    if (mode === "dark") {
      bodyEl.classList.add("quarto-dark");
      bodyEl.classList.remove("quarto-light");
    } else {
      bodyEl.classList.add("quarto-light");
      bodyEl.classList.remove("quarto-dark");
    }
  }
  const toggleBodyColorPrimary = () => {
    const bsSheetEl = window.document.querySelector("link#quarto-bootstrap");
    if (bsSheetEl) {
      toggleBodyColorMode(bsSheetEl);
    }
  }
  toggleBodyColorPrimary();  
  const icon = "";
  const anchorJS = new window.AnchorJS();
  anchorJS.options = {
    placement: 'right',
    icon: icon
  };
  anchorJS.add('.anchored');
  const clipboard = new window.ClipboardJS('.code-copy-button', {
    target: function(trigger) {
      return trigger.previousElementSibling;
    }
  });
  clipboard.on('success', function(e) {
    // button target
    const button = e.trigger;
    // don't keep focus
    button.blur();
    // flash "checked"
    button.classList.add('code-copy-button-checked');
    var currentTitle = button.getAttribute("title");
    button.setAttribute("title", "Copied!");
    let tooltip;
    if (window.bootstrap) {
      button.setAttribute("data-bs-toggle", "tooltip");
      button.setAttribute("data-bs-placement", "left");
      button.setAttribute("data-bs-title", "Copied!");
      tooltip = new bootstrap.Tooltip(button, 
        { trigger: "manual", 
          customClass: "code-copy-button-tooltip",
          offset: [0, -8]});
      tooltip.show();    
    }
    setTimeout(function() {
      if (tooltip) {
        tooltip.hide();
        button.removeAttribute("data-bs-title");
        button.removeAttribute("data-bs-toggle");
        button.removeAttribute("data-bs-placement");
      }
      button.setAttribute("title", currentTitle);
      button.classList.remove('code-copy-button-checked');
    }, 1000);
    // clear code selection
    e.clearSelection();
  });
  function tippyHover(el, contentFn) {
    const config = {
      allowHTML: true,
      content: contentFn,
      maxWidth: 500,
      delay: 100,
      arrow: false,
      appendTo: function(el) {
          return el.parentElement;
      },
      interactive: true,
      interactiveBorder: 10,
      theme: 'quarto',
      placement: 'bottom-start'
    };
    window.tippy(el, config); 
  }
  const noterefs = window.document.querySelectorAll('a[role="doc-noteref"]');
  for (var i=0; i<noterefs.length; i++) {
    const ref = noterefs[i];
    tippyHover(ref, function() {
      // use id or data attribute instead here
      let href = ref.getAttribute('data-footnote-href') || ref.getAttribute('href');
      try { href = new URL(href).hash; } catch {}
      const id = href.replace(/^#\/?/, "");
      const note = window.document.getElementById(id);
      return note.innerHTML;
    });
  }
  const findCites = (el) => {
    const parentEl = el.parentElement;
    if (parentEl) {
      const cites = parentEl.dataset.cites;
      if (cites) {
        return {
          el,
          cites: cites.split(' ')
        };
      } else {
        return findCites(el.parentElement)
      }
    } else {
      return undefined;
    }
  };
  var bibliorefs = window.document.querySelectorAll('a[role="doc-biblioref"]');
  for (var i=0; i<bibliorefs.length; i++) {
    const ref = bibliorefs[i];
    const citeInfo = findCites(ref);
    if (citeInfo) {
      tippyHover(citeInfo.el, function() {
        var popup = window.document.createElement('div');
        citeInfo.cites.forEach(function(cite) {
          var citeDiv = window.document.createElement('div');
          citeDiv.classList.add('hanging-indent');
          citeDiv.classList.add('csl-entry');
          var biblioDiv = window.document.getElementById('ref-' + cite);
          if (biblioDiv) {
            citeDiv.innerHTML = biblioDiv.innerHTML;
          }
          popup.appendChild(citeDiv);
        });
        return popup.innerHTML;
      });
    }
  }
});
</script>
</div> <!-- /content -->
<footer class="footer">
  <div class="nav-footer">
      <div class="nav-footer-center"><div class="cookie-consent-footer"><a href="#" id="open_preferences_center">Cookie Preferences</a></div></div>
  </div>
</footer>



</body></html>